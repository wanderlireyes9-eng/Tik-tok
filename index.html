<!-- Branch: main --><!-- Revision: 56a51175cdec6d094be151b367da967dd4112d22 --><!-- Created at: 27 of May 2025 14:03:57 GMT+00:00 --><!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no,viewport-fit=auto"><meta name="description" content="View Master Template"><title>View Master Template</title><style>:where(:not(:is(html,iframe,canvas,img,svg,video,audio,svg *,symbol *))){all:unset;display:revert}:where(:not(:is(html,iframe,canvas,img,svg,video,audio,svg *,symbol *))){all:unset;display:revert}:where(:not(:is(html,iframe,canvas,img,svg,video,audio,svg *,symbol *))){all:unset;display:revert}button{background:0 0;border:none}*,:before,:after{box-sizing:border-box}a,button{cursor:revert}ol,ul,menu{list-style:none}img{max-width:100%;max-height:100%}table{border-collapse:collapse}input,textarea{-webkit-user-select:auto;-moz-user-select:auto;user-select:auto}textarea{white-space:revert}meter{-webkit-appearance:revert;-moz-appearance:revert;appearance:revert}pre{all:revert}::placeholder{color:unset}::marker{content:""}:where([hidden]){display:none}:where([contenteditable]:not([contenteditable=false])){-moz-user-modify:read-write;-webkit-user-modify:read-write;overflow-wrap:break-word;-webkit-user-select:auto;-moz-user-select:auto;user-select:auto}:where([draggable=true]){-webkit-user-drag:element}body{background-color:#000;margin:0;padding:0}@media screen and (min-width:299px) and (max-width:301px) and (min-height:249px) and (max-height:251px){body{background-color:transparent}}button{padding:0}#dynamic{height:100vh;overflow:hidden}.fadeOut{opacity:0;pointer-events:none;transition:opacity .5s}.fadeIn{opacity:1;pointer-events:auto;transition:opacity .5s}</style><style>.wnLcbW_fallback{text-align:right;background:rgba(0,0,0,.8);width:100vw;height:100vh;padding:20px;position:absolute;top:0;left:0}.C4yOdG_primaryButton,.C4yOdG_gdpr .C4yOdG_buttons button.C4yOdG_primaryButton{color:#fff;background-color:#555fff;padding:0}.C4yOdG_primaryButton button,.C4yOdG_gdpr .C4yOdG_buttons button.C4yOdG_primaryButton button{text-transform:uppercase;color:#fff}@media screen and (orientation:landscape){.C4yOdG_primaryButton,.C4yOdG_gdpr .C4yOdG_buttons button.C4yOdG_primaryButton{flex:1}}.C4yOdG_secondaryButton,.C4yOdG_gdpr .C4yOdG_buttons button.C4yOdG_secondaryButton{color:#555fff;background-color:#fff;padding:0}.C4yOdG_secondaryButton button,.C4yOdG_gdpr .C4yOdG_buttons button.C4yOdG_secondaryButton button{color:#555fff}@media screen and (orientation:landscape){.C4yOdG_secondaryButton,.C4yOdG_gdpr .C4yOdG_buttons button.C4yOdG_secondaryButton{flex:1}}.C4yOdG_gdpr{text-align:center;z-index:2147483647;background-color:#fff;flex-direction:column;justify-content:space-between;width:100%;height:100%;display:flex;position:absolute;top:0;left:0;overflow:hidden}.C4yOdG_gdpr .C4yOdG_icon{color:#fff;background:#007aff url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22100%22%20height%3D%22100%22%3E%3Cpath%20fill%3D%22%23FFF%22%20d%3D%22M46.2%201.238v12.1c-17.7%201-31.9%2015.2-32.9%2032.9H1.2v4h12.1c1%2017.7%2015.2%2031.9%2032.9%2032.9v12.1h4v-12.1c17.7-1%2031.9-15.2%2032.9-32.9h12.1v-4h-12c-1-17.7-15.2-31.9-32.9-32.9v-12.1zm0%2016.1v14.1c-7.8.9-14%207.1-14.9%2014.9h-14c1-15.6%2013.4-28%2028.9-29m4%200c15.5%201%2027.9%2013.4%2028.9%2028.9h-14c-.9-7.8-7.1-14-14.9-14.9zm-9.3%2023.6c10.8-8.1%2022.8%203.9%2014.7%2014.7-10.8%208.1-22.8-3.9-14.7-14.7m-23.6%209.3h14.1c.9%207.8%207.1%2014%2014.9%2014.9v14.1c-15.6-1-28-13.4-29-29m47.8%200h14.1c-1%2015.5-13.4%2028-28.9%2028.9v-14.1c7.7-.8%2013.9-7%2014.8-14.8%22%2F%3E%3C%2Fsvg%3E) 50%/85% no-repeat;border-radius:50%;width:17vw;max-width:6em;height:17vw;max-height:6em;padding:.5em;display:inline-block}.C4yOdG_gdpr .C4yOdG_content{flex-direction:column;flex:1;justify-content:center;display:flex}.C4yOdG_gdpr .C4yOdG_header{padding:0;line-height:1}.C4yOdG_gdpr .C4yOdG_title{word-wrap:break-word;margin:.5em 12.5%;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:5.5vw;font-weight:600;line-height:1.5}.C4yOdG_gdpr .C4yOdG_bodyText{text-align:center;word-wrap:break-word;padding:0 12.5%;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:4.5vw;font-weight:400;line-height:1.5;overflow:hidden}.C4yOdG_gdpr .C4yOdG_buttons{width:100%;height:15vw;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;line-height:15vw}.C4yOdG_gdpr .C4yOdG_buttons button{float:right;width:50%;height:100%;display:block}.C4yOdG_gdpr .C4yOdG_buttons button.C4yOdG_primaryButton{font-size:7.5vw}.C4yOdG_gdpr .C4yOdG_buttons button.C4yOdG_secondaryButton{color:#007aff;border-top:1px solid #e8e8e8;font-size:4.5vw}@media screen and (orientation:landscape){.C4yOdG_gdpr{flex-direction:row}.C4yOdG_gdpr .C4yOdG_content{width:75%}.C4yOdG_gdpr .C4yOdG_content .C4yOdG_title{font-size:5vh}.C4yOdG_gdpr .C4yOdG_content .C4yOdG_bodyText{font-size:4vh}.C4yOdG_gdpr .C4yOdG_buttons{flex-direction:column;justify-content:center;width:25%;min-width:116px;height:100%;padding-right:4.5vh;display:flex;right:0}.C4yOdG_gdpr .C4yOdG_buttons button{float:none;width:100%;height:auto;line-height:12vh}.C4yOdG_gdpr .C4yOdG_buttons button.C4yOdG_primaryButton{border-radius:10vh;margin-bottom:2vh;font-size:3.5vh}.C4yOdG_gdpr .C4yOdG_buttons button.C4yOdG_secondaryButton{border-top:none;font-size:2.5vh}}._0zGmtq_watermark{z-index:200;background-color:#000;width:100vw;min-height:1px;font-size:1px;display:flex;position:absolute}._0zGmtq_watermark ._0zGmtq_leading._0zGmtq_bit{width:4vw}._0zGmtq_watermark ._0zGmtq_bit{flex-grow:0;width:1vw;height:1px}._0zGmtq_watermark ._0zGmtq_zero{height:1px}._0zGmtq_watermark ._0zGmtq_one{background-color:#050505;height:1px}.m2_mMq_privacyButton{cursor:pointer;z-index:2147483497;background:0 0;width:16px;padding:0;line-height:0;position:absolute;bottom:4px;left:4px}@media (min-width:48em){.m2_mMq_privacyButton{bottom:.8rem;left:.8rem}}.m2_mMq_privacyButton svg{width:100%;height:100%}@media only screen and (max-height:300px){.m2_mMq_privacyButton{width:13px;height:13px;left:2px}}@media only screen and (max-height:200px){.m2_mMq_privacyButton{width:12px;height:12px}}._0LRN8a_container{text-align:center;flex-direction:column;justify-content:center;width:100%;height:145px;display:flex;position:relative;overflow:hidden}._0LRN8a_completeContainer{justify-content:center;align-items:center}._0LRN8a_popup{background-color:#fff;flex-direction:column;justify-content:center;height:100%;padding:0;display:flex;position:absolute;bottom:0;left:0;right:0}@media (prefers-color-scheme:dark){._0LRN8a_popup{color:#fff;background:#121212}}._0LRN8a_complete{background-image:url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2272%22%20height%3D%2272%22%20fill%3D%22none%22%3E%3Crect%20width%3D%2271%22%20height%3D%2271%22%20x%3D%22.5%22%20y%3D%22.5%22%20fill%3D%22%2300AEFF%22%20rx%3D%2235.5%22%2F%3E%3Cpath%20stroke%3D%22%23fff%22%20stroke-linecap%3D%22round%22%20stroke-width%3D%226%22%20d%3D%22M20.743%2036.375%2031.5%2047.132M31.5%2047.132%2053.882%2024.75%22%2F%3E%3C%2Fsvg%3E);background-position:50%;background-repeat:no-repeat;background-size:100%;width:71px;height:71px;margin-top:5px;display:inline-block}@media (max-width:335px){._0LRN8a_complete{width:60px;height:60px;margin-top:3px}}._0LRN8a_title{color:#000;margin-top:15px;margin-bottom:18px;padding:0 30px;font-weight:700}@media (prefers-color-scheme:dark){._0LRN8a_title{color:#fff}}._0LRN8a_title._0LRN8a_question{font-size:17px}@media (max-width:335px){._0LRN8a_title._0LRN8a_question{margin-top:3px;font-size:15px}}._0LRN8a_title._0LRN8a_thanks{font-size:22px}@media (max-width:335px){._0LRN8a_title._0LRN8a_thanks{margin-top:8px;margin-bottom:8px;font-size:18px}}._0LRN8a_options{justify-content:center;gap:15px;max-width:303px;margin-bottom:0;margin-left:auto;margin-right:auto;padding:0 16px;display:flex}@media (max-width:335px){._0LRN8a_options{gap:10px;max-width:245px;padding:0 12px 12px}}._0LRN8a_option{cursor:pointer;background-color:#fff;border:1px solid #e0e0e0;border-radius:10px;flex-direction:column;flex:none;justify-content:center;align-items:center;width:91px;height:88px;padding-top:10px;transition:background-color .2s ease-in-out;display:flex;box-shadow:0 1px 3px rgba(0,0,0,.1)}@media (prefers-color-scheme:dark){._0LRN8a_option{color:#fff;background:#121212}}@media (max-width:335px){._0LRN8a_option{border-radius:10px;width:75px;height:75px}}._0LRN8a_option:hover{background-color:#f8f8f8}._0LRN8a_emoji{margin-bottom:4px;font-size:40px}@media (max-width:335px){._0LRN8a_emoji{margin-bottom:2px;font-size:32px}}._0LRN8a_optionText{color:#000;padding-bottom:5px;font-size:14px;font-weight:500}@media (prefers-color-scheme:dark){._0LRN8a_optionText{color:#fff}}@media (max-width:335px){._0LRN8a_optionText{padding-bottom:3px;font-size:12px}}.rM5gmW_adInfoRow{margin-bottom:3px;line-height:1.4;display:flex}.rM5gmW_adInfoLabel{color:#000;min-width:80px;font-weight:400}@media (prefers-color-scheme:dark){.rM5gmW_adInfoLabel{color:#fff}}@media (max-width:335px){.rM5gmW_adInfoLabel{min-width:70px}}.rM5gmW_adInfoValue{color:#9f9f9f;letter-spacing:0;text-align:left;white-space:nowrap;text-overflow:ellipsis;flex:auto;overflow:hidden}@media (prefers-color-scheme:dark){.rM5gmW_adInfoValue{color:silver}}@media (max-width:335px){.rM5gmW_adInfoValue{font-size:10px}}.rM5gmW_adInfoValue.rM5gmW_expanded{white-space:normal;word-break:break-word}.closeIcon.privacy{filter:invert();width:11px;height:11px}@media (max-width:335px){.closeIcon.privacy{width:9px;height:9px}}@media (prefers-color-scheme:dark){.closeIcon.privacy{filter:none}}.FbTWOG_popupContainer.FbTWOG_popupContainerDisplay{z-index:2147483647;position:fixed;top:0;bottom:0;left:0;right:0}.FbTWOG_privacyPopup{z-index:2147483647;background:#fff;border-radius:9px 9px 0 0;padding-top:12px;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;transition:transform .2s ease-in-out;position:fixed;bottom:0;left:0;right:0}@media (prefers-color-scheme:dark){.FbTWOG_privacyPopup{color:#fff;background:#121212}}@media (max-width:335px){.FbTWOG_privacyPopup{border-radius:7px 7px 0 0;padding-top:10px}}.FbTWOG_popupHeader{justify-content:space-between;height:24px;margin-bottom:-30px;display:flex;position:relative}.FbTWOG_popupHeader button{z-index:1;cursor:pointer;background:0 0;border:none;position:absolute;top:-3px;right:3.44%}.FbTWOG_readMore{color:#0376d9;padding:16px 0;font-size:16px;font-weight:400}@media (prefers-color-scheme:dark){.FbTWOG_readMore{color:#4a9eff}}@media (max-width:335px){.FbTWOG_readMore{padding:12px 0;font-size:12px}}.FbTWOG_privacyPolicy{text-align:center}.FbTWOG_popupFooter{color:#000;background-color:#f1f1f1;width:100%;margin-top:5px;padding:15px;font-size:12px}@media (prefers-color-scheme:dark){.FbTWOG_popupFooter{color:#fff;background-color:#1e1e1e}}@media (max-width:335px){.FbTWOG_popupFooter{margin-top:3px;padding:12px 10px;font-size:10px}}.FbTWOG_popupFooter .FbTWOG_adInfoTitle{margin-bottom:3px;font-weight:700;line-height:1.4}.FbTWOG_popupBody{padding-top:0;font-size:14px}@media (max-width:335px){.FbTWOG_popupBody{padding-top:0;font-size:13px}}.FbTWOG_show{transform:translateY(0);box-shadow:0 -10px 20px -5px rgba(115,115,115,.75)}@media (prefers-color-scheme:dark){.FbTWOG_show{box-shadow:0 -10px 20px -5px rgba(0,0,0,.75)}}.FbTWOG_hide{transform:translateY(100%)}.FbTWOG_displayNone{display:none}.FbTWOG_mask{-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);background:rgba(255,255,255,.2);transition:all .5s;position:fixed;top:0;bottom:0;left:0;right:0}@media (prefers-color-scheme:dark){.FbTWOG_mask{background:rgba(0,0,0,.5)}}.FbTWOG_debug{color:#bfbfbf;height:200px;font-size:11px;overflow-x:hidden;overflow-y:auto}@media (prefers-color-scheme:dark){.FbTWOG_debug{color:#a0a0a0}}@media (max-width:335px){.FbTWOG_debug{height:150px;font-size:9px}}.NQnIja_countdown{text-align:center;color:#fff;background:rgba(51,51,51,.5);border-radius:50%;min-width:35px;min-height:35px;margin:-10px;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:16px;font-weight:400;line-height:35px;display:block}.NQnIja_countdown:before,.NQnIja_countdown:after{content:"";line-height:0;display:inline-flex}.NQnIja_countdownInvisible{width:18px;height:18px}.mqB7Ka_skipIcon{background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='94.7' height='94.9'%3E%3Cg fill='%23FFF' stroke='%23000' stroke-width='3.417' stroke-miterlimit='10'%3E%3Cpath d='m37 75.5 22.4-22.4H1.9V41.7h57.5L37 19.3l8.1-8.1 36.2 36.2-36.2 36.2z'/%3E%3Cpath d='M92.733 11.138v72.4h-11.5v-72.4z'/%3E%3C/g%3E%3C/svg%3E");background-position:50%;background-repeat:no-repeat;background-size:100%;width:18px;height:18px;display:inline-block}.LJWyoG_nextButton{color:#fff;text-align:center;z-index:2147483448;justify-content:center;align-items:center;margin:20px 20px 0 0;padding:0;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:12px;line-height:0;display:flex;position:absolute;top:0;right:0}._7pzQ5q_overlayCta{content:"";z-index:2147483347;background:0 0;width:100%;height:100%;position:absolute;top:0;bottom:0;left:0;right:0}._7pzQ5q_hidden{display:none}.poFP6W_overlay{z-index:2147483448;-webkit-backdrop-filter:blur(6px);backdrop-filter:blur(6px);background:linear-gradient(rgba(0,15,35,.59) 0%,rgba(0,15,35,.8) 45%,rgba(0,15,35,.8) 100%);width:100%;height:100%;position:fixed;top:0;left:0}.poFP6W_opaque{background:#000}.poFP6W_lastChanceEndCard{flex-direction:column;justify-content:center;align-items:center;width:100%;height:100%;display:flex;position:absolute;top:0;left:0}.poFP6W_backgroundNone{background:0 0}.poFP6W_name{color:#fff;text-align:center;z-index:2147483447;margin:11px 40px 22px;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:20px;font-weight:700}.poFP6W_icon{z-index:2147483447;border-radius:10px;width:80px;height:80px;display:block}.poFP6W_button{color:#fff;letter-spacing:.9px;z-index:2147483447;background-color:#007aff;border:none;border-radius:50px;padding:7px 18px;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-weight:700;position:relative}.poFP6W_button:focus{outline:none}.poFP6W_button:before,.poFP6W_button:after{content:"";z-index:-1000;background-repeat:no-repeat;width:140%;height:100%;transition:all .5s ease-out;display:block;position:absolute;left:-20%}.poFP6W_button:before{background-image:radial-gradient(circle,#007aff 20%,transparent 20%),radial-gradient(circle,transparent 20%,#007aff 20%,transparent 30%),radial-gradient(circle,#007aff 20%,transparent 20%),radial-gradient(circle,#007aff 20%,transparent 20%),radial-gradient(circle,transparent 10%,#007aff 15%,transparent 20%),radial-gradient(circle,#007aff 20%,transparent 20%),radial-gradient(circle,#007aff 20%,transparent 20%),radial-gradient(circle,#007aff 20%,transparent 20%),radial-gradient(circle,#007aff 20%,transparent 20%);background-size:10% 10%,20% 20%,15% 15%,20% 20%,18% 18%,10% 10%,15% 15%,10% 10%,18% 18%;display:none;top:-75%}.poFP6W_button:after{background-image:radial-gradient(circle,#007aff 20%,transparent 20%),radial-gradient(circle,#007aff 20%,transparent 20%),radial-gradient(circle,transparent 10%,#007aff 15%,transparent 20%),radial-gradient(circle,#007aff 20%,transparent 20%),radial-gradient(circle,#007aff 20%,transparent 20%),radial-gradient(circle,#007aff 20%,transparent 20%),radial-gradient(circle,#007aff 20%,transparent 20%);background-size:15% 15%,20% 20%,18% 18%,20% 20%,15% 15%,10% 10%,20% 20%;display:none;bottom:-75%}.poFP6W_button.poFP6W_animate:before{animation:2s infinite forwards poFP6W_topBubbles;display:block}.poFP6W_button.poFP6W_animate:after{animation:2.3s infinite forwards poFP6W_bottomBubbles;display:block}@keyframes poFP6W_topBubbles{0%{background-position:5% 90%,10% 90%,10% 90%,15% 90%,25% 90%,25% 90%,40% 90%,55% 90%,70% 90%}50%{background-position:0 80%,0 20%,10% 40%,20% 0,30% 30%,22%,50%,65% 20%,90% 30%}to{background-position:0 70%,0 10%,10% 30%,20% -10%,30% 20%,22% 40%,50% 40%,65% 10%,90% 20%;background-size:0 0,0 0,0 0,0 0,0 0,0 0}}@keyframes poFP6W_bottomBubbles{0%{background-position:10% -10%,30% 10%,55% -10%,70% -10%,85% -10%,70% -10%,70% 0}50%{background-position:0 80%,20% 80%,45% 60%,60% 100%,75% 70%,95% 60%,105% 0}to{background-position:0 90%,20% 90%,45% 70%,60% 110%,75% 80%,95% 70%,110% 10%;background-size:0 0,0 0,0 0,0 0,0 0,0 0}}.J2DrKG_staticImageEndcard{justify-content:center;align-items:center;width:100vw;height:100vh;display:flex}.J2DrKG_staticImageEndcard img{max-height:100%;margin:0 auto}.S2LOeW_icon{font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif}.S2LOeW_muted{z-index:2147483447;padding:10px 30px 30px 10px;position:absolute;top:0;left:0}.S2LOeW_muted span{background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='500px' height='500px' %3E%3Ccircle opacity='0.8' cx='249.9' cy='249.9' r='247'/%3E%3Cpath fill='%23fff' d='M418.9 195.8c-3.2-3.2-8.2-3.2-11.4 0l-45.6 45.6-45.6-45.6c-3.2-3.2-8.2-3.2-11.4 0-3.2 3.2-3.2 8.2 0 11.4l45.6 45.6-45.6 45.6c-3.2 3.2-3.2 8.2 0 11.4 1.8 1.8 4.1 2.3 5.9 2.3s4.1-.9 5.9-2.3l45.6-45.6 45.6 45.6c1.8 1.8 4.1 2.3 5.9 2.3s4.1-.9 5.9-2.3c3.2-3.2 3.2-8.2 0-11.4l-45.6-45.6 45.6-45.6c2.9-2.3 2.9-8.2-.8-11.4zM268.2 89.2c-2.3-1.7-6.8-.9-9.1.9l-106.7 79.5H95.2c-5 0-8.2 2.9-8.2 7.6v144c0 4.6 3.2 7.6 8.2 7.6h57.2l106.7 80c1.8.9 3.2 1.7 5 1.7.9 0 2.3 0 3.2-.9 2.3-1.7 5-3.8 5-6.8V95.5c.9-1.7-.9-4.6-4.1-6.3zM148.2 314h-44.8V186.1h44.8V314zm108.5 72.9l-92.1-69v-136l91.7-69v274h.4z'/%3E%3Cpath display='none' d='M268.5 89c-2.3-1.7-6.8-.9-9.2.9l-107 79.9H94.9c-5 0-8.2 3-8.2 7.7V322c0 4.6 3.2 7.7 8.2 7.7h57.4L259.4 410c1.8.9 3.2 1.7 5 1.7.9 0 2.3 0 3.2-.9 2.3-1.7 5-3.8 5-6.8V95.3c1-1.7-.8-4.6-4.1-6.3zM148.2 314.6h-44.9V186.2h44.9v128.4zm108.9 73.1l-92.4-69.3V182l92-69.2v274.9h.4zm149-127.2h-90.5c-4.2 0-7.7-3.5-7.7-7.9s3.4-7.9 7.7-7.9h90.5c4.2 0 7.7 3.5 7.7 7.9s-3.4 7.9-7.7 7.9zm.9-94.6l-88.6 37.6c-3.9 1.6-8.4-.3-10-4.3-1.6-4 .3-8.6 4.1-10.2l88.6-37.6c3.9-1.6 8.4.3 10 4.3 1.6 3.9-.2 8.6-4.1 10.2zm4.7 182.9c-1.6 4-6.1 5.9-10 4.3l-88.6-37.6c-3.9-1.6-5.8-6.2-4.1-10.2 1.6-4 6.1-5.9 10-4.3l88.6 37.6c3.9 1.6 5.8 6.2 4.1 10.2z'/%3E%3C/svg%3E");background-size:100%;width:22px;height:22px;display:block}.S2LOeW_unmuted{z-index:2147483447;padding:10px 30px 30px 10px;position:absolute;top:0;left:0}.S2LOeW_unmuted span{background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='500px' height='500px' %3E%3Ccircle opacity='0.8' cx='249.9' cy='249.9' r='247'/%3E%3Cpath display='none' fill='%23fff' d='M418.9 195.8c-3.2-3.2-8.2-3.2-11.4 0l-45.6 45.6-45.6-45.6c-3.2-3.2-8.2-3.2-11.4 0-3.2 3.2-3.2 8.2 0 11.4l45.6 45.6-45.6 45.6c-3.2 3.2-3.2 8.2 0 11.4 1.8 1.8 4.1 2.3 5.9 2.3s4.1-.9 5.9-2.3l45.6-45.6 45.6 45.6c1.8 1.8 4.1 2.3 5.9 2.3s4.1-.9 5.9-2.3c3.2-3.2 3.2-8.2 0-11.4l-45.6-45.6 45.6-45.6c2.9-2.3 2.9-8.2-.8-11.4zM268.2 89.2c-2.3-1.7-6.8-.9-9.1.9l-106.7 79.5H95.2c-5 0-8.2 2.9-8.2 7.6v144c0 4.6 3.2 7.6 8.2 7.6h57.2l106.7 80c1.8.9 3.2 1.7 5 1.7.9 0 2.3 0 3.2-.9 2.3-1.7 5-3.8 5-6.8V95.5c.9-1.7-.9-4.6-4.1-6.3zM148.2 314h-44.8V186.1h44.8V314zm108.5 72.9l-92.1-69v-136l91.7-69v274h.4z'/%3E%3Cpath fill='%23fff' d='M268.5 89c-2.3-1.7-6.8-.9-9.2.9l-107 79.9H94.9c-5 0-8.2 3-8.2 7.7V322c0 4.6 3.2 7.7 8.2 7.7h57.4L259.4 410c1.8.9 3.2 1.7 5 1.7.9 0 2.3 0 3.2-.9 2.3-1.7 5-3.8 5-6.8V95.3c1-1.7-.8-4.6-4.1-6.3zM148.2 314.6h-44.9V186.2h44.9v128.4zm108.9 73.1l-92.4-69.3V182l92-69.2v274.9h.4zm149-127.2h-90.5c-4.2 0-7.7-3.5-7.7-7.9s3.4-7.9 7.7-7.9h90.5c4.2 0 7.7 3.5 7.7 7.9s-3.4 7.9-7.7 7.9zm.9-94.6l-88.6 37.6c-3.9 1.6-8.4-.3-10-4.3-1.6-4 .3-8.6 4.1-10.2l88.6-37.6c3.9-1.6 8.4.3 10 4.3 1.6 3.9-.2 8.6-4.1 10.2zm4.7 182.9c-1.6 4-6.1 5.9-10 4.3l-88.6-37.6c-3.9-1.6-5.8-6.2-4.1-10.2 1.6-4 6.1-5.9 10-4.3l88.6 37.6c3.9 1.6 5.8 6.2 4.1 10.2z'/%3E%3C/svg%3E");background-size:100%;width:22px;height:22px;display:block}.OaF7uW_videoProgress{z-index:2147483447;background:rgba(0,0,0,.2);width:100%;height:.1875rem;position:absolute;bottom:0;left:0;right:0;overflow:hidden}.OaF7uW_videoProgress span{width:0%;height:100%;animation-name:OaF7uW_progress-animation;animation-timing-function:cubic-bezier(0,.79,.5,1);animation-iteration-count:infinite;animation-delay:1ms;animation-fill-mode:forwards;position:absolute;top:0;left:0}.OaF7uW_videoProgress span.OaF7uW_paused{animation-play-state:paused}@keyframes OaF7uW_progress-animation{0%{width:20%}to{width:100%}}.ok_seq_videoPlayerWrap{justify-content:center;align-items:center;width:100%;height:100%;display:flex;position:absolute}.ok_seq_videoPlayer,.ok_seq_videoPlayer video{width:100%;height:100%}.RypQCq_videoBlurWrap{justify-content:center;align-items:center;width:100%;height:100%;display:flex;position:absolute;overflow:hidden}.RypQCq_videoBlurWrap>canvas{filter:blur(6px)brightness(.25);width:100%;height:100%}.dDtiqq_tapToPlayMask{z-index:2147483547;background-color:rgba(0,0,0,.6);position:fixed;top:0;bottom:0;left:0;right:0}.dDtiqq_tapToPlayContainer{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.dDtiqq_tapToPlayIcon{filter:invert();background-image:url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2224%22%20height%3D%2224%22%3E%3Cpath%20d%3D%22M9%2011.24V7.5a2.5%202.5%200%200%201%205%200v3.74c1.21-.81%202-2.18%202-3.74C16%205.01%2013.99%203%2011.5%203S7%205.01%207%207.5c0%201.56.79%202.93%202%203.74m9.84%204.63-4.54-2.26c-.17-.07-.35-.11-.54-.11H13v-6c0-.83-.67-1.5-1.5-1.5S10%206.67%2010%207.5v10.74l-3.43-.72c-.08-.01-.15-.03-.24-.03-.31%200-.59.13-.79.33l-.79.8%204.94%204.94c.27.27.65.44%201.06.44h6.79c.75%200%201.33-.55%201.44-1.28l.75-5.27c.01-.07.02-.14.02-.2%200-.62-.38-1.16-.91-1.38%22%2F%3E%3C%2Fsvg%3E);background-position:50%;background-repeat:no-repeat;background-size:100%;width:50px;max-width:120px;max-height:120px;margin:0 auto}@media screen and (min-width:320px){.dDtiqq_tapToPlayIcon{width:calc(7.95455vw + 24.5455px)}}@media screen and (min-width:1200px){.dDtiqq_tapToPlayIcon{width:120px}}.dDtiqq_tapToPlayIcon{height:50px}@media screen and (min-width:320px){.dDtiqq_tapToPlayIcon{height:calc(7.95455vw + 24.5455px)}}@media screen and (min-width:1200px){.dDtiqq_tapToPlayIcon{height:120px}}.dDtiqq_tapToPlayText{color:#fff;text-align:center;margin:.3em 0;font-size:15px;font-weight:400}@media screen and (min-width:320px){.dDtiqq_tapToPlayText{font-size:calc(1.13636vw + 11.3636px)}}@media screen and (min-width:1200px){.dDtiqq_tapToPlayText{font-size:25px}}.closeIcon{background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='525.4px' height='525.5px'%3E%3Cpolygon fill='%23ffffff' stroke='%23000000' stroke-width='26' stroke-miterlimit='10' points='452.6,8.9 262.9,198.6 73.1,8.9 9,73 198.8,262.7 9,452 73.1,516.1 262.9,326.8 452.6,516.1 516.7,452 326.9,262.7 516.7,73'%3E%3C/polygon%3E%3C/svg%3E");background-position:50%;background-repeat:no-repeat;background-size:100%;width:18px;height:18px;display:inline-block}.Zz6y0G_download{z-index:2147483447;float:right;cursor:pointer;width:50px;height:50px;padding:20px 10px 10px 20px;line-height:1em;position:fixed;bottom:4px;right:0}.Zz6y0G_download .Zz6y0G_downloadIcon{cursor:pointer;background-image:url("data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20width='48px'%20height='48px'%20%3E%3Cpath%20fill='white'%20d='M11%2040q-1.2%200-2.1-.9Q8%2038.2%208%2037v-7.15h3V37h26v-7.15h3V37q0%201.2-.9%202.1-.9.9-2.1.9Zm13-7.65-9.65-9.65%202.15-2.15%206%206V8h3v18.55l6-6%202.15%202.15Z'/%3E%3C/svg%3E");background-repeat:no-repeat;background-size:23px;width:19px;height:19px;display:inline-block;bottom:10px}@media only screen and (max-height:249px){.Zz6y0G_download{display:none}}.UUyEIq_persistentSimpleCta{z-index:2147483446;background:rgba(0,0,0,.5);border-radius:8px 0 0 8px;padding:8px;transition:transform .5s ease-in-out;display:flex;position:absolute;bottom:8px;right:0;transform:translate(100%)}@media screen and (min-width:768px) and (min-height:450px){.UUyEIq_persistentSimpleCta{padding:12px}}@media screen and (min-width:1024px) and (min-height:301px){.UUyEIq_persistentSimpleCta{background:linear-gradient(transparent 0%,rgba(0,0,0,.8) 80%);justify-content:center;align-items:center;width:100%;padding:25px;bottom:0}}@media screen and (max-width:302px),screen and (max-height:300px){.UUyEIq_persistentSimpleCta{border-radius:4px 0 0 4px;padding:4px}}.UUyEIq_slideIn{transform:translate(0)}@media screen and (min-width:1024px) and (min-height:301px){.UUyEIq_slideIn{left:50%;transform:translate(-50%)}}.UUyEIq_appIcon{cursor:pointer;border-radius:8px;width:52px;height:52px;left:0}@media screen and (min-width:768px) and (min-height:450px){.UUyEIq_appIcon{width:70px;height:70px}}@media screen and (min-width:1024px) and (min-height:301px){.UUyEIq_appIcon{width:100px;height:100px}}@media screen and (max-width:302px),screen and (max-height:300px){.UUyEIq_appIcon{border-radius:4px;width:26px;height:26px}}.UUyEIq_persistentSimpleCtaBtn{cursor:pointer;text-align:center;color:#fff;white-space:nowrap;background-color:#179e2d;border:none;border-radius:8px;min-width:99px;height:52px;padding:0 10px;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:21px;font-weight:400}@media screen and (min-width:768px) and (min-height:450px){.UUyEIq_persistentSimpleCtaBtn{height:70px;font-size:30px}}@media screen and (min-width:1024px) and (min-height:301px){.UUyEIq_persistentSimpleCtaBtn{min-width:200px;height:70px;font-size:30px}}@media screen and (max-width:302px),screen and (max-height:300px){.UUyEIq_persistentSimpleCtaBtn{border-radius:4px;min-width:80px;height:26px;font-size:14px}}.UUyEIq_appIcon~.UUyEIq_persistentSimpleCtaBtn{margin-left:8px}@media screen and (min-width:768px) and (min-height:450px){.UUyEIq_appIcon~.UUyEIq_persistentSimpleCtaBtn{margin-left:12px}}@media screen and (min-width:1024px) and (min-height:301px){.UUyEIq_appIcon~.UUyEIq_persistentSimpleCtaBtn{margin-left:0}}@media screen and (max-width:302px),screen and (max-height:300px){.UUyEIq_appIcon~.UUyEIq_persistentSimpleCtaBtn{margin-left:4px}}.UUyEIq_appDetail{color:#fff;min-width:40%;padding:10px 50px;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-weight:400;display:none}.UUyEIq_appDetail h1{white-space:nowrap;text-overflow:ellipsis;cursor:pointer;width:100%;margin:0;font-size:34px;line-height:40px;overflow:hidden}.UUyEIq_appDetail h2{white-space:nowrap;text-overflow:ellipsis;cursor:pointer;width:100%;margin:0;font-size:20px;line-height:30px;overflow:hidden}@media screen and (min-width:1024px) and (min-height:301px){.UUyEIq_appDetail{flex-direction:column;align-items:flex-start;display:flex}}.DwKKSa_persistentRichCta{z-index:2147483348;background:#333;align-items:center;width:100%;height:120px;padding:10px;display:flex;position:absolute;top:0;left:0}.DwKKSa_persistentRichCta .DwKKSa_appIcon{cursor:pointer;border-radius:10px;width:90px;height:90px;display:block}.DwKKSa_persistentRichCta .DwKKSa_appInfo{flex-direction:column;flex:1;justify-content:space-around;height:100px;padding:0 15px;display:flex;overflow:hidden}.DwKKSa_persistentRichCta .DwKKSa_appInfo h1{color:#fff;white-space:nowrap;text-overflow:ellipsis;cursor:pointer;width:90%;margin:0;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:17px;font-weight:600;overflow:hidden}.DwKKSa_persistentRichCta .DwKKSa_appInfo p{color:#fff;white-space:nowrap;text-overflow:ellipsis;margin:0;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:14px;font-weight:600;overflow:hidden}.DwKKSa_persistentRichCta .DwKKSa_persistentRichCtaBtn{cursor:pointer;text-align:center;color:#fff;white-space:nowrap;background:#179e2d;border:none;border-radius:24px;width:100%;height:36px;padding:8px 0;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:16px;font-weight:600;box-shadow:0 4px 4px rgba(0,0,0,.25)}.dalDea_persistentRichCtaScreenshots{z-index:2147483348;white-space:nowrap;background:#333;width:100%;min-height:190px;padding:17px 0;position:absolute;bottom:0;left:0;overflow-x:scroll;overflow-y:hidden;box-shadow:inset 0 3px 7px 2px rgba(0,0,0,.4)}.dalDea_persistentRichCtaScreenshots .dalDea_slide{height:100%;margin-left:.75em;display:inline-block}.dalDea_persistentRichCtaScreenshots img{cursor:pointer;object-fit:cover;border-radius:.75em;height:100%}.W6zMza_dialogBox{visibility:hidden;text-align:center;color:#565656;z-index:2147483647;background-color:rgba(0,0,0,.8);width:100%;height:100%;position:absolute;top:0;left:0}.W6zMza_dialog{text-align:center;width:288px;margin-top:0;padding:0;position:fixed;top:50%;left:50%;transform:translate(-50%,-50%)}@media only screen and (max-height:20em){.W6zMza_dialog{width:200px}}.W6zMza_dialogContent{border-top-width:7px;border-top-color:#555fff;border-radius:15px;width:100%;position:relative;overflow:hidden}.W6zMza_dialogTitle{color:#fff;background-color:#555fff;padding:8px;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:16px;font-weight:600}@media only screen and (max-height:20em){.W6zMza_dialogTitle{font-size:1em}}.W6zMza_dialogBody{background-color:#fff;padding:0;overflow:hidden}.W6zMza_dialogText{text-align:center;margin:0 auto;padding:18px 15px;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:14px;font-weight:400;line-height:1.35em}@media only screen and (max-height:20em){.W6zMza_dialogText{padding:10px;font-size:.8em;line-height:1.25}}.W6zMza_dialogActions{background-color:#fff;width:100%;padding:0}.W6zMza_dialogActions button{text-align:center;background:0 0;border:none;width:100%;padding:8px;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:14px;font-weight:400;text-decoration:none}@media only screen and (max-height:20em){.W6zMza_dialogActions button{font-size:.75rem}}@media screen and (orientation:landscape){.W6zMza_dialogActions{display:flex}}.eDiOmG_primaryButton{color:#fff;background-color:#555fff;padding:0}.eDiOmG_primaryButton button{text-transform:uppercase;color:#fff}@media screen and (orientation:landscape){.eDiOmG_primaryButton{flex:1}}.eDiOmG_secondaryButton{color:#555fff;background-color:#fff;padding:0}.eDiOmG_secondaryButton button{color:#555fff}@media screen and (orientation:landscape){.eDiOmG_secondaryButton{flex:1}}.eDiOmG_primaryButton button{justify-content:center;align-items:center;display:flex}.eDiOmG_continueIcon{background:url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2236%22%20height%3D%2246%22%20style%3D%22shape-rendering%3AgeometricPrecision%3Btext-rendering%3AgeometricPrecision%3Bimage-rendering%3AoptimizeQuality%3Bfill-rule%3Aevenodd%3Bclip-rule%3Aevenodd%22%3E%3Cpath%20fill%3D%22%23fefffe%22%20d%3D%22M35.5%2014.5v7q-5.098%2016.59-23%2015.5%204.538%203.446%202%208.5h-5Q5%2040-.5%2035.5v-5a133%20133%200%200%200%2010-9.5q7.75-2.25%205.5%205.5L12.5%2029q12.955%202.295%2016-10.5Q26.88%207.195%2015.5%207q-3.152-2.6-1-6%2016.18-2.067%2021%2013.5%22%20style%3D%22opacity%3A.849%22%2F%3E%3C%2Fsvg%3E) 50%/contain no-repeat;width:12px;height:12px;margin-left:6px;display:inline-block}.oAV7cW_endcardIframe{border:0;width:100%;height:100%;position:absolute;top:0;left:0}.oAV7cW_endcard{text-align:center;width:100vw;height:100vh;position:relative}._37VDnG_composite{width:100vw;height:100vh}._37VDnG_component{width:100%;height:100%;position:relative}._37VDnG_compositeImage{background-position:50%;background-repeat:no-repeat;background-size:contain;justify-content:center;align-items:center;width:100%;height:100%;display:flex}._37VDnG_compositeImage img{display:none}._37VDnG_compositeHtml{width:100%;height:100%}@keyframes i0Mp0G_shrinkToTopLeft{0%{transform:translate(0)scale(1)}to{transform-origin:0 0;transform:translate(10px,10px)scale(.3)}}.i0Mp0G_pictureInPictureContainer{z-index:2147483548;box-sizing:border-box;width:100%;height:100%;margin:0;padding:0;display:block;position:fixed;top:0;left:0}.i0Mp0G_pictureInPictureContainer.i0Mp0G_animationEnded{transform-origin:0 0;transition:transform 1s ease-in-out;transform:translate(10px,10px)scale(.3)}.i0Mp0G_pictureInPictureContainer.i0Mp0G_animatingVideo{animation:.5s ease-in-out forwards i0Mp0G_shrinkToTopLeft}.i0Mp0G_pictureInPictureContainer.i0Mp0G_slideUp{transform:translateY(-100%)scale(.3)}.i0Mp0G_pictureInPictureContainer.i0Mp0G_slideLeft{transform:translate(-100%)scale(.3)}#gRz7DW_ad{width:100%;height:100%}</style><script type="module">window.appVersion="5.87.0";</script><script type="module">window.Hls={isSupported:()=>!1,DefaultConfig:{loader:class{constructor(){}}}};</script><script src="mraid.js"></script><script type="module">function n(r,e){var t=p();return(n=function(r,e){return t[r-=143]})(r,e)}for(var r=n,t=p,e=n,s=t();;)try{if(parseInt(e(154))/1*(parseInt(e(158))/2)+-parseInt(e(159))/3*(-parseInt(e(150))/4)+parseInt(e(147))/5+parseInt(e(157))/6*(-parseInt(e(155))/7)+parseInt(e(160))/8+parseInt(e(146))/9*(-parseInt(e(149))/10)+parseInt(e(145))/11*(-parseInt(e(152))/12)==159889)break;s.push(s.shift())}catch(n){s.push(s.shift())}function p(){var r=["undefined","303444inYQJd",'ipt src="replacements.js"></sc',"7213chHhdp","7mBWnvg","<scr","897366rgVoCQ","44iJuGgH","41079UpxDFu","2247664yxnDpZ","write","mraidExt","ript>","77OMQXem","584010DyCTIj","421595CqDrDG",'ipt src="vungle_mraid.js"></sc',"10njnkdM","8TySzmr"];return(p=function(){return r})()}("undefined"==typeof vungle||typeof vungle[r(143)]===r(151))&&(document[r(161)](r(156)+r(148)+r(144)),document.write(r(156)+'ipt src="tokenmap.js"><\/script>'),document[r(161)](r(156)+r(153)+r(144)));</script><script type="module">for(var e=r,n=s,t=r,o=n();;)try{if(parseInt(t(239))/1*(parseInt(t(234))/2)+parseInt(t(250))/3+parseInt(t(246))/4+parseInt(t(249))/5+-parseInt(t(255))/6+-parseInt(t(251))/7+parseInt(t(247))/8==119630)break;o.push(o.shift())}catch(e){o.push(o.shift())}function s(){var e=["233320xaKEXL","1519032JREVyj","notifyPropertiesChange","10490PSChOO","270063ynCtMs","295981bVKbOX","Accept","hasOwnProperty","vungle","1263420fuAVmE","consentDenyButtonText","118nnSbiu","notifyReadyEvent","INCENTIVIZED","mraidBridge","consentTitleText","545USnEPa","osVersion","consentBodyText","1.0","fullscreen","forEach","keys"];return(s=function(){return e})()}function r(e,n){var t=s();return(r=function(e,n){return t[e-=234]})(e,n)}if("function"==typeof getVungleReplacementTokens){var i,T={OS:"os",OS_VERSION:e(240),SDK_VERSION:"sdkVersion",CONSENT_TITLE_TEXT:e(238),CONSENT_BODY_TEXT:e(241),CONSENT_ACCEPT_BUTTON_TEXT:"consentAcceptButtonText",CONSENT_DENY_BUTTON_TEXT:e(256)},a=getVungleReplacementTokens(),c=(i={},Object[e(245)](a).forEach((function(e){i[vungleTokenMap[e]]=a[e]})),i);window[e(254)][e(237)][e(235)](c);let n={isViewable:!0,placementType:e(243),version:e(242),consentAcceptButtonText:e(252),consentDenyButtonText:"Deny",consentBodyText:"Ads are personalized. Denying would disable it",consentTitleText:"Personalized Ads",supports:{sms:!1,storePicture:!1,inlineVideo:!1,calendar:!1,tel:!1},incentivized:c[e(253)]("INCENTIVIZED")&&"true"===c[e(236)].toLowerCase()};Object[e(245)](T)[e(244)]((function(t){c[e(253)](t)&&(n[T[t]]=c[t])})),window[e(254)][e(237)][e(248)](n)}</script></head><body>  <div id="dynamic"></div> <script type="module">let e,t,n;var i,r,a,s,o,l,c,d,u,E,_,v,h,S,T,p,g,C,I,A,O,m,f,N,D,R,y,L,P,b,w,M,V,k,U,B,H,W,x,F,K,G,Y,j,X,z,$,q,Z,Q,J,ee,et,en,ei,er,ea,es,eo,el,ec,ed,eu,eE,e_,ev,eh,eS,eT,ep,eg,eC,eI,eA,eO,em,ef,eN,eD,eR,ey,eL,eP,eb,ew,eM,eV,ek,eU,eB,eH,eW,ex,eF,eK,eG,eY=class extends Error{};class ej{static getInstance(e){return this.instance||(this.instance=new ej(e)),this.instance}bind(e,t){return this.bindings.set(e,t),this}get(e){if(!this.bindings.has(e))throw new eY(`Could not find anything for key ${e}`);return this.bindings.get(e)}has(e){return this.bindings.has(e)}reset(){this.bindings.clear()}constructor(e=Date.now()){this.startTimestamp=e,this.bindings=new Map}}var eX=ej,ez=class{},e$=class extends ez{get(e){return this.replacementTokens[e]}has(...e){return e.every((e=>e in this.replacementTokens))}some(...e){return e.some((e=>e in this.replacementTokens))}static getServiceIdentifier(){return"TokenServiceInterface"}getSeriesValues(e){var t,n,i,r;let a=this.getSeriesTokens(e),s=null!=(r=null==(i=window.vungle)||null==(n=i.mraidBridgeExt)||null==(t=n.getReplacementTokens)?void 0:t.call(n))?r:{};return a.map((e=>s[e]))}getSeriesTokens(e){var t,n,i,r;let a=[],s=null!=(r=null==(i=window.vungle)||null==(n=i.mraidBridgeExt)||null==(t=n.getReplacementTokens)?void 0:t.call(n))?r:{},o=[];return Object.keys(s).filter((t=>t.startsWith(e))).forEach((t=>{let n=t.replace(e,"");/^\d+$/.test(n)?o.push(parseInt(n,10)):a.push(t)})),0===o.length||(o.sort(((e,t)=>e-t)),o.forEach((t=>a.push(`${e}${t}`)))),a}constructor(e){super(),this.replacementTokens=null!=e?e:{}}},eq=(e,t="default")=>{let n=e=>e.filter((e=>void 0!==e)).flat();return{info:(i,...r)=>{let a=n([t,i,...r]);e.addToActivity({type:"log",level:"info",prefix:t,message:i,optionalParams:r}),console.info(...a)},warn:(i,...r)=>{let a=n([t,i,...r]);e.addToActivity({type:"log",level:"warn",prefix:t,message:i,optionalParams:r}),console.warn(...a)},error:(i,...r)=>{let a=n([t,i,...r]);e.addToActivity({type:"log",level:"error",prefix:t,message:i,optionalParams:r}),console.error(...a)}}},eZ=class extends ez{getLogger(e="default"){return null==this.loggers[e]&&(this.loggers[e]=eq(this,e)),this.loggers[e]}emit(e){e.fireOnlyOnce&&this.hasExistingEvent(e)||(this.addToActivity({type:"event",eventType:e.type,name:e.event,data:e.data}),this.invokeEventHandlers(e))}invokeEventHandlers(e){[...this.eventHandlers[e.type]||[],...this.eventHandlers["*"]||[]].forEach((t=>t(this,e)))}addToActivity(e){this.activity.push({activity:e,timestamp:Date.now()})}getActivity(e){return e?this.activity.filter((t=>t.activity.type===e)):this.activity}getActivityEvents(){return this.activity.filter((e=>"event"===e.activity.type))}getActivityLogs(){return this.activity.filter((e=>"log"===e.activity.type))}getActivityEventPairs(e,t,n){let i=this.getActivityEvents().filter((t=>t.activity.eventType===e)),r=[],a=null;return i.forEach((e=>{let i=e.activity;i.name===t?a=e:i.name===n&&a&&(r.push([a,e]),a=null)})),r}clearActivity(){this.activity.length=0}addEventHandler(e,t){this.eventHandlers[e]=this.eventHandlers[e]||[],this.eventHandlers[e].push(t)}removeEventHandler(e,t){null!=this.eventHandlers[e]&&(this.eventHandlers[e]=this.eventHandlers[e].filter((e=>e!==t)))}getEventHandlers(e){return this.eventHandlers[e]||[]}static getServiceIdentifier(){return"ReportingServiceInterface"}constructor(...e){super(...e),this.loggers={},this.eventHandlers={},this.activity=[],this.hasExistingEvent=e=>this.activity.some((t=>"event"===t.activity.type&&t.activity.eventType===e.type&&t.activity.name===e.event))}};function eQ(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function eJ(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){eQ(e,t,n[t])}))}return e}var e0=((tF={})[tF.NotStarted=0]="NotStarted",tF[tF.Running=1]="Running",tF[tF.Stopped=2]="Stopped",tF);const e1={type:"xstate.init"},e2="xstate.assign";function e3(e){return void 0===e?[]:[].concat(e)}function e5(e,t){return"string"==typeof(e="string"==typeof e&&t&&t[e]?t[e]:e)?{type:e}:"function"==typeof e?{type:e.name,exec:e}:e}function e4(e){return t=>e===t}function e6(e){return"string"==typeof e?{type:e}:e}function e8(e,t,n){let i=t,r=!1;return[e.filter((e=>{if(e.type===e2){r=!0;let t=eJ({},i);return"function"==typeof e.assignment?t=e.assignment(i,n):Object.keys(e.assignment).forEach((r=>{t[r]="function"==typeof e.assignment[r]?e.assignment[r](i,n):e.assignment[r]})),i=t,!1}return!0})),i,r]}const e7=(e,t)=>e.actions.forEach((({exec:n})=>n&&n(e.context,t)));function e9(e){return{type:e2,assignment:e}}var te=class extends ez{createMachine(e,t){if(!(null==e?void 0:e.id))throw Error("State machine identifier is missing.");this.machineMap.has(e.id)||this.machineMap.set(e.id,{config:e,options:t,machine:function(e,t={}){let[n,i]=e8(e3(e.states[e.initial].entry).map((e=>e5(e,t.actions))),e.context,e1),r={config:e,_options:t,initialState:{value:e.initial,actions:n,context:i,matches:e4(e.initial)},transition:(t,n)=>{let{value:i,context:a}="string"==typeof t?{value:t,context:e.context}:t,s=e6(n),o=e.states[i];if(o.on){let t=e3(o.on[s.type]);for(let n of("*"in o.on&&t.push(...e3(o.on["*"])),t)){if(void 0===n)break;let{target:t,actions:l=[],cond:c=()=>!0}="string"==typeof n?{target:n}:n,d=void 0===t,u=null!=t?t:i,E=e.states[u];if(c(a,s)){let[e,n,c]=e8((d?e3(l):[].concat(o.exit,l,E.entry).filter((e=>e))).map((e=>e5(e,r._options.actions))),a,s),u=null!=t?t:i;return{value:u,context:n,actions:e,changed:t!==i||e.length>0||c,matches:e4(u)}}}}return{value:i,context:a,actions:[],changed:!1,matches:e4(i)}}};return r}(e,t)});let n=this.machineMap.get(e.id);return null==n?void 0:n.machine}interpret(e){var t;if(!(null==e||null==(t=e.config)?void 0:t.id))throw Error("State machine is malformed.");return this.interpreterMap.has(e.config.id)||this.interpreterMap.set(e.config.id,function(e){let t=e.initialState,n=e0.NotStarted,i=new Set,r={_machine:e,send:r=>{n===e0.Running&&(e7(t=e.transition(t,r),e6(r)),i.forEach((e=>e(t))))},subscribe:e=>(i.add(e),e(t),{unsubscribe:()=>i.delete(e)}),start:i=>{if(i){let n="object"==typeof i?i:{context:e.config.context,value:i};t={value:n.value,actions:[],context:n.context,matches:e4(n.value)}}else t=e.initialState;return n=e0.Running,e7(t,e1),r},stop:()=>(n=e0.Stopped,i.clear(),r),get state(){return t},get status(){return n}};return r}(e)),this.interpreterMap.get(e.config.id)}clear(e){e?(this.machineMap.delete(e),this.interpreterMap.delete(e)):(this.machineMap.clear(),this.interpreterMap.clear())}static getServiceIdentifier(){return"StateMachineServiceInterface"}constructor(){super(),this.machineMap=new Map,this.interpreterMap=new Map}};function tt(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t.push.apply(t,n)}return t}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}var tn=()=>"m56a51175c",ti=((tK={}).LOADING="loading",tK.DEFAULT="default",tK.EXPANDED="expanded",tK.RESIZED="resized",tK.HIDDEN="hidden",tK),tr=(e=tn())=>{var t,n,i,r,a,s,o,l;let c=null==(t=window[e])?void 0:t.mraid,d=null==(n=window[e])?void 0:n.mraidExt;return!c&&((null==(s=window.vungle)?void 0:s.mraid)?window[e]={mraid:eJ({},window.vungle.mraid)}:window.mraid&&(window[e]={mraid:eJ({},window.mraid)})),!d&&(null==(i=window.vungle)?void 0:i.mraidExt)&&(window[e]=tt(eJ({},window[e]),{mraidExt:eJ({},window.vungle.mraidExt)})),window.mraid&&delete window.mraid,window.vungle&&(window.vungle.mraid&&delete window.vungle.mraid,window.vungle.mraidExt&&(window.vungle.mraidExt={getOS:null==(o=window.vungle.mraidExt)?void 0:o.getOS,getOSVersion:null==(l=window.vungle.mraidExt)?void 0:l.getOSVersion})),{mraid:null==(r=window[e])?void 0:r.mraid,mraidExt:null==(a=window[e])?void 0:a.mraidExt}},ta=class extends ez{init(){let{mraid:e,mraidExt:t}=tr(),{mraidBridge:n,mraidBridgeExt:i}=function(){if(!window.vungle)return{mraidBridge:void 0,mraidBridgeExt:void 0};let{mraidBridge:e,mraidBridgeExt:t}=window.vungle;return{mraidBridge:e,mraidBridgeExt:t}}();this.mraid=e,this.mraidExt=t,this.mraidBridge=n,this.mraidBridgeExt=i,this.initialized=!0}checkInit(){this.initialized||this.init()}static getServiceIdentifier(){return"MraidServiceInterface"}getMraid(){return this.checkInit(),this.mraid}getMraidBridge(){return this.checkInit(),this.mraidBridge}getMraidBridgeExt(){return this.checkInit(),this.mraidBridgeExt}getMraidExt(){return this.checkInit(),this.mraidExt}constructor(){super(),this.initialized=!1,this.init()}},ts=class{clearInterval(){this.id&&(window.clearInterval(this.id),this.id=void 0)}pause(){this.clearInterval()}start(){!this.intervalService.isPaused()&&(void 0!==this.id||this.isDestroyed()||(this.id=window.setInterval((()=>{this.callable()}),this.interval)))}destroy(){this.clearInterval(),this.destroyed=!0}getId(){return this.id}isDestroyed(){return this.destroyed}constructor(e,t,n){this.interval=e,this.callable=t,this.intervalService=n,this.destroyed=!1}},to=class extends ez{getNewInterval(e,t){let n=new ts(e,t,this);return this.intervals.push(n),n}pauseAll(){this.paused=!0,this.intervals.forEach((e=>{e.pause()}))}startAll(){this.paused=!1,this.intervals.forEach((e=>{e.start()}))}destroyAll(){this.intervals.forEach((e=>{e.destroy()})),this.intervals=[]}isPaused(){return this.paused}static getServiceIdentifier(){return"IntervalServiceInterface"}constructor(e=!1){super(),this.paused=e,this.intervals=[]}},tl=class{constructor(e,t){this.delay=e,this.callable=t,this.getId=()=>this.id,this.start=()=>!this.isDestroyed&&void 0===this.id&&(this.id=window.setTimeout((()=>{this.callable&&this.callable(),this.id=void 0,this.remainingTime=this.delay,this.promiseResolve&&this.promiseResolve(),this.destroy()}),this.remainingTime),this.startTime=Date.now(),!0),this.pause=()=>{void 0!==this.id&&void 0!==this.startTime&&(clearTimeout(this.id),this.remainingTime-=Date.now()-this.startTime),this.startTime=void 0,this.id=void 0},this.destroy=()=>{void 0!==this.id&&(clearTimeout(this.id),this.id=void 0),this.isDestroyed=!0,this.promiseReject&&this.promiseReject(!1)},this.asPromise=()=>new Promise(((e,t)=>{this.promiseResolve=e,this.promiseReject=t,this.isDestroyed?t(Error("The timer has been destroyed and cannot be started.")):this.start()})),this.remainingTime=e,this.isDestroyed=!1}},tc=class extends ez{destroyAll(){this.timers.forEach((e=>{e.destroy()}))}getNewTimer(e,t){let n=new tl(e,t);return this.timers.push(n),n}pauseAll(){this.timers.forEach((e=>{e.pause()}))}standby(){0===this.stash.length&&this.timers.forEach((e=>{void 0!==e.getId()&&(e.pause(),this.stash.push(e))}))}wake(){if(0===this.stash.length)return;let e=this.stash.pop();null==e||e.start(),this.wake()}startAll(){this.timers.forEach((e=>{e.start()}))}static getServiceIdentifier(){return"TimerServiceInterface"}constructor(){super(),this.timers=[],this.stash=[]}},td=()=>{let e=eX.getInstance(),t=ta.getServiceIdentifier();return e.get(t)},tu=((tG={}).UNKNOWN="unknown",tG.MREC="mrec",tG.FULLSCREEN="fullscreen",tG.BANNER="banner",tG.IN_LINE="in_line",tG),tE=()=>{let e=eX.getInstance(),t=e$.getServiceIdentifier();return e.get(t)},t_=((tY=t_||{}).ACC_TESTS="ACC_TESTS",tY.ADM_HTML="ADM_HTML",tY.ADVERTISER_DOMAIN="ADVERTISER_DOMAIN",tY.AD_EXPERIENCE="AD_EXPERIENCE",tY.AD_SOURCE="AD_SOURCE",tY.ALT_EC_0="ALT_EC_0",tY.APP_CONTENT_RATING="APP_CONTENT_RATING",tY.APP_DESCRIPTION="APP_DESCRIPTION",tY.APP_DESCRIPTION_ENCODED="APP_DESCRIPTION_ENCODED",tY.APP_DOWNLOAD_COUNT="APP_DOWNLOAD_COUNT",tY.APP_ICON="APP_ICON",tY.APP_INFO_POSITION="APP_INFO_POSITION",tY.APP_LONG_DESCRIPTION="APP_LONG_DESCRIPTION",tY.APP_LONG_DESCRIPTION_ENCODED="APP_LONG_DESCRIPTION_ENCODED",tY.APP_NAME="APP_NAME",tY.APP_NAME_ENCODED="APP_NAME_ENCODED",tY.APP_RATING="APP_RATING",tY.APP_RATING_COUNT="APP_RATING_COUNT",tY.APP_SCREENSHOTS="APP_SCREENSHOTS",tY.APP_STORE_ID="APP_STORE_ID",tY.APP_STORE_ON_ENDCARD_AUTO_DELAY="APP_STORE_ON_ENDCARD_AUTO_DELAY",tY.APP_STORE_ON_ENDCARD_CLOSE="APP_STORE_ON_ENDCARD_CLOSE",tY.APP_STORE_ON_FIRST_TRANSITION="APP_STORE_ON_FIRST_TRANSITION",tY.APP_STORE_ON_SECOND_TRANSITION="APP_STORE_ON_SECOND_TRANSITION",tY.APP_STORE_ON_VIDEO_AUTO_DELAY="APP_STORE_ON_VIDEO_AUTO_DELAY",tY.APP_STORE_ON_VIDEO_CLOSE="APP_STORE_ON_VIDEO_CLOSE",tY.APP_STORE_RATING="APP_STORE_RATING",tY.AUDIO_TRACK_0="AUDIO_TRACK_0",tY.AUDIO_CHUNK_0="AUDIO_CHUNK_0",tY.AUDIO_CHUNK_1="AUDIO_CHUNK_1",tY.BLOCK_PERSISTENT_CTA="BLOCK_PERSISTENT_CTA",tY.CLOSE_BUTTON_DELAY_SECONDS="CLOSE_BUTTON_DELAY_SECONDS",tY.CLOSE_BUTTON_PADDING="CLOSE_BUTTON_PADDING",tY.CLOSE_BUTTON_SIZE="CLOSE_BUTTON_SIZE",tY.COUNTRY_CODE="COUNTRY_CODE",tY.CREATIVE_FORMAT="CREATIVE_FORMAT",tY.CREATIVE_FORMAT_VERSION="CREATIVE_FORMAT_VERSION",tY.CREATIVE_ID="CREATIVE_ID",tY.CREATIVE_TYPE="CREATIVE_TYPE",tY.CTA_BUTTON_BACKGROUND="CTA_BUTTON_BACKGROUND",tY.CTA_BUTTON_ENCODED_TEXT="CTA_BUTTON_ENCODED_TEXT",tY.CTA_BUTTON_ICON="CTA_BUTTON_ICON",tY.CTA_BUTTON_POSITION="CTA_BUTTON_POSITION",tY.CTA_BUTTON_TEXT="CTA_BUTTON_TEXT",tY.CTA_BUTTON_URL="CTA_BUTTON_URL",tY.DOWNLOAD_BUTTON_DELAY_SECONDS="DOWNLOAD_BUTTON_DELAY_SECONDS",tY.DSA_REQUIRED="DSA_REQUIRED",tY.DYNAMIC_AD_OPTIMIZATION="DYNAMIC_AD_OPTIMIZATION",tY.EC_CLOSE_BUTTON_DELAY_SECONDS="EC_CLOSE_BUTTON_DELAY_SECONDS",tY.EC_CTA_URL="EC_CTA_URL",tY.EC_HTML="EC_HTML",tY.EC_HTML_2="EC_HTML_2",tY.EC_HTML_COMPRESS="EC_HTML_COMPRESS",tY.EC_IMAGE="EC_IMAGE",tY.EC_IMAGE_2="EC_IMAGE_2",tY.EC_SKOVERLAY_DELAY_SECONDS="EC_SKOVERLAY_DELAY_SECONDS",tY.EC_SKOVERLAY_DISABLE_AUTO_MMP="EC_SKOVERLAY_DISABLE_AUTO_MMP",tY.ENDCARD_CLOSE_BUTTON_AS_SKIP="ENDCARD_CLOSE_BUTTON_AS_SKIP",tY.ERID_ADVERTISER_INFO="ERID_ADVERTISER_INFO",tY.ERID_ADVERTISER_LINK="ERID_ADVERTISER_LINK",tY.ERID_RECOMMEND_RULE="ERID_RECOMMEND_RULE",tY.FULL_CTA="FULL_CTA",tY.FULL_CTA_OPTION="FULL_CTA_OPTION",tY.HEADER_BIDDING="HEADER_BIDDING",tY.INCENTIVIZED="INCENTIVIZED",tY.INCENTIVIZED_BODY_TEXT="INCENTIVIZED_BODY_TEXT",tY.INCENTIVIZED_CLOSE_BUTTON_DELAY_SECONDS="INCENTIVIZED_CLOSE_BUTTON_DELAY_SECONDS",tY.INCENTIVIZED_CLOSE_TEXT="INCENTIVIZED_CLOSE_TEXT",tY.INCENTIVIZED_CONTINUE_TEXT="INCENTIVIZED_CONTINUE_TEXT",tY.INCENTIVIZED_TITLE_TEXT="INCENTIVIZED_TITLE_TEXT",tY.INIT_STREAM_CHUNK="INIT_STREAM_CHUNK",tY.INIT_AUDIO_CHUNK="INIT_AUDIO_CHUNK",tY.IS_INCENTIVE_TIED_TO_CLOSE_BUTTON_DELAY="IS_INCENTIVE_TIED_TO_CLOSE_BUTTON_DELAY",tY.IS_RUNNING_INSIDE_EMBED="IS_RUNNING_INSIDE_EMBED",tY.IS_STAFF_DEVICE_BID="IS_STAFF_DEVICE_BID",tY.MAIN_MANIFEST="MAIN_MANIFEST",tY.MAIN_STREAM="MAIN_STREAM",tY.MAIN_VIDEO="MAIN_VIDEO",tY.MAX_AD_DURATION="MAX_AD_DURATION",tY.MEDIATION_NAME="MEDIATION_NAME",tY.NAUTILUS_VERSION="NAUTILUS_VERSION",tY.OBSERVABILITY="OBSERVABILITY",tY.OBSERVED_EXPERIMENTS="OBSERVED_EXPERIMENTS",tY.OM_ENABLED="OM_ENABLED",tY.OM_SDK_DATA="OM_SDK_DATA",tY.ORIGINAL_VIDEO_URL="ORIGINAL_VIDEO_URL",tY.PARTIAL_FSC="PARTIAL_FSC",tY.PICTURE_IN_PICTURE="PICTURE_IN_PICTURE",tY.PLACEMENT_TYPE="PLACEMENT_TYPE",tY.PLATFORM="PLATFORM",tY.REAL_START_MUTED="REAL_START_MUTED",tY.SDK_VERSION="SDK_VERSION",tY.SESSION_ID="SESSION_ID",tY.SHOW_EC_CLOSE_BUTTON_COUNTDOWN="SHOW_EC_CLOSE_BUTTON_COUNTDOWN",tY.SHOW_VIDEO_CLOSE_BUTTON_COUNTDOWN="SHOW_VIDEO_CLOSE_BUTTON_COUNTDOWN",tY.SKOVERLAY_AUTO="SKOVERLAY_AUTO",tY.SKOVERLAY_AUTO_CLOSE="SKOVERLAY_AUTO_CLOSE",tY.SKOVERLAY_DELAY_SECONDS="SKOVERLAY_DELAY_SECONDS",tY.SKOVERLAY_DISABLE_AUTO_MMP="SKOVERLAY_DISABLE_AUTO_MMP",tY.SKOVERLAY_DISMISSIBLE="SKOVERLAY_DISMISSIBLE",tY.SKOVERLAY_POSITION="SKOVERLAY_POSITION",tY.SK_CTA_ONLY="SK_CTA_ONLY",tY.SK_EC_CTA_ONLY="SK_EC_CTA_ONLY",tY.SK_FSC="SK_FSC",tY.START_MUTED="START_MUTED",tY.STATIC_EC_CLOSE_BUTTON_DELAY_SECONDS="STATIC_EC_CLOSE_BUTTON_DELAY_SECONDS",tY.STREAM_CHUNK_0="STREAM_CHUNK_0",tY.STREAM_CHUNK_1="STREAM_CHUNK_1",tY.THEATRE_MODE="THEATRE_MODE",tY.TPAT_PROGRESS_EVENTS="TPAT_PROGRESS_EVENTS",tY.TRACK_0="TRACK_0",tY.USER_AGENT="USER_AGENT",tY.VIDEO_CLOSE_BUTTON_AS_SKIP="VIDEO_CLOSE_BUTTON_AS_SKIP",tY.VIDEO_ENDCARD_CLICK_SPLIT="VIDEO_ENDCARD_CLICK_SPLIT",tY.VIDEO_LOOPING="VIDEO_LOOPING",tY.VIDEO_PROGRESS_BAR="VIDEO_PROGRESS_BAR",tY.VIDEO_PROGRESS_BAR_COLOR="VIDEO_PROGRESS_BAR_COLOR",tY.VIDEO_SHOW_CTA="VIDEO_SHOW_CTA",tY.VUNGLE_PRIVACY_URL="VUNGLE_PRIVACY_URL",tY.VX_ENDCARD="VX_ENDCARD",tY.EC_HTML_PRELOAD="EC_HTML_PRELOAD",tY.PUB_ID="PUB_ID",tY.PLACEMENT_ID="PLACEMENT_ID",tY.VIDEO_DURATION="VIDEO_DURATION",tY),tv=((tj=tv||{})[tj.ACCELERATE=0]="ACCELERATE",tj[tj.EDSP=1]="EDSP",tj[tj.UNKNOWN=2]="UNKNOWN",tj),th=e=>{var t;return!!e&&"true"===(null==e||null==(t=e.trim())?void 0:t.toLowerCase())},tS=class extends ez{static getServiceIdentifier(){return"PlacementTypeServiceInterface"}getPlacementType(){var e,t,n;let i=e=>{switch(e){case"banner":return tu.BANNER;case"mrec":return tu.MREC;case"fullscreen":return tu.FULLSCREEN;case"in_line":return tu.IN_LINE;default:return tu.UNKNOWN}},r=i(null!=(t=null==(e=this.mraidService.getMraid())?void 0:e.getPlacementType())?t:"");return r!==tu.UNKNOWN?r:i(null!=(n=this.tokenService.get(t_.PLACEMENT_TYPE))?n:"")}isMrec(){return this.getPlacementType()===tu.MREC}isBanner(){return this.getPlacementType()===tu.BANNER}isFullscreen(){return this.getPlacementType()===tu.FULLSCREEN}isInLine(){return this.getPlacementType()===tu.IN_LINE}isRewarded(){return th(this.tokenService.get(t_.INCENTIVIZED))}getAdSource(){var e;if(!this.tokenService.has(t_.AD_SOURCE)||void 0===this.tokenService.get(t_.AD_SOURCE))return tv.UNKNOWN;switch(null==(e=this.tokenService.get(t_.AD_SOURCE))?void 0:e.toLowerCase()){case"":return tv.UNKNOWN;case"accelerate":return tv.ACCELERATE;default:return tv.EDSP}}constructor(e=tE(),t=td()){super(),this.tokenService=e,this.mraidService=t}},tT=class{isGreaterThan(e){return this.major!==e.major?this.major>e.major:this.minor!==e.minor?this.minor>e.minor:this.patch>e.patch}isLessThan(e){return e.isGreaterThan(this)}isEqualTo(e){return e.major===this.major&&e.minor===this.minor&&e.patch===this.patch}isGreaterThanOrEqualTo(e){return this.isEqualTo(e)||this.isGreaterThan(e)}isLessThanOrEqualTo(e){return this.isEqualTo(e)||this.isLessThan(e)}toString(){return[this.major,this.minor,this.patch].join(".")}constructor(e){if(this.semanticVersion=e,this.major=0,this.minor=0,this.patch=0,!e)return;let[t,n,i]=e.replace(/-.*/,"").replace(/[^\d.]+/g,"").split(".").map((e=>parseInt(e,10)));t&&!Number.isNaN(t)&&(this.major=t),n&&!Number.isNaN(n)&&(this.minor=n),i&&!Number.isNaN(i)&&(this.patch=i)}},tp=e=>decodeURIComponent(Array.prototype.map.call(atob(e),(e=>`%${`00${e.charCodeAt(0).toString(16)}`.slice(-2)}`)).join("")),tg=((tX={}).iOS="iOS",tX.Android="Android",tX.Windows="Windows",tX.Amazon="Amazon",tX.Unknown="Unknown",tX);class tC extends ez{static getServiceIdentifier(){return"EnvironmentServiceInterface"}getOperatingSystem(){var e,t,n,i;if(this.operatingSystem)return this.operatingSystem;let r=null==(n=this.mraidService)||null==(t=n.getMraidExt())||null==(e=t.getOS)?void 0:e.call(t);return r&&(this.operatingSystem=tC.parseOperatingSystem(r),"Unknown"!==this.operatingSystem)||(this.operatingSystem=tC.parseOperatingSystem(null!=(i=this.tokenService.get(t_.PLATFORM))?i:"")),this.operatingSystem}static parseOperatingSystem(e){switch(e.trim().toLowerCase()){case"ios":return"iOS";case"android":return"Android";case"windows":return"Windows";case"amazon":return"Amazon";default:return"Unknown"}}getOsVersion(){var e,t;return this.osVersion||(this.osVersion=new tT(null==(t=this.mraidService.getMraidExt())||null==(e=t.getOSVersion)?void 0:e.call(t))),this.osVersion}getSdkVersion(){var e,t;if(this.sdkVersion)return this.sdkVersion;let n=null==(t=this.mraidService.getMraidExt())||null==(e=t.getSDKVersion)?void 0:e.call(t);return void 0!==n&&"0.0.0"!==n||!this.tokenService.has(t_.SDK_VERSION)?this.sdkVersion=new tT(n):this.sdkVersion=new tT(this.tokenService.get(t_.SDK_VERSION)),this.sdkVersion}getMraidVersion(){var e,t;return this.mraidVersion||(this.mraidVersion=new tT(null==(t=this.mraidService.getMraidExt())||null==(e=t.getMraidVersion)?void 0:e.call(t))),this.mraidVersion}getBrowserVersion(){var e,t,n;return null!=(n=null==(t=this.uaParserResult)||null==(e=t.browser)?void 0:e.version)?n:""}getBrowserName(){var e,t,n;return null!=(n=null==(t=this.uaParserResult)||null==(e=t.browser)?void 0:e.name)?n:""}getDeviceModel(){var e,t,n;return null!=(n=null==(t=this.uaParserResult)||null==(e=t.device)?void 0:e.model)?n:""}getDeviceType(){var e,t,n;return null!=(n=null==(t=this.uaParserResult)||null==(e=t.device)?void 0:e.type)?n:""}getOrientation(){return window.outerHeight<window.outerWidth?"landscape":"portrait"}getDeviceCountryCode(){var e;return null!=(e=this.tokenService.get(t_.COUNTRY_CODE))?e:""}static isAffectedByStoreKitProductViewMaskIssue(e){if("iOS"!==e.getOperatingSystem())return!1;let t=e.getOsVersion();return t.isGreaterThanOrEqualTo(new tT("17"))&&t.isLessThan(new tT("17.1.1"))}constructor(e=tE(),t=td()){super(),this.tokenService=e,this.mraidService=t;let n=e.get(t_.USER_AGENT);if(n)try{this.uaParserResult=JSON.parse(tp(n))}catch(e){}}}tC.sdkSeven=new tT("7");var tI=((tz={}).ERROR="error",tz.EVENT="event",tz),tA=((t$={}).AD_CLOSE="ad-close",t$.AD_FEEDBACK="ad-feedback",t$.AD_LOAD="ad-load",t$.AD_LOAD_COMPLETE="ad-load-complete",t$.AD_START="ad-start",t$.ALTERNATIVE_VIEW="alternative-view",t$.APP_STORE_DURATION="app-store-duration",t$.CLICK_METRICS="click-metrics",t$.CLICK_OCCURRED="click-occurred",t$.CTA="cta",t$.ENGAGEMENT_IS_USED="engagement-is-used",t$.FORFEIT_REWARD="forfeit-reward",t$.FRUSTRATION_CLICKS="frustration-clicks",t$.FSC="fsc",t$.GRANT_REWARD="grant-reward",t$.HLS_LEVEL_SWITCHED="hls-level-switched",t$.HLS_NOT_SUPPORTED="hls-not-supported",t$.HLS_VIDEO_STALLED="hls-video-stalled",t$.IMPRESSION="impression",t$.INACTIVITY_OBSERVED="inactivity-observed",t$.OPEN_STOREKIT_PRODUCT_VIEW_COMMAND="open-storekit-product-view-command",t$.PRIVACY_CTA="privacy-cta",t$.SCENE_END="scene-end",t$.SCENE_START="scene-start",t$.STORE_KIT_OVERLAY="store-kit-overlay",t$.STORE_KIT_OVERLAY_PREPARE_ERROR="store-kit-overlay-prepare-error",t$.TEMPLATE_ERROR="template-error",t$.UNKNOWN_MRAID_COMMAND="unknown-mraid-command",t$.VIDEO_SKIP_TO_ENDCARD="video-skip-to-endcard",t$.VIDEO_START="video-start",t$.WEB_VITALS_FIRST_CONTENTFUL_PAINT="web-vitals-first-contentful-paint",t$.WEB_VITALS_INTERACTION_TO_NEXT_PAINT="web-vitals-interaction-to-next-paint",t$.WEB_VITALS_LARGEST_CONTENTFUL_PAINT="web-vitals-largest-contentful-paint",t$.WEB_VITALS_TIME_TO_FIRST_BYTE="web-vitals-time-to-first-byte",t$),tO=((tq={}).AD_CLOSE="ad-close",tq.AD_FEEDBACK_BROKEN="ad-feedback-broken",tq.AD_FEEDBACK_LOVE="ad-feedback-love",tq.AD_FEEDBACK_OFFENSIVE="ad-feedback-offensive",tq.AD_LOAD="ad-load",tq.AD_LOAD_COMPLETE="ad-load-complete",tq.AD_START="ad-start",tq.AD_START_WITH_ENDCARD="ad-start-with-endcard",tq.AD_START_WITH_LAST_CHANCE_ENDCARD="ad-start-with-last-chance-endcard",tq.AD_START_WITH_VIDEO="ad-start-with-video",tq.ALTERNATIVE_VIEW="alternative-view",tq.APP_STORE_DURATION="app-store-duration",tq.COMPOSITE_SCENE_END="composite-scene-end",tq.CUSTOM_VIDEO_PLAYER="custom-video-player",tq.DOWNLOAD_BUTTON_CTA="download_button_cta",tq.ENDCARD_CTA="endcard_cta",tq.ENDCARD_SCENE_END="endcard-scene-end",tq.ENGAGEMENT_IS_USED="engagement-is-used",tq.ENDCARD_SCENE_START="endcard-scene-start",tq.FRUSTRATION_CLICKS="frustration-clicks",tq.FSC="fsc",tq.GRANT_REWARD="grant-reward",tq.HLS_LEVEL_SWITCHED="hls-level-switched",tq.HLS_NOT_SUPPORTED="hls-not-supported",tq.HLS_VIDEO_STALLED="hls-video-stalled",tq.IMAGE_SCENE_END="image-scene-end",tq.IMPRESSION="impression",tq.INACTIVITY_OBSERVED="inactivity-observed",tq.LAST_CHANCE_ENDCARD_CTA="last_chance_endcard_cta",tq.LAST_CHANCE_ENDCARD_SCENE_START="last-chance-endcard-scene-start",tq.NATIVE_VIDEO_PLAYER="native-video-player",tq.PERSISTENT_CTA="persistent_cta",tq.PRIVACY_CTA="privacy-cta",tq.PROGRESSIVE_VIDEO_PLAYER="progressive-video-player",tq.SCENE_END="scene-end",tq.TEMPLATE_ERROR="template-error",tq.VIDEO_SCENE_END="video-scene-end",tq.VIDEO_SCENE_START="video-scene-start",tq.VIDEO_SKIP_TO_ENDCARD="video-skip-to-endcard",tq.VIDEO_START="video-start",tq),tm=((tZ={}).RESOURCE="resource",tZ.PLAYABLE="playable",tZ.TEMPLATE="template",tZ),tf=()=>[tA.AD_CLOSE,tA.AD_FEEDBACK,tA.AD_LOAD,tA.AD_LOAD_COMPLETE,tA.AD_START,tA.ALTERNATIVE_VIEW,tA.APP_STORE_DURATION,tA.CLICK_METRICS,tA.CTA,tA.ENGAGEMENT_IS_USED,tA.FRUSTRATION_CLICKS,tA.FSC,tA.GRANT_REWARD,tA.HLS_LEVEL_SWITCHED,tA.HLS_NOT_SUPPORTED,tA.HLS_VIDEO_STALLED,tA.IMPRESSION,tA.INACTIVITY_OBSERVED,tA.PRIVACY_CTA,tA.SCENE_END,tA.SCENE_START,tA.TEMPLATE_ERROR,tA.UNKNOWN_MRAID_COMMAND,tA.VIDEO_SKIP_TO_ENDCARD,tA.VIDEO_START,tA.WEB_VITALS_FIRST_CONTENTFUL_PAINT,tA.WEB_VITALS_INTERACTION_TO_NEXT_PAINT,tA.WEB_VITALS_LARGEST_CONTENTFUL_PAINT,tA.WEB_VITALS_TIME_TO_FIRST_BYTE];const tN="Unable to load img resource",tD="video load fail after retry",tR="notify fatal error after video load fail",ty="video load fail with no retry",tL="video does not play after 10s",tP="video play fail after 30s",tb="video failed to play",tw=[tD,tR,ty,tL,tP,tb,tN];var tF,tK,tG,tY,tj,tX,tz,t$,tq,tZ,tQ,tJ,t0,t1,t2,t3,t5,t4,t6,t8,t7,t9,ne,tM=()=>{let e=eX.getInstance(),t=tC.getServiceIdentifier();return e.get(t)},tV=()=>{let e=eX.getInstance(),t=tS.getServiceIdentifier();return e.get(t)},tk=(e,t)=>{let n=`context_${t}`;return eX.getInstance().has(n)||eX.getInstance().bind(n,e),{getValue:()=>eX.getInstance().get(n),setValue:e=>{eX.getInstance().bind(n,e)}}},tU=tk({scene:void 0},"SceneContext"),tB=()=>{var e;return null==(e=tU.getValue())?void 0:e.scene},tH=()=>{let e=eX.getInstance(),t=eZ.getServiceIdentifier();return e.get(t)},tW=()=>tH(),tx=((tQ=tx||{}).MINIMIZED="minimized",tQ.MAXIMIZED="maximized",tQ),nt=((tJ=nt||{}).APP_STORE_OPEN="APP_STORE_OPEN",tJ.APP_STORE_CLOSE="APP_STORE_CLOSE",tJ),nn=(e,t=tW())=>{let n=t.getActivityEventPairs("viewability",tx.MINIMIZED,tx.MAXIMIZED),i=0;n.forEach((e=>{i+=e[1].timestamp-e[0].timestamp}));let r=t.getActivityEventPairs("store-kit-product-view",nt.APP_STORE_OPEN,nt.APP_STORE_CLOSE),a=0;return r.forEach((e=>{a+=e[1].timestamp-e[0].timestamp})),Date.now()-e-i+a},ni=class extends ez{static getServiceIdentifier(){return"NetworkRequestServiceInterface"}},nr=()=>eX.getInstance().get(ni.getServiceIdentifier()),na=class extends ez{static getServiceIdentifier(){return"ObservabilityServiceInterface"}init(e){this.observability=e(this.tokenService,this.environmentService,this.networkRequestService,this.placementTypeService,this.reportingService,this.injectedGetCurrentScene,this.injectedGetAdDuration),this.isObserved=this.observability.isObserved()}pushEvent(e){var t,n;if(this.isObserved){if(Array.isArray(e)){let n=e.filter((e=>e.name&&this.singleEventsToAccept.includes(e.name)));return void(n.length>0&&(null==(t=this.observability)||t.pushManyEvents(n)))}if(e.name&&this.singleEventsToAccept.includes(e.name)){let t=e.name;null==(n=this.observability)||n.pushEvent(t,e)}}}pushError(e,t){var n;this.isObserved&&(null==(n=this.observability)||n.pushError(e,{error_source:this.getErrorSource(e,t)}))}getErrorSource(e,t){var n,i;let r=null!=(n=null==e?void 0:e.message)?n:e,a=null!=(i=null==e?void 0:e.error_source)?i:tm.TEMPLATE;return(null==t?void 0:t.error_source)&&(a=t.error_source),(tw.includes(r)||/(Failed to load|Unable to load).*/i.test(r))&&(a=tm.RESOURCE),a}constructor(e=tE(),t=tM(),n=nr(),i=tV(),r=tW(),a=tB,s=nn,o=tf()){super(),this.tokenService=e,this.environmentService=t,this.networkRequestService=n,this.placementTypeService=i,this.reportingService=r,this.injectedGetCurrentScene=a,this.injectedGetAdDuration=s,this.singleEventsToAccept=o,this.isObserved=!1}},ns=class extends ez{isViewable(){var e;return this.viewableIsSet?this.viewable:!!(null==(e=this.mraidService.getMraid())?void 0:e.isViewable())}resetViewable(){this.viewable=!1,this.viewableIsSet=!1}setViewable(e){this.viewable=e,this.viewableIsSet=!0}static getServiceIdentifier(){return"ViewableServiceInterface"}constructor(e=td()){super(),this.mraidService=e,this.viewable=!1,this.viewableIsSet=!1}},no={},nl=[],nc=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,nd=Array.isArray;function nu(e,t){for(var n in t)e[n]=t[n];return e}function nE(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function n_(e,t,n){var i,r,a,s={};for(a in t)"key"==a?i=t[a]:"ref"==a?r=t[a]:s[a]=t[a];if(arguments.length>2&&(s.children=arguments.length>3?t0.call(arguments,2):n),"function"==typeof e&&null!=e.defaultProps)for(a in e.defaultProps)null==s[a]&&(s[a]=e.defaultProps[a]);return nv(e,s,i,r,null)}function nv(e,t,n,i,r){var a={type:e,props:t,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:null==r?++t2:r,__i:-1,__u:0};return null==r&&null!=t1.vnode&&t1.vnode(a),a}function nh(e){return e.children}function nS(e,t){this.props=e,this.context=t}function nT(e,t){if(null==t)return e.__?nT(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?nT(e):null}function np(e){(!e.__d&&(e.__d=!0)&&t3.push(e)&&!ng.__r++||t5!=t1.debounceRendering)&&((t5=t1.debounceRendering)||t4)(ng)}function ng(){for(var e,t,n,i,r,a,s=1;t3.length;)t3.length>s&&t3.sort(t6),e=t3.shift(),s=t3.length,e.__d&&(t=void 0,i=(n=e.__v).__e,r=[],a=[],e.__P&&((t=nu({},n)).__v=n.__v+1,t1.vnode&&t1.vnode(t),nm(e.__P,t,n,e.__n,e.__P.namespaceURI,32&n.__u?[i]:null,r,null==i?nT(n):i,!!(32&n.__u),a),t.__v=n.__v,t.__.__k[t.__i]=t,nf(r,t,a),t.__e!=i&&function e(t){var n,i;if(null!=(t=t.__)&&null!=t.__c){for(t.__e=t.__c.base=null,n=0;n<t.__k.length;n++)if(null!=(i=t.__k[n])&&null!=i.__e){t.__e=t.__c.base=i.__e;break}return e(t)}}(t)));ng.__r=0}function nC(e,t,n,i,r,a,s,o,l,c,d){var u,E,_,v,h,S,T=i&&i.__k||nl,p=t.length;for(l=function(e,t,n,i,r){var a,s,o,l,c,d=n.length,u=d,E=0;for(e.__k=Array(r),a=0;a<r;a++)null!=(s=t[a])&&"boolean"!=typeof s&&"function"!=typeof s?(l=a+E,(s=e.__k[a]="string"==typeof s||"number"==typeof s||"bigint"==typeof s||s.constructor==String?nv(null,s,null,null,null):nd(s)?nv(nh,{children:s},null,null,null):null==s.constructor&&s.__b>0?nv(s.type,s.props,s.key,s.ref?s.ref:null,s.__v):s).__=e,s.__b=e.__b+1,o=null,-1!=(c=s.__i=function(e,t,n,i){var r,a,s=e.key,o=e.type,l=t[n];if(null===l&&null==e.key||l&&s==l.key&&o==l.type&&!(2&l.__u))return n;if(i>+(null!=l&&!(2&l.__u)))for(r=n-1,a=n+1;r>=0||a<t.length;){if(r>=0){if((l=t[r])&&!(2&l.__u)&&s==l.key&&o==l.type)return r;r--}if(a<t.length){if((l=t[a])&&!(2&l.__u)&&s==l.key&&o==l.type)return a;a++}}return-1}(s,n,l,u))&&(u--,(o=n[c])&&(o.__u|=2)),null==o||null==o.__v?(-1==c&&(r>d?E--:r<d&&E++),"function"!=typeof s.type&&(s.__u|=4)):c!=l&&(c==l-1?E--:c==l+1?E++:(c>l?E--:E++,s.__u|=4))):e.__k[a]=null;if(u)for(a=0;a<d;a++)null!=(o=n[a])&&!(2&o.__u)&&(o.__e==i&&(i=nT(o)),function e(t,n,i){var r,a;if(t1.unmount&&t1.unmount(t),(r=t.ref)&&(r.current&&r.current!=t.__e||nN(r,null,n)),null!=(r=t.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(e){t1.__e(e,n)}r.base=r.__P=null}if(r=t.__k)for(a=0;a<r.length;a++)r[a]&&e(r[a],n,i||"function"!=typeof t.type);i||nE(t.__e),t.__c=t.__=t.__e=void 0}(o,o));return i}(n,t,T,l,p),u=0;u<p;u++)null!=(_=n.__k[u])&&(E=-1==_.__i?no:T[_.__i]||no,_.__i=u,S=nm(e,_,E,r,a,s,o,l,c,d),v=_.__e,_.ref&&E.ref!=_.ref&&(E.ref&&nN(E.ref,null,_),d.push(_.ref,_.__c||v,_)),null==h&&null!=v&&(h=v),4&_.__u||E.__k===_.__k?l=function e(t,n,i){var r,a;if("function"==typeof t.type){for(r=t.__k,a=0;r&&a<r.length;a++)r[a]&&(r[a].__=t,n=e(r[a],n,i));return n}t.__e!=n&&(n&&t.type&&!i.contains(n)&&(n=nT(t)),i.insertBefore(t.__e,n||null),n=t.__e);do{n=n&&n.nextSibling}while(null!=n&&8==n.nodeType);return n}(_,l,e):"function"==typeof _.type&&void 0!==S?l=S:v&&(l=v.nextSibling),_.__u&=-7);return n.__e=h,l}function nI(e,t,n){"-"==t[0]?e.setProperty(t,null==n?"":n):e[t]=null==n?"":"number"!=typeof n||nc.test(t)?n:n+"px"}function nA(e,t,n,i,r){var a;e:if("style"==t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof i&&(e.style.cssText=i=""),i)for(t in i)n&&t in n||nI(e.style,t,"");if(n)for(t in n)i&&n[t]==i[t]||nI(e.style,t,n[t])}else if("o"==t[0]&&"n"==t[1])a=t!=(t=t.replace(t8,"$1")),t=t.toLowerCase()in e||"onFocusOut"==t||"onFocusIn"==t?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+a]=n,n?i?n.u=i.u:(n.u=t7,e.addEventListener(t,a?ne:t9,a)):e.removeEventListener(t,a?ne:t9,a);else{if("http://www.w3.org/2000/svg"==r)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!=t&&"height"!=t&&"href"!=t&&"list"!=t&&"form"!=t&&"tabIndex"!=t&&"download"!=t&&"rowSpan"!=t&&"colSpan"!=t&&"role"!=t&&"popover"!=t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null==n||!1===n&&"-"!=t[4]?e.removeAttribute(t):e.setAttribute(t,"popover"==t&&1==n?"":n))}}function nO(e){return function(t){if(this.l){var n=this.l[t.type+e];if(null==t.t)t.t=t7++;else if(t.t<n.u)return;return n(t1.event?t1.event(t):t)}}}function nm(e,t,n,i,r,a,s,o,l,c){var d,u,E,_,v,h,S,T,p,g,C,A,I,O,m,f,N,D=t.type;if(null!=t.constructor)return null;128&n.__u&&(l=!!(32&n.__u),a=[o=t.__e=n.__e]),(d=t1.__b)&&d(t);e:if("function"==typeof D)try{if(T=t.props,p="prototype"in D&&D.prototype.render,g=(d=D.contextType)&&i[d.__c],C=d?g?g.props.value:d.__:i,n.__c?S=(u=t.__c=n.__c).__=u.__E:(p?t.__c=u=new D(T,C):(t.__c=u=new nS(T,C),u.constructor=D,u.render=nD),g&&g.sub(u),u.props=T,u.state||(u.state={}),u.context=C,u.__n=i,E=u.__d=!0,u.__h=[],u._sb=[]),p&&null==u.__s&&(u.__s=u.state),p&&null!=D.getDerivedStateFromProps&&(u.__s==u.state&&(u.__s=nu({},u.__s)),nu(u.__s,D.getDerivedStateFromProps(T,u.__s))),_=u.props,v=u.state,u.__v=t,E)p&&null==D.getDerivedStateFromProps&&null!=u.componentWillMount&&u.componentWillMount(),p&&null!=u.componentDidMount&&u.__h.push(u.componentDidMount);else{if(p&&null==D.getDerivedStateFromProps&&T!==_&&null!=u.componentWillReceiveProps&&u.componentWillReceiveProps(T,C),!u.__e&&null!=u.shouldComponentUpdate&&!1===u.shouldComponentUpdate(T,u.__s,C)||t.__v==n.__v){for(t.__v!=n.__v&&(u.props=T,u.state=u.__s,u.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some((function(e){e&&(e.__=t)})),A=0;A<u._sb.length;A++)u.__h.push(u._sb[A]);u._sb=[],u.__h.length&&s.push(u);break e}null!=u.componentWillUpdate&&u.componentWillUpdate(T,u.__s,C),p&&null!=u.componentDidUpdate&&u.__h.push((function(){u.componentDidUpdate(_,v,h)}))}if(u.context=C,u.props=T,u.__P=e,u.__e=!1,I=t1.__r,O=0,p){for(u.state=u.__s,u.__d=!1,I&&I(t),d=u.render(u.props,u.state,u.context),m=0;m<u._sb.length;m++)u.__h.push(u._sb[m]);u._sb=[]}else do{u.__d=!1,I&&I(t),d=u.render(u.props,u.state,u.context),u.state=u.__s}while(u.__d&&++O<25);u.state=u.__s,null!=u.getChildContext&&(i=nu(nu({},i),u.getChildContext())),p&&!E&&null!=u.getSnapshotBeforeUpdate&&(h=u.getSnapshotBeforeUpdate(_,v)),f=d,null!=d&&d.type===nh&&null==d.key&&(f=function e(t){return"object"!=typeof t||null==t||t.__b&&t.__b>0?t:nd(t)?t.map(e):nu({},t)}(d.props.children)),o=nC(e,nd(f)?f:[f],t,n,i,r,a,s,o,l,c),u.base=t.__e,t.__u&=-161,u.__h.length&&s.push(u),S&&(u.__E=u.__=null)}catch(e){if(t.__v=null,l||null!=a)if(e.then){for(t.__u|=l?160:128;o&&8==o.nodeType&&o.nextSibling;)o=o.nextSibling;a[a.indexOf(o)]=null,t.__e=o}else for(N=a.length;N--;)nE(a[N]);else t.__e=n.__e,t.__k=n.__k;t1.__e(e,t,n)}else null==a&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):o=t.__e=function(e,t,n,i,r,a,s,o,l){var c,d,u,E,_,v,h,S=n.props,T=t.props,p=t.type;if("svg"==p?r="http://www.w3.org/2000/svg":"math"==p?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),null!=a)for(c=0;c<a.length;c++)if((_=a[c])&&"setAttribute"in _==!!p&&(p?_.localName==p:3==_.nodeType)){e=_,a[c]=null;break}if(null==e){if(null==p)return document.createTextNode(T);e=document.createElementNS(r,p,T.is&&T),o&&(t1.__m&&t1.__m(t,a),o=!1),a=null}if(null==p)S===T||o&&e.data==T||(e.data=T);else{if(a=a&&t0.call(e.childNodes),S=n.props||no,!o&&null!=a)for(S={},c=0;c<e.attributes.length;c++)S[(_=e.attributes[c]).name]=_.value;for(c in S)if(_=S[c],"children"==c);else if("dangerouslySetInnerHTML"==c)u=_;else if(!(c in T)){if("value"==c&&"defaultValue"in T||"checked"==c&&"defaultChecked"in T)continue;nA(e,c,null,_,r)}for(c in T)_=T[c],"children"==c?E=_:"dangerouslySetInnerHTML"==c?d=_:"value"==c?v=_:"checked"==c?h=_:o&&"function"!=typeof _||S[c]===_||nA(e,c,_,S[c],r);if(d)o||u&&(d.__html==u.__html||d.__html==e.innerHTML)||(e.innerHTML=d.__html),t.__k=[];else if(u&&(e.innerHTML=""),nC("template"==t.type?e.content:e,nd(E)?E:[E],t,n,i,"foreignObject"==p?"http://www.w3.org/1999/xhtml":r,a,s,a?a[0]:n.__k&&nT(n,0),o,l),null!=a)for(c=a.length;c--;)nE(a[c]);o||(c="value","progress"==p&&null==v?e.removeAttribute("value"):null==v||v===e[c]&&("progress"!=p||v)&&("option"!=p||v==S[c])||nA(e,c,v,S[c],r),c="checked",null!=h&&h!=e[c]&&nA(e,c,h,S[c],r))}return e}(n.__e,t,n,i,r,a,s,l,c);return(d=t1.diffed)&&d(t),128&t.__u?void 0:o}function nf(e,t,n){for(var i=0;i<n.length;i++)nN(n[i],n[++i],n[++i]);t1.__c&&t1.__c(t,e),e.some((function(t){try{e=t.__h,t.__h=[],e.some((function(e){e.call(t)}))}catch(e){t1.__e(e,t.__v)}}))}function nN(e,t,n){try{if("function"==typeof e){var i="function"==typeof e.__u;i&&e.__u(),i&&null==t||(e.__u=e(t))}else e.current=t}catch(e){t1.__e(e,n)}}function nD(e,t,n){return this.constructor(e,n)}t0=nl.slice,t1={__e:function(e,t,n,i){for(var r,a,s;t=t.__;)if((r=t.__c)&&!r.__)try{if((a=r.constructor)&&null!=a.getDerivedStateFromError&&(r.setState(a.getDerivedStateFromError(e)),s=r.__d),null!=r.componentDidCatch&&(r.componentDidCatch(e,i||{}),s=r.__d),s)return r.__E=r}catch(t){e=t}throw e}},t2=0,nS.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!=this.state?this.__s:this.__s=nu({},this.state),"function"==typeof e&&(e=e(nu({},n),this.props)),e&&nu(n,e),null!=e&&this.__v&&(t&&this._sb.push(t),np(this))},nS.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),np(this))},nS.prototype.render=nh,t3=[],t4="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,t6=function(e,t){return e.__v.__b-t.__v.__b},ng.__r=0,t8=/(PointerCapture)$|Capture$/i,t7=0,t9=nO(!1),ne=nO(!0);var nR,ny,nL,nP,nb=0,nw=[],nM=t1,nV=nM.__b,nk=nM.__r,nU=nM.diffed,nB=nM.__c,nH=nM.unmount,nW=nM.__;function nx(e,t){nM.__h&&nM.__h(ny,e,nb||t),nb=0;var n=ny.__H||(ny.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function nF(e,t,n){var i=nx(nR++,2);if(i.t=e,!i.__c&&(i.__=[n?n(t):nZ(void 0,t),function(e){var t=i.__N?i.__N[0]:i.__[0],n=i.t(t,e);t!==n&&(i.__N=[n,i.__[1]],i.__c.setState({}))}],i.__c=ny,!ny.__f)){var r=function(e,t,n){if(!i.__c.__H)return!0;var r=i.__c.__H.__.filter((function(e){return!!e.__c}));if(r.every((function(e){return!e.__N})))return!a||a.call(this,e,t,n);var s=i.__c.props!==e;return r.forEach((function(e){if(e.__N){var t=e.__[0];e.__=e.__N,e.__N=void 0,t!==e.__[0]&&(s=!0)}})),a&&a.call(this,e,t,n)||s};ny.__f=!0;var a=ny.shouldComponentUpdate,s=ny.componentWillUpdate;ny.componentWillUpdate=function(e,t,n){if(this.__e){var i=a;a=void 0,r(e,t,n),a=i}s&&s.call(this,e,t,n)},ny.shouldComponentUpdate=r}return i.__N||i.__}function nK(e,t){var n=nx(nR++,3);!nM.__s&&nq(n.__H,t)&&(n.__=e,n.u=t,ny.__H.__h.push(n))}function nG(e){return nb=5,nY((function(){return{current:e}}),[])}function nY(e,t){var n=nx(nR++,7);return nq(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function nj(){for(var e;e=nw.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(nz),e.__H.__h.forEach(n$),e.__H.__h=[]}catch(t){e.__H.__h=[],nM.__e(t,e.__v)}}nM.__b=function(e){ny=null,nV&&nV(e)},nM.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),nW&&nW(e,t)},nM.__r=function(e){nk&&nk(e),nR=0;var t=(ny=e.__c).__H;t&&(nL===ny?(t.__h=[],ny.__h=[],t.__.forEach((function(e){e.__N&&(e.__=e.__N),e.u=e.__N=void 0}))):(t.__h.forEach(nz),t.__h.forEach(n$),t.__h=[],nR=0)),nL=ny},nM.diffed=function(e){nU&&nU(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(1!==nw.push(t)&&nP===nM.requestAnimationFrame||((nP=nM.requestAnimationFrame)||function(e){var t,n=function(){clearTimeout(i),nX&&cancelAnimationFrame(t),setTimeout(e)},i=setTimeout(n,100);nX&&(t=requestAnimationFrame(n))})(nj)),t.__H.__.forEach((function(e){e.u&&(e.__H=e.u),e.u=void 0}))),nL=ny=null},nM.__c=function(e,t){t.some((function(e){try{e.__h.forEach(nz),e.__h=e.__h.filter((function(e){return!e.__||n$(e)}))}catch(n){t.some((function(e){e.__h&&(e.__h=[])})),t=[],nM.__e(n,e.__v)}})),nB&&nB(e,t)},nM.unmount=function(e){nH&&nH(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach((function(e){try{nz(e)}catch(e){t=e}})),n.__H=void 0,t&&nM.__e(t,n.__v))};var nX="function"==typeof requestAnimationFrame;function nz(e){var t=ny,n=e.__c;"function"==typeof n&&(e.__c=void 0,n()),ny=t}function n$(e){var t=ny;e.__c=e.__(),ny=t}function nq(e,t){return!e||e.length!==t.length||t.some((function(t,n){return t!==e[n]}))}function nZ(e,t){return"function"==typeof t?t(e):t}var nQ=Symbol.for("preact-signals");function nJ(){if(n3>1)n3--;else{for(var e,t=!1;void 0!==n2;){var n=n2;for(n2=void 0,n5++;void 0!==n;){var i=n.o;if(n.o=void 0,n.f&=-3,!(8&n.f)&&n9(n))try{n.c()}catch(n){t||(e=n,t=!0)}n=i}}if(n5=0,n3--,t)throw e}}function n0(e){if(n3>0)return e();n3++;try{return e()}finally{nJ()}}var n1=void 0,n2=void 0,n3=0,n5=0,n4=0;function n6(e){if(void 0!==n1){var t=e.n;if(void 0===t||t.t!==n1)return t={i:0,S:e,p:n1.s,n:void 0,t:n1,e:void 0,x:void 0,r:t},void 0!==n1.s&&(n1.s.n=t),n1.s=t,e.n=t,32&n1.f&&e.S(t),t;if(-1===t.i)return t.i=0,void 0!==t.n&&(t.n.p=t.p,void 0!==t.p&&(t.p.n=t.n),t.p=n1.s,t.n=void 0,n1.s.n=t,n1.s=t),t}}function n8(e){this.v=e,this.i=0,this.n=void 0,this.t=void 0}function n7(e){return new n8(e)}function n9(e){for(var t=e.s;void 0!==t;t=t.n)if(t.S.i!==t.i||!t.S.h()||t.S.i!==t.i)return!0;return!1}function ie(e){for(var t=e.s;void 0!==t;t=t.n){var n=t.S.n;if(void 0!==n&&(t.r=n),t.S.n=t,t.i=-1,void 0===t.n){e.s=t;break}}}function it(e){for(var t=e.s,n=void 0;void 0!==t;){var i=t.p;-1===t.i?(t.S.U(t),void 0!==i&&(i.n=t.n),void 0!==t.n&&(t.n.p=i)):n=t,t.S.n=t.r,void 0!==t.r&&(t.r=void 0),t=i}e.s=n}function ii(e){n8.call(this,void 0),this.x=e,this.s=void 0,this.g=n4-1,this.f=4}function ir(e){var t=e.u;if(e.u=void 0,"function"==typeof t){n3++;var n=n1;n1=void 0;try{t()}catch(t){throw e.f&=-2,e.f|=8,ia(e),t}finally{n1=n,nJ()}}}function ia(e){for(var t=e.s;void 0!==t;t=t.n)t.S.U(t);e.x=void 0,e.s=void 0,ir(e)}function is(e){if(n1!==this)throw Error("Out-of-order effect");it(this),n1=e,this.f&=-2,8&this.f&&ia(this),nJ()}function io(e){this.x=e,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32}function il(e){var t=new io(e);try{t.c()}catch(e){throw t.d(),e}return t.d.bind(t)}n8.prototype.brand=nQ,n8.prototype.h=function(){return!0},n8.prototype.S=function(e){this.t!==e&&void 0===e.e&&(e.x=this.t,void 0!==this.t&&(this.t.e=e),this.t=e)},n8.prototype.U=function(e){if(void 0!==this.t){var t=e.e,n=e.x;void 0!==t&&(t.x=n,e.e=void 0),void 0!==n&&(n.e=t,e.x=void 0),e===this.t&&(this.t=n)}},n8.prototype.subscribe=function(e){var t=this;return il((function(){var n=t.value,i=n1;n1=void 0;try{e(n)}finally{n1=i}}))},n8.prototype.valueOf=function(){return this.value},n8.prototype.toString=function(){return this.value+""},n8.prototype.toJSON=function(){return this.value},n8.prototype.peek=function(){var e=n1;n1=void 0;try{return this.value}finally{n1=e}},Object.defineProperty(n8.prototype,"value",{get:function(){var e=n6(this);return void 0!==e&&(e.i=this.i),this.v},set:function(e){if(e!==this.v){if(n5>100)throw Error("Cycle detected");this.v=e,this.i++,n4++,n3++;try{for(var t=this.t;void 0!==t;t=t.x)t.t.N()}finally{nJ()}}}}),(ii.prototype=new n8).h=function(){if(this.f&=-3,1&this.f)return!1;if(32==(36&this.f)||(this.f&=-5,this.g===n4))return!0;if(this.g=n4,this.f|=1,this.i>0&&!n9(this))return this.f&=-2,!0;var e=n1;try{ie(this),n1=this;var t=this.x();(16&this.f||this.v!==t||0===this.i)&&(this.v=t,this.f&=-17,this.i++)}catch(e){this.v=e,this.f|=16,this.i++}return n1=e,it(this),this.f&=-2,!0},ii.prototype.S=function(e){if(void 0===this.t){this.f|=36;for(var t=this.s;void 0!==t;t=t.n)t.S.S(t)}n8.prototype.S.call(this,e)},ii.prototype.U=function(e){if(void 0!==this.t&&(n8.prototype.U.call(this,e),void 0===this.t)){this.f&=-33;for(var t=this.s;void 0!==t;t=t.n)t.S.U(t)}},ii.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(var e=this.t;void 0!==e;e=e.x)e.t.N()}},Object.defineProperty(ii.prototype,"value",{get:function(){if(1&this.f)throw Error("Cycle detected");var e=n6(this);if(this.h(),void 0!==e&&(e.i=this.i),16&this.f)throw this.v;return this.v}}),io.prototype.c=function(){var e=this.S();try{if(8&this.f||void 0===this.x)return;var t=this.x();"function"==typeof t&&(this.u=t)}finally{e()}},io.prototype.S=function(){if(1&this.f)throw Error("Cycle detected");this.f|=1,this.f&=-9,ir(this),ie(this),n3++;var e=n1;return n1=this,is.bind(this,e)},io.prototype.N=function(){2&this.f||(this.f|=2,this.o=n2,n2=this)},io.prototype.d=function(){this.f|=8,1&this.f||ia(this)};var ic,id,iu=[],iE=[];function i_(e,t){t1[e]=t.bind(null,t1[e]||function(){})}function iv(e){id&&id(),id=e&&e.S()}function ih(e){var t=this,n=e.data,i=iS(n);i.value=n;var r=nY((function(){for(var e=t.__v;e=e.__;)if(e.__c){e.__c.__$f|=4;break}var n=new ii((function(){var e=i.value.value;return 0===e?0:!0===e?"":e||""})),r=new ii((function(){var e;return!Array.isArray(n.value)&&(null==(e=n.value)||null!=e.constructor)})),a=il((function(){if(this.N=iA,r.value){var e=n.value;t.__v&&t.__v.__e&&3===t.__v.__e.nodeType&&(t.__v.__e.data=e)}})),s=t.__$u.d;return t.__$u.d=function(){a(),s.call(this)},[r,n]}),[]),a=r[0],s=r[1];return a.value?s.peek():s.value}function iS(e){return nY((function(){return n7(e)}),[])}il((function(){ic=this.N}))(),ih.displayName="_st",Object.defineProperties(n8.prototype,{constructor:{configurable:!0,value:void 0},type:{configurable:!0,value:ih},props:{configurable:!0,get:function(){return{data:this}}},__b:{configurable:!0,value:1}}),i_("__b",(function(e,t){if("string"==typeof t.type){var n,i=t.props;for(var r in i)if("children"!==r){var a=i[r];a instanceof n8&&(n||(t.__np=n={}),n[r]=a,i[r]=a.peek())}}e(t)})),i_("__r",(function(e,t){iv();var n,i,r=t.__c;r&&(r.__$f&=-2,void 0===(i=r.__$u)&&(il((function(){n=this})),n.c=function(){r.__$f|=1,r.setState({})},r.__$u=i=n)),iv(i),e(t)})),i_("__e",(function(e,t,n,i){iv(),e(t,n,i)})),i_("diffed",(function(e,t){if(iv(),"string"==typeof t.type&&(n=t.__e)){var n,i=t.__np,r=t.props;if(i){var a=n.U;if(a)for(var s in a){var o=a[s];void 0===o||s in i||(o.d(),a[s]=void 0)}else a={},n.U=a;for(var l in i){var c=a[l],d=i[l];void 0===c?(c=function(e,t,n,i){var r=t in e&&void 0===e.ownerSVGElement,a=n7(n);return{o:function(e,t){a.value=e,i=t},d:il((function(){this.N=iA;var n=a.value.value;i[t]!==n&&(i[t]=n,r?e[t]=n:n?e.setAttribute(t,n):e.removeAttribute(t))}))}}(n,l,d,r),a[l]=c):c.o(d,r)}}}e(t)})),i_("unmount",(function(e,t){if("string"==typeof t.type){var n=t.__e;if(n){var i=n.U;if(i)for(var r in n.U=void 0,i){var a=i[r];a&&a.d()}}}else{var s=t.__c;if(s){var o=s.__$u;o&&(s.__$u=void 0,o.d())}}e(t)})),i_("__h",(function(e,t,n,i){(i<3||9===i)&&(t.__$f|=2),e(t,n,i)})),nS.prototype.shouldComponentUpdate=function(e,t){var n=this.__$u,i=n&&void 0!==n.s;for(var r in t)return!0;if(this.__f||"boolean"==typeof this.u&&!0===this.u){var a=2&this.__$f;if(!(i||a||4&this.__$f)||1&this.__$f)return!0}else if(!(i||4&this.__$f)||3&this.__$f)return!0;for(var s in e)if("__source"!==s&&e[s]!==this.props[s])return!0;for(var o in this.props)if(!(o in e))return!0;return!1};var iT="undefined"==typeof requestAnimationFrame?setTimeout:function(e){var t=function(){clearTimeout(n),cancelAnimationFrame(i),e()},n=setTimeout(t,100),i=requestAnimationFrame(t)},ip=function(e){queueMicrotask((function(){queueMicrotask(e)}))};function ig(){n0((function(){for(var e;e=iu.shift();)ic.call(e)}))}function iC(){1===iu.push(this)&&(t1.requestAnimationFrame||iT)(ig)}function iI(){n0((function(){for(var e;e=iE.shift();)ic.call(e)}))}function iA(){1===iE.push(this)&&(t1.requestAnimationFrame||ip)(iI)}function iO(e){var t=nG(e);t.current=e,nK((function(){return il((function(){return this.N=iC,t.current()}))}),[])}var im=class extends ez{setMutedSignal(e){this.mutedSignal.value=e}getMutedSignal(){return this.mutedSignal}isMuted(){return this.mutedSignal.value}mute(){this.setMutedSignal(!0)}unmute(){this.setMutedSignal(!1)}static getServiceIdentifier(){return"MuteServiceInterface"}constructor(){super(),this.mutedSignal=n7(!1)}},iN=()=>{let e=eX.getInstance(),t=te.getServiceIdentifier();return e.get(t)},iD=(e,t)=>(null!=t?t:iN()).interpreterMap.get(e),iR=((i={}).SHOW="SHOW",i.PRELOAD="PRELOAD",i.CANCEL_PRELOAD="CANCEL_PRELOAD",i),iy=((r={}).SHOWING="SHOWING",r.PRELOADING="PRELOADING",r.INITIAL="INITIAL",r),iL=((a={}).INITIALIZE_PRELOAD="initializePreload",a.EMIT_SHOW="emitShow",a.MARK_PRELOAD_SUCCESS="markPreloadSuccess",a.TRIGGER_VIEWABLE_CHANGE="triggerViewableChange",a.FLUSH_MRAID_EVENTS="flushMraidEvents",a.CANCEL_PRELOAD="cancelPreload",a),iP=((s=iP||{}).MUTE_SOUND="muteSound",s.UN_MUTE_SOUND="unMuteSound",s.EMIT_MUTED="emitMuted",s.EMIT_VIDEO_ERROR="emitVideoError",s.CLOSE_VIDEO="closeVideo",s.CLOSE_VIDEO_CURRENT_SCENE="closeVideoCurrentScene",s.CLOSE_PICTURE_IN_PICTURE="closePictureInPicture",s.PAUSE_VIDEO="pauseVideo",s.PLAY_VIDEO="playVideo",s.POSTROLL_VIEW="postrollView",s.SEND_EVENT_VIDEO_SKIP_TO_NEXT_SCENE="sendEventVideoSkipToNextScene",s.SET_PICTURE_IN_PICTURE_VIDEO_CONTEXT="setPictureInPictureVideoContext",s.SHOW_PICTURE_IN_PICTURE="showPictureInPicture",s.SEND_FATAL_VIDEO_ERROR="sendFatalVideoError",s.DISABLE_THEATRE_MODE="disableTheatreMode",s),ib=((o={}).CLOSE_BUTTON_MOUNT="CLOSE_BUTTON_MOUNT",o.CLOSE_BUTTON_UNMOUNT="CLOSE_BUTTON_UNMOUNT",o.CLOSE_BUTTON_CLICK="CLOSE_BUTTON_CLICK",o.CLOSE_BUTTON_WILL_SHOW="CLOSE_BUTTON_WILL_SHOW",o.CLOSE_PICTURE_IN_PICTURE="CLOSE_PICTURE_IN_PICTURE",o.COMPLETE="COMPLETE",o.LAST_CHANCE_ENDCARD="LAST_CHANCE_ENDCARD",o.LAST_CHANCE_ENDCARD_CLOSE="LAST_CHANCE_ENDCARD_CLOSE",o.MUTE="MUTE",o.NEXT="NEXT",o.PRIVACY_LOGO_SHOW="PRIVACY_LOGO_SHOW",o.PRIVACY_LOGO_HIDE="PRIVACY_LOGO_HIDE",o.PRIVACY_BOTTOM_DRAWER_OPEN="PRIVACY_BOTTOM_DRAWER_OPEN",o.PRIVACY_BOTTOM_DRAWER_CLOSE="PRIVACY_BOTTOM_DRAWER_CLOSE",o.PRODUCT_VIEW_CLOSE="PRODUCT_VIEW_CLOSE",o.OPEN_PRIVACY_PAGE="OPEN_PRIVACY_PAGE",o.UNMUTE="UNMUTE",o.VIDEO_ERROR="VIDEO_ERROR",o.VIDEO_FAILURE="VIDEO_FAILURE",o.CLOSE="CLOSE",o.CREATIVE_VIEW="CREATIVE_VIEW",o.START_THEATRE_MODE="START_THEATRE_MODE",o.STOP_THEATRE_MODE="STOP_THEATRE_MODE",o),iw=class{getObservabilityData(){return{}}getTransitions(){return this.transitions}addTransition(e){return this.transitions.push(e),this}addOrUpdateTransition(e){let t=this.getTransitions().find((t=>t.name===e.name));if(t){t.scene=e.scene,t.cond=e.cond;let n={};t.actions.forEach((e=>{n[e.name]=!0}));let i=e.actions.filter((e=>!n[e.name]));t.actions.push(...i)}else this.addTransition(e);return this}getEntryActions(){return this.entryActions}addEntryAction(e){return this.entryActions.push(e),this}getExitActions(){return this.exitActions}addExitAction(e){return this.exitActions.push(e),this}isAlternative(){return this.alternative}isChild(){return this.child}getEventStreams(){return{}}static getInstances(){return[]}constructor(){this.transitions=[],this.entryActions=[],this.exitActions=[],this.alternative=!1,this.child=!1}},iM=((l={}).closed="closed",l.composite="composite",l.endcard="endcard",l.gdpr="gdpr",l.image="image",l.video="video",l),iV=((c={})[c.OFF=0]="OFF",c[c.SKO=1]="SKO",c[c.SKPV=2]="SKPV",c[c.STATIC_URL=3]="STATIC_URL",c),ik=((d={}).CLICK_THROUGH="clickThrough",d.COMPLETE="complete",d.CREATIVE_VIEW="creativeView",d.FIRST_QUARTILE="firstQuartile",d.MIDPOINT="midpoint",d.MUTE="mute",d.PAUSE="pause",d.RESUME="resume",d.SKIP="skip",d.START="start",d.THIRD_QUARTILE="thirdQuartile",d.UNMUTE="unmute",d),iU=((u={}).PROGRESSIVE="progressive",u.CUSTOM="custom",u.NATIVE="native",u),iB=((E={}).PROGRESSIVE="mp4",E.HLS="hls",E),iH=()=>{let e=eX.getInstance(),t=to.getServiceIdentifier();return e.get(t)},iW=((_={}).PAUSE_INTERVALS="pauseAllIntervals",_.START_INTERVALS="startAllIntervals",_),ix=e=>({pauseAllIntervals:()=>{(e||iH()).pauseAll()},startAllIntervals:()=>{(e||iH()).startAll()}}),iF=()=>{let e=eX.getInstance(),t=tc.getServiceIdentifier();return e.get(t)},iK=((v={}).STANDBY_TIMERS="standbyTimers",v.WAKE_TIMERS="wakeTimers",v),iG=e=>({standbyTimers:()=>{(e||iF()).standby()},wakeTimers:()=>{(e||iF()).wake()}}),iY=((h=iY||{}).OPEN_PRIVACY_URL="openPrivacyUrl",h.SET_PRIVACY_BUTTON_VISIBLE="setPrivacyButtonVisible",h.SET_PRIVACY_BUTTON_HIDDEN="setPrivacyButtonHidden",h.SET_PRIVACY_DRAWER_OPEN="setPrivacyDrawerOpen",h.SET_PRIVACY_DRAWER_CLOSED="setPrivacyDrawerClosed",h.TRIGGER_VIEWABLE_CHANGE="triggerViewableChange",h),ij=((S={}).CLOSE="CLOSE",S.FINISH="FINISH",S.INTERRUPT="INTERRUPT",S.SET_ERROR="SET_ERROR",S.SET_PREPARED="SET_PREPARED",S.READY="READY",S.RESUME="RESUME",S.SET_DISPLAY_OPTIONS="SET_DISPLAY_OPTIONS",S.SET_FALLBACK="SET_FALLBACK",S.SET_VISIBLE="SET_VISIBLE",S.SHOW="SHOW",S.START_DELAY_SHOW="START_DELAY_SHOW",S.START_IMMEDIATE_SHOW="START_IMMEDIATE_SHOW",S),iX=((T={}).CLOSING="CLOSING",T.ERROR="ERROR",T.DELAY_SHOW="DELAY_SHOW",T.DELAY_SHOW_IMMEDIATE="DELAY_SHOW_IMMEDIATE",T.DELAY_SHOW_INTERRUPTED="DELAY_SHOW_INTERRUPTED",T.DELAY_SHOW_VISIBLE="DELAY_SHOW_VISIBLE",T.FALLBACK="FALLBACK",T.IDLE="IDLE",T.INITIAL="INITIAL",T.IMMEDIATE_SHOW="IMMEDIATE_SHOW",T.IMMEDIATE_SHOW_VISIBLE="IMMEDIATE_SHOW_VISIBLE",T.PREPARING="PREPARING",T),iz=((p={}).ASSIGN_DISPLAY_OPTIONS="ASSIGN_DISPLAY_OPTIONS",p.ASSIGN_FALLBACK="ASSIGN_FALLBACK",p.CLOSE_SKO="CLOSE_SKO",p.EMIT_OBSERVABILITY_EVENT="EMIT_OBSERVABILITY_EVENT",p.SHOW_FALLBACK="SHOW_FALLBACK",p.SHOW_SKO="SHOW_SKO",p.CANCEL_DELAY_SHOW="CANCEL_DELAY_SHOW",p);const i$=new tT("6.4"),iq=new tT("6"),iZ=(e=tM())=>e.getSdkVersion().isGreaterThanOrEqualTo(i$),iQ=(e=tM())=>e.getOperatingSystem()===tg.iOS&&e.getOsVersion().isGreaterThanOrEqualTo(iq);var iJ=(e=tM())=>iZ(e)&&iQ(e),i0=((g={}).SKPV="SKPV",g.APP_STORE="APP_STORE",g.OFF="OFF",g),i1=(e=tM())=>{let t="APP_STORE";return iJ(e)&&(t="SKPV"),t},i2=class extends ez{canOpen(){return[iX.IDLE,iX.FALLBACK].some((e=>this.interpreter.state.matches(e)))}close(){this.interpreter.send({type:ij.CLOSE})}fallback(){this.interpreter.state.context.fallback!==i0.OFF&&(this.interpreter.send({type:ij.SET_FALLBACK}),this.open())}finish(){this.interpreter.send({type:ij.FINISH})}getState(){return this.interpreter.state}init(){}interrupt(){this.interpreter.send({type:ij.INTERRUPT})}isIdle(){var e;return null!=(e=this.interpreter.state.matches(iX.IDLE))&&e}isInterrupted(){return[iX.CLOSING,iX.DELAY_SHOW_INTERRUPTED].some((e=>this.interpreter.state.matches(e)))}isOpen(){return[iX.DELAY_SHOW_IMMEDIATE,iX.DELAY_SHOW_VISIBLE,iX.IMMEDIATE_SHOW,iX.IMMEDIATE_SHOW_VISIBLE].some((e=>this.interpreter.state.matches(e)))}open(e){let t={type:ij.START_IMMEDIATE_SHOW,fallback:null==e?void 0:e.fallback};(null==e?void 0:e.delayed)&&(t.type=this.interpreter.state.matches(iX.DELAY_SHOW)?ij.SHOW:ij.START_DELAY_SHOW),this.interpreter.send(t)}resume(){this.interpreter.send({type:ij.RESUME})}setDisplayOptions(e){this.interpreter.send({type:ij.SET_DISPLAY_OPTIONS,displayOptions:e})}subscribe(e){return this.interpreter.subscribe(e)}static getServiceIdentifier(){return"StoreKitOverlayServiceInterface"}constructor(e,t={},n=iN()){super(),this.machineConfig=e,this.machineOptions=t,this.stateMachineService=n;let i=this.stateMachineService.createMachine(this.machineConfig,this.machineOptions);this.interpreter=this.stateMachineService.interpret(i),this.interpreter.start()}},i3=()=>{let e=eX.getInstance(),t=i2.getServiceIdentifier();if(e.has(t))return e.get(t)},i5=((C={}).CLOSE_OVERLAY_VIEW="closeOverlayView",C.INTERRUPT_OVERLAY_VIEW="interruptOverlayView",C.RESUME_OVERLAY_VIEW="resumeOverlayView",C.SHOW_OVERLAY_VIEW="showOverlayView",C),i4=(e=i3)=>({closeOverlayView:()=>{let t=e();(null==t?void 0:t.isOpen())&&(null==t||t.close())},interruptOverlayView:()=>{let t=e();(null==t?void 0:t.isOpen())&&(null==t||t.interrupt())},resumeOverlayView:()=>{let t=e();(null==t?void 0:t.isInterrupted())&&(null==t||t.resume())},showOverlayView:()=>{let t=e();null!=t&&t.isOpen()||((null==t?void 0:t.isInterrupted())?null==t||t.resume():null==t||t.open())}}),i6=((I=i6||{}).START="start",I.STOP="stop",I),i8=((A=i8||{}).CLOSE_AD="CLOSE_AD",A),i7=((O=i7||{}).CLOSE="close",O),i9=(e=iF(),t=tW())=>{e.destroyAll(),t.emit({type:"picture-in-picture",event:i7.CLOSE,fireOnlyOnce:!0}),t.emit({type:"heartbeat",event:i6.STOP}),t.emit({type:"close",event:i8.CLOSE_AD,fireOnlyOnce:!0})},re=((m={}).CLOSE="CLOSE",m.OPEN="OPEN",m.PREPARE_FINISHED="PREPARE_FINISHED",m.PREPARE_SUCCESS="PREPARE_SUCCESS",m.READY="READY",m.SET_FALLBACK="SET_FALLBACK",m),rt=((f={}).FALLBACK="FALLBACK",f.HIDDEN="HIDDEN",f.INITIAL="INITIAL",f.PREPARING="PREPARING",f.SHOWING="SHOWING",f.DONE="DONE",f),rn=class extends ez{isDone(){var e,t;return null!=(t=null==(e=this.interpreter)?void 0:e.state.matches(rt.DONE))&&t}canOpen(){var e,t,n;return null!=(n=(null==(e=this.interpreter)?void 0:e.state.matches(rt.HIDDEN))||(null==(t=this.interpreter)?void 0:t.state.matches(rt.FALLBACK)))&&n}close(){var e;null==(e=this.interpreter)||e.send({type:re.CLOSE})}fallback(){}init(){}isOpen(){var e,t;return null!=(t=null==(e=this.interpreter)?void 0:e.state.matches(rt.SHOWING))&&t}open(e){var t;this.hasFallback=e,null==(t=this.interpreter)||t.send({type:re.OPEN})}subscribe(e){var t;return null==(t=this.interpreter)?void 0:t.subscribe(e)}static getServiceIdentifier(){return"ProductViewServiceInterface"}constructor(e,t={},n=iN()){super(),this.machineConfig=e,this.machineOptions=t,this.stateMachineService=n;let i=this.stateMachineService.createMachine(this.machineConfig,this.machineOptions);this.interpreter=this.stateMachineService.interpret(i),this.interpreter.start()}},ri=()=>{let e=eX.getInstance(),t=rn.getServiceIdentifier();if(e.has(t))return e.get(t)},rr=(e=tM())=>e.getSdkVersion().isLessThan(new tT("7"))&&"landscape"===e.getOrientation();const ra=new tT("14"),rs=new tT("6.8.1"),ro=(e=tM())=>e.getOperatingSystem()===tg.iOS&&e.getOsVersion().isGreaterThanOrEqualTo(ra),rl=(e=tM())=>e.getSdkVersion().isGreaterThanOrEqualTo(rs);var rc=(e=tM(),t=tV())=>ro(e)&&rl(e)&&!(t.isMrec()||t.isBanner()||t.isInLine()),rd=((N={}).SHOW_PRODUCT_VIEW="showProductView",N.HIDE_PRODUCT_VIEW="hideProductView",N.END_AD_ON_PRODUCT_VIEW_CLOSE="endAdOnProductViewClose",N);const ru=()=>({showProductView:()=>{if(rr()&&rc()){let e=i3();return void((null==e?void 0:e.canOpen())&&e.open({fallback:i0.OFF}))}let e=ri();null==e||e.open(!1)},hideProductView:()=>{},endAdOnProductViewClose:()=>{tM().getSdkVersion().isEqualTo(tC.sdkSeven)&&iJ()&&tH().addEventHandler("viewability",((e,t)=>{t.event===tx.MAXIMIZED&&i9()}))}});var rE=()=>iJ()?ru():void 0,r_=((D=r_||{})[D.CLOSE=0]="CLOSE",D[D.SKIP=1]="SKIP",D),rv=((R={}).SET_CLOSE_BUTTON_VISIBLE="setCloseButtonVisible",R.EMIT_CLOSE_BUTTON_SHOW="emitCloseButtonShow",R.EMIT_CLOSE_BUTTON_CLICK="emitCloseButtonClick",R.SET_CLOSE_BUTTON_HIDDEN="setCloseButtonHidden",R),rh=r_,rS=((y=rS||{}).GRANT_REWARD="GRANT_REWARD",y.FORFEIT_REWARD="FORFEIT_REWARD",y),rT=((L={}).CLOSE_AD="closeAd",L.CLOSE_STOREKIT_OVERLAY="closeStoreKitOverlay",L.ENSURE_REWARD_GRANTED="ensureRewardGranted",L.SET_THEATRE_MODE_ACTIVE="setTheatreModeActive",L.SET_THEATRE_MODE_INACTIVE="setTheatreModeInactive",L),rp=(e=tW(),t=tV(),n=i9,i=i3)=>({closeAd:()=>{n()},setTheatreModeActive:e9({isTheatreModeActive:!0}),setTheatreModeInactive:e9({isTheatreModeActive:!1}),closeStoreKitOverlay:()=>{var e;null==(e=i())||e.close()},ensureRewardGranted:()=>{let n=e.hasExistingEvent({type:"incentivized-event",event:rS.FORFEIT_REWARD}),i=e.hasExistingEvent({type:"incentivized-event",event:rS.GRANT_REWARD});!t.isRewarded()||n||i||e.emit({type:"incentivized-event",event:rS.GRANT_REWARD,fireOnlyOnce:!0})}});const rg={name:ib.PRIVACY_LOGO_SHOW,actions:[{name:iY.SET_PRIVACY_BUTTON_VISIBLE}]},rC={name:ib.PRIVACY_LOGO_HIDE,actions:[{name:iY.SET_PRIVACY_BUTTON_HIDDEN}]},rI=e=>({name:ib.PRIVACY_BOTTOM_DRAWER_OPEN,actions:e?[{name:iY.SET_PRIVACY_DRAWER_OPEN},{name:iY.TRIGGER_VIEWABLE_CHANGE},{name:iP.PAUSE_VIDEO},{name:iW.PAUSE_INTERVALS},{name:iK.STANDBY_TIMERS},{name:i5.INTERRUPT_OVERLAY_VIEW}]:[{name:iY.OPEN_PRIVACY_URL}]}),rA={name:ib.PRIVACY_BOTTOM_DRAWER_CLOSE,actions:[{name:iP.PLAY_VIDEO},{name:iY.SET_PRIVACY_DRAWER_CLOSED},{name:iY.TRIGGER_VIEWABLE_CHANGE},{name:iW.START_INTERVALS},{name:iK.WAKE_TIMERS},{name:i5.RESUME_OVERLAY_VIEW}]},rO={name:ib.OPEN_PRIVACY_PAGE,actions:[{name:iY.OPEN_PRIVACY_URL}]},rm={name:ib.PRODUCT_VIEW_CLOSE,actions:[{name:rd.END_AD_ON_PRODUCT_VIEW_CLOSE}]},rf={name:ib.CLOSE_BUTTON_MOUNT,actions:[{name:rv.SET_CLOSE_BUTTON_VISIBLE}]},rN={name:ib.CLOSE_BUTTON_UNMOUNT,actions:[{name:rv.SET_CLOSE_BUTTON_HIDDEN}]},rD={name:ib.CLOSE_BUTTON_CLICK,actions:[{name:rv.EMIT_CLOSE_BUTTON_CLICK}]},rR={name:ib.CLOSE_BUTTON_WILL_SHOW,actions:[{name:rv.EMIT_CLOSE_BUTTON_SHOW}]},ry={name:ib.CLOSE_PICTURE_IN_PICTURE,actions:[{name:iP.CLOSE_PICTURE_IN_PICTURE}]},rL={name:ib.STOP_THEATRE_MODE,actions:[{name:rT.SET_THEATRE_MODE_INACTIVE}]},rP={name:ib.START_THEATRE_MODE,actions:[{name:rT.SET_THEATRE_MODE_ACTIVE}]};var rb=function(e){return!!e&&"function"==typeof e.getLastChanceEndcardConfig},rw=class extends iw{getTransitions(){return super.getTransitions().concat(rC,rg,rI(this.isFullscreen),rA,rO,ry)}isLastPage(){var e;return!(rb(this)&&this.getLastChanceEndcardConfig().enabled||(null==(e=this.next)?void 0:e.getSceneType())!==iM.closed)}constructor({isFullscreen:e}){super(),this.isFullscreen=e}};const rM={name:ib.MUTE,actions:[{name:iP.MUTE_SOUND},{name:iP.EMIT_MUTED}]},rV={name:ib.UNMUTE,actions:[{name:iP.UN_MUTE_SOUND},{name:iP.EMIT_MUTED}]},rk={name:ib.VIDEO_ERROR,actions:[{name:iP.EMIT_VIDEO_ERROR}]};var rU=e=>{switch(e){case"off":return iV.OFF;case"overlay_view":return iV.SKO;default:return iV.SKPV}},rB=class{getFullScreenClickConfig(){let e;if(this.partialFSCTokenValue)try{e=JSON.parse(this.partialFSCTokenValue)}catch(e){}let t={enabled:this.placementType!==tu.FULLSCREEN||th(this.fullCtaTokenValue),id:this.id,target:[tu.BANNER,tu.MREC].includes(this.placementType)?iV.SKPV:rU(this.skFullCtaTokenValue),ctaUrl:this.ctaButtonUrlTokenValue};return e&&(t.styleData=e),t}constructor({fullCtaTokenValue:e,skFullCtaTokenValue:t,ctaButtonUrlTokenValue:n,id:i,placementType:r,partialFSCTokenValue:a}){this.fullCtaTokenValue=e,this.skFullCtaTokenValue=t,this.ctaButtonUrlTokenValue=n,this.id=i,this.placementType=r,this.partialFSCTokenValue=a}};const rH="scenes-key",rW="gdpr";var rx=(e=tE())=>{let t=e.get(t_.APP_STORE_ID);if(t)return t;let n=e.get(t_.CTA_BUTTON_URL),i=null==n?void 0:n.match(/\/id(\d+)/i);return(null==i?void 0:i[1])?i[1]:void 0},rF=e=>{e.length>0&&((new Image).src=e)},rK=((P=rK||{}).CHECKPOINT_0="checkpoint.0",P.CHECKPOINT_100="checkpoint.100",P.CHECKPOINT_25="checkpoint.25",P.CHECKPOINT_50="checkpoint.50",P.CHECKPOINT_75="checkpoint.75",P.CLICK_URL="clickUrl",P.POSTROLL_CLICK="postroll.click",P.POSTROLL_VIEW="postroll.view",P.VIDEO_CLOSE="video.close",P.VIDEO_LENGTH="video.length",P.VIDEO_MUTE="video.mute",P.VIDEO_UNMUTE="video.unmute",P.REWARD_GRANTED="rewardGranted",P),rG=class{getLogger(e){return this.wrappedService.getLogger(e)}emit(e){this.wrappedService.emit(e)}addEventHandler(e,t){this.wrappedService.addEventHandler(e,t)}removeEventHandler(e,t){this.wrappedService.removeEventHandler(e,t)}getEventHandlers(e){return this.wrappedService.getEventHandlers(e)}hasExistingEvent(e){return this.wrappedService.hasExistingEvent(e)}addToActivity(e){this.wrappedService.addToActivity(e)}clearActivity(){this.wrappedService.clearActivity()}getActivity(e){return this.wrappedService.getActivity(e)}getActivityEvents(){return this.wrappedService.getActivityEvents()}getActivityLogs(){return this.wrappedService.getActivityLogs()}getActivityEventPairs(e,t,n){return this.wrappedService.getActivityEventPairs(e,t,n)}constructor(e){this.wrappedService=e}};const rY=e=>Object.values(rK).includes(e);var rj=class extends rG{emit(e,t=!1,n){let i=this.createEventToEmit(e);i&&(t&&(i.fireOnlyOnce=!0),n&&(i.data=n),this.wrappedService.emit(i))}createEventToEmit(e){return"string"==typeof e&&rY(e)?{type:"tpat",event:e}:"object"==typeof e?e:void 0}},rX=e=>new rj(null!=e?e:tH()),rz=class extends ez{openCTAWithMraid(){var e;this.url&&(null==(e=this.mraidService.getMraid())||e.open(this.url))}openOverlayView(){var e;null==(e=this.storeKitOverlayService)||e.open()}openProductView(){var e;null==(e=this.productViewService)||e.open()}handleOverlayViewCTA(){var e;this.isStoreKitOverlaySupported?this.openOverlayView():(null==(e=this.productViewService)?void 0:e.canOpen())?this.openProductView():this.openCTAWithMraid()}notifyClickEventToEDsp(){let{isClickEventFromIframe:e,url:t}=this;e&&t&&rF(t)}handleProductViewCTA(){var e,t;null!=(e=this.productViewService)&&e.isOpen()||(this.shouldReplaceShowStoreKitOverlay?this.openOverlayView():this.appStoreId&&(null==(t=this.productViewService)?void 0:t.canOpen())?(this.openProductView(),this.notifyClickEventToEDsp()):this.openCTAWithMraid())}invoke(e){let{target:t,url:n,shouldReplaceShowStoreKitOverlay:i,isClickEventFromIframe:r,shouldFireMMP:a=!0}=e;if(a&&this.fireMMPEvents(),this.url=n||this.url,this.shouldReplaceShowStoreKitOverlay=null!=i&&i,this.isClickEventFromIframe=null!=r&&r,this.environmentService.getOperatingSystem()===tg.iOS)switch(t){case iV.OFF:this.openCTAWithMraid();break;case iV.SKO:this.handleOverlayViewCTA();break;case iV.SKPV:default:this.handleProductViewCTA()}else this.openCTAWithMraid()}fireMMPEvents(){var e;let t=null==(e=tU.getValue())?void 0:e.scene;if(!t)return;let n=t.getSceneType(),i=[iM.image,iM.endcard].includes(n),r=n===iM.video,a="shouldSplitVideoEndcardClick"in t&&t.shouldSplitVideoEndcardClick;a||this.tpatReportingService.emit(rK.CLICK_URL,!0),a&&r&&this.tpatReportingService.emit(rK.CLICK_URL,!0),i&&this.tpatReportingService.emit(rK.POSTROLL_CLICK,!0)}static getServiceIdentifier(){return"CallToActionServiceInterface"}constructor(e=td(),t=tM(),n=ri(),i=i3(),r=rc(),a=rx(),s=rX()){super(),this.mraidService=e,this.environmentService=t,this.productViewService=n,this.storeKitOverlayService=i,this.isStoreKitOverlaySupported=r,this.appStoreId=a,this.tpatReportingService=s,this.url="",this.shouldReplaceShowStoreKitOverlay=!1,this.isClickEventFromIframe=!1}},r$=()=>{let e=eX.getInstance(),t=rz.getServiceIdentifier();return e.get(t)},rq=class{getStoreKitOverlayAutoShowConfig(){let e="adv_pref"===this.fullCtaOptionTokenValue,t="false"===this.skOverlayDisableAutoMMPTokenValue;return{enabled:!!rc(this.environmentService,this.placementTypeService)&&void 0!==this.appStoreId&&0!==this.appStoreId.length&&th(this.skOverlayAutoTokenValue)&&e,autoShowDelay:(()=>{var e;let t=parseInt(null!=(e=this.skOverlayDelaySecondsTokenValue)?e:"0",10);return Number.isNaN(t)?0:1e3*Math.max(t,0)})(),isAutoClose:!!this.skOverlayAutoCloseTokenValue&&!["0","-1"].includes(this.skOverlayAutoCloseTokenValue),autoCloseDelay:(()=>{var e;let t=parseInt(null!=(e=this.skOverlayAutoCloseTokenValue)?e:"0",10);return Number.isNaN(t)?5e3:Math.max(5e3,1e3*t)})(),openCallback:t?()=>this.callToActionService().fireMMPEvents():()=>{}}}constructor(e,t,n,i,r,a,s=tM(),o=tV(),l=r$){this.appStoreId=e,this.fullCtaOptionTokenValue=t,this.skOverlayAutoTokenValue=n,this.skOverlayDelaySecondsTokenValue=i,this.skOverlayAutoCloseTokenValue=r,this.skOverlayDisableAutoMMPTokenValue=a,this.environmentService=s,this.placementTypeService=o,this.callToActionService=l}},rZ=class{getAppStoreOnDelayConfig(){var e;let t=Number(null!=(e=this.appStoreOnVideoAutoDelayTokenValue)?e:"0");return{enabled:!(!iJ(this.environmentService)||void 0===this.appStoreId||0===this.appStoreId.length||this.placementService.isInLine())&&!Number.isNaN(t)&&Number.isFinite(t)&&t>0,autoShowDelay:Number.isNaN(t)||!Number.isFinite(t)||t<3e3?3e3:t}}constructor(e,t,n=tM(),i=tV()){this.appStoreOnVideoAutoDelayTokenValue=e,this.appStoreId=t,this.environmentService=n,this.placementService=i}},rQ=e=>{var t;return!!e&&"false"===(null==e||null==(t=e.trim())?void 0:t.toLowerCase())},rJ=class{getStoreKitOverlayAutoShowConfig(){let e=this.isEndcardOnly?this.skOverlayDelaySecondsTokenValue:this.ecSkOverlayDelaySecondsTokenValue,t="false"===this.ecSkOverlayDisableAutoMMPTokenValue&&0===this.endcardIndex;return{enabled:!(!rc(this.environmentService,this.placementTypeService)||!this.appStoreId||rQ(this.skOverlayAutoTokenValue))&&!(this.endcardIndex>0)&&("adv_pref"===this.fullCtaOptionTokenValue||this.isEndcardOnly)&&!!e&&parseInt(e,10)>=0,isAutoClose:!!this.skOverlayAutoCloseTokenValue&&!["0","-1"].includes(this.skOverlayAutoCloseTokenValue),autoShowDelay:(()=>{let t=parseInt(null!=e?e:"5",10);return Number.isNaN(t)?3e3:Math.max(3e3,1e3*t)})(),autoCloseDelay:(()=>{var e;let t=parseInt(null!=(e=this.skOverlayAutoCloseTokenValue)?e:"0",10);return Number.isNaN(t)?5e3:Math.max(5e3,1e3*t)})(),openCallback:t?()=>this.callToActionService().fireMMPEvents():()=>{}}}constructor(e,t,n,i,r,a,s,o,l,c=tM(),d=tV(),u=r$){this.endcardIndex=e,this.isEndcardOnly=t,this.appStoreId=n,this.fullCtaOptionTokenValue=i,this.skOverlayAutoTokenValue=r,this.skOverlayDelaySecondsTokenValue=a,this.ecSkOverlayDelaySecondsTokenValue=s,this.skOverlayAutoCloseTokenValue=o,this.ecSkOverlayDisableAutoMMPTokenValue=l,this.environmentService=c,this.placementTypeService=d,this.callToActionService=u}},r0=class{getAppStoreOnDelayConfig(){var e;let t=Number(null!=(e=this.appStoreOnEndcardAutoDelayTokenValue)?e:"0");return{enabled:!!iJ(this.environmentService)&&void 0!==this.appStoreId&&0!==this.appStoreId.length&&0===this.endcardIndex&&!Number.isNaN(t)&&Number.isFinite(t)&&t>0,autoShowDelay:Number.isNaN(t)||!Number.isFinite(t)||t<3e3?3e3:t}}constructor(e,t,n,i=tM()){this.endcardIndex=e,this.appStoreId=t,this.appStoreOnEndcardAutoDelayTokenValue=n,this.environmentService=i}};const r1=new Intl.NumberFormat("en-US",{notation:"compact",compactDisplay:"short"});var r2=((b=r2||{}).RESOURCE="resource",b.EXCEPTION="exception",b.UNHANDLEDREJECTION="unhandledrejection",b.PLAYABLE="playable",b),r3=((w={}).IMAGE="img",w.VIDEO="video",w),r5=()=>tH(),r4=(e,t=r5())=>{if(!e)return[];try{let t=JSON.parse(e);return Array.isArray(t)?t.slice(0,4):[]}catch(e){t.emit({type:"error-logging",event:r2.RESOURCE,data:{error:{message:"Unable to parse app screenshots"}}})}return[]},r6=class{hasAppMetadata(){return!(!this.appIcon||!this.appName)}getAppRatingCount(){var e;let t=parseInt(null!=(e=this.appRatingCount)?e:"",10);return Number.isInteger(t)&&Number.isFinite(t)?r1.format(t):""}getAppContentRatingImg(){var e,t;return null!=(t={Everyone:"https://cdn-lb.vungle.com/esrb/E.svg","Everyone 10+":"https://cdn-lb.vungle.com/esrb/E10plus.svg",Teen:"https://cdn-lb.vungle.com/esrb/T.svg","Mature 17+":"https://cdn-lb.vungle.com/esrb/M.svg","Adults Only 18+":"https://cdn-lb.vungle.com/esrb/AO.svg"}[null!=(e=this.appContentRating)?e:""])?t:""}getAppDownloadCount(){let{appDownloadCount:e}=this;if(!e)return"";if(/[KMB]/.test(e))return e;e.includes("-")&&([e]=e.split("-"));let t=Number(e=e.replace(/[,+ ]+/g,""));return t?`${new Intl.NumberFormat("en-US",{notation:"compact",maximumFractionDigits:0}).format(t)}+`:""}getAppRating(){var e,t;let n=null!=(t=null!=(e=this.appRating)?e:this.appStoreRating)?t:"4.4",i=n.lastIndexOf("/")+1,r=n.indexOf("-stars.svg"),a=n.substring(i,r);if(a){let e=parseFloat(a);if(!Number.isNaN(e))return e}let s=parseFloat(n);return Number.isNaN(s)?parseFloat("4.4"):s}getAppName(){var e;if(this.appNameEncoded)try{return tp(this.appNameEncoded)}catch(e){}return null!=(e=this.appName)?e:""}getAppDescription(){var e;if(this.appDescriptionEncoded)try{return tp(this.appDescriptionEncoded)}catch(e){}return null!=(e=this.appDescription)?e:""}getAppLongDescription(){var e;if(this.appLongDescriptionEncoded)try{return tp(this.appLongDescriptionEncoded)}catch(e){}return null!=(e=this.appLongDescription)?e:""}getCtaButtonText(){if(this.ctaButtonTextEncoded)try{return tp(this.ctaButtonTextEncoded)}catch(e){}return this.ctaButtonText&&""!==this.ctaButtonText.trim()?this.ctaButtonText:this.hasAppMetadata()&&this.appStoreId?"GET":"Open"}getCtaButtonDelay(){var e;let t=parseInt(null!=(e=this.ctaButtonDelay)?e:"",10);return Number.isInteger(t)&&Number.isFinite(t)?t:0}getCtaButtonUrl(){var e;return null!=(e=this.ctaButtonUrl)?e:""}getAppMetaData(){var e,t;return{enabled:this.hasAppMetadata(),company:this.getAppDescription(),contentRating:null!=(e=this.appContentRating)?e:"",contentRatingImg:this.getAppContentRatingImg(),description:this.getAppLongDescription(),downloads:this.getAppDownloadCount(),icon:null!=(t=this.appIcon)?t:"",isRatingGreaterThanMinimum:this.getAppRating()>=4,minimumAppRating:4,name:this.getAppName(),price:"",rating:this.getAppRating(),ratingCount:this.getAppRatingCount(),screenshots:r4(this.appScreenShots,this.errorLoggingReportingService)}}constructor({ctaButtonUrl:e,ctaButtonText:t,ctaButtonTextEncoded:n,ctaButtonDelay:i,appName:r,appIcon:a,appDescription:s,appRatingCount:o,appLongDescription:l,appContentRating:c,appScreenShots:d,appDownloadCount:u,appRating:E,appStoreRating:_,appStoreId:v,appNameEncoded:h,appDescriptionEncoded:S,appLongDescriptionEncoded:T,errorLoggingReportingService:p=r5()}){this.ctaButtonUrl=e,this.ctaButtonText=t,this.ctaButtonTextEncoded=n,this.ctaButtonDelay=i,this.appName=r,this.appIcon=a,this.appDescription=s,this.appRatingCount=o,this.appLongDescription=l,this.appContentRating=c,this.appScreenShots=d,this.appDownloadCount=u,this.appRating=E,this.appStoreRating=_,this.appStoreId=v,this.appNameEncoded=h,this.appDescriptionEncoded=S,this.appLongDescriptionEncoded=T,this.errorLoggingReportingService=p}};const r8=(e,t=tE(),n=tV())=>({appNameEncoded:t.get(t_.APP_NAME_ENCODED),appStoreId:t.get(t_.APP_STORE_ID),ctaButtonDelay:t.get(t_.DOWNLOAD_BUTTON_DELAY_SECONDS),ctaButtonText:t.get(t_.CTA_BUTTON_TEXT),ctaButtonTextEncoded:t.get(t_.CTA_BUTTON_ENCODED_TEXT),ctaButtonUrl:t.get(t_.CTA_BUTTON_URL),ctaTarget:iV.SKPV,enabled:!1,endcardCloseButtonDelaySeconds:t.get(t_.EC_CLOSE_BUTTON_DELAY_SECONDS),fullCtaTokenValue:t.get(t_.FULL_CTA),hasEndcard:t.has(t_.EC_HTML)||t.has(t_.EC_IMAGE),hasVideo:t.has(t_.MAIN_VIDEO)||t.has(t_.MAIN_STREAM),icon:t.get(t_.APP_ICON),id:e,isFullscreen:n.isFullscreen(),name:t.get(t_.APP_NAME),showECCloseButtonCountDownTokenValue:t.get(t_.SHOW_EC_CLOSE_BUTTON_COUNTDOWN),skCtaOnlyTokenValue:t.get(t_.SK_CTA_ONLY),skFscTokenValue:t.get(t_.SK_FSC),staticEndcardCloseButtonDelaySeconds:t.get(t_.STATIC_EC_CLOSE_BUTTON_DELAY_SECONDS)});var r7=class extends r6{getCloseDelay(){let e=this.hasVideo&&!this.hasEndcard,t=3;return e&&this.endcardCloseButtonDelaySeconds?t=Number(this.endcardCloseButtonDelaySeconds):this.staticEndcardCloseButtonDelaySeconds&&(t=Number(this.staticEndcardCloseButtonDelaySeconds)),Math.min(Math.max(t,1),e?6:30)}getCountDown(){return!this.showECCloseButtonCountDownTokenValue||"true"===this.showECCloseButtonCountDownTokenValue}getLastChanceEndcardConfig(){var e;return{enabled:this.isFullscreen&&this.enabled,id:this.id,appMeta:this.getAppMetaData(),cta:{text:this.getCtaButtonText(),url:this.ctaButtonUrl||"",isPersistent:!1,target:rU(this.skCtaOnlyTokenValue),delay:parseInt(null!=(e=this.ctaButtonDelay)?e:"4",10)},fsc:{enabled:th(this.fullCtaTokenValue),ctaUrl:this.ctaButtonUrl,target:rU(this.skFscTokenValue)},close:{delay:this.getCloseDelay(),style:rh.CLOSE,countdown:this.getCountDown()}}}setLastChanceEndcardConfig(){}constructor({appNameEncoded:e,appStoreId:t,ctaButtonDelay:n,ctaButtonText:i,ctaButtonTextEncoded:r,ctaButtonUrl:a,ctaTarget:s,enabled:o=!1,endcardCloseButtonDelaySeconds:l,fullCtaTokenValue:c,hasEndcard:d,hasVideo:u,icon:E,id:_,isFullscreen:v,name:h,showECCloseButtonCountDownTokenValue:S,skCtaOnlyTokenValue:T,skFscTokenValue:p,staticEndcardCloseButtonDelaySeconds:g},C){super({ctaButtonUrl:a,ctaButtonText:i,ctaButtonTextEncoded:r,ctaButtonDelay:n,appName:h,appIcon:E,appStoreId:t,appNameEncoded:e,errorLoggingReportingService:C}),this.appNameEncoded=e,this.appStoreId=t,this.ctaButtonDelay=n,this.ctaButtonText=i,this.ctaButtonTextEncoded=r,this.ctaButtonUrl=a,this.ctaTarget=null!=s?s:iV.SKPV,this.enabled=o,this.endcardCloseButtonDelaySeconds=l,this.fullCtaTokenValue=c,this.hasEndcard=!!d,this.hasVideo=!!u,this.icon=E,this.id=_,this.isFullscreen=!!v,this.appName=h,this.showECCloseButtonCountDownTokenValue=S,this.skCtaOnlyTokenValue=T,this.skFscTokenValue=p,this.staticEndcardCloseButtonDelaySeconds=g}},r9=class{getCloseButtonConfig(){return{delay:this.getDelay(),style:this.getStyle(),countdown:this.getCountDown()}}constructor({ecCloseButtonDelaySecondsTokenValue:e,staticEcCloseButtonDelaySecondsTokenValue:t,endcardCloseButtonAsSkipTokenValue:n,showECCloseButtonCountDownTokenValue:i,isSecondEndcard:r}){this.getDelay=()=>{let e=0;return this.isSecondEndcard&&this.staticEcCloseButtonDelaySecondsTokenValue?e=Number(this.staticEcCloseButtonDelaySecondsTokenValue):this.ecCloseButtonDelaySecondsTokenValue&&(e=Number(this.ecCloseButtonDelaySecondsTokenValue)),e},this.getStyle=()=>this.isSecondEndcard?rh.CLOSE:th(this.endcardCloseButtonAsSkipTokenValue)?rh.SKIP:rh.CLOSE,this.getCountDown=()=>!this.showECCloseButtonCountDownTokenValue||th(this.showECCloseButtonCountDownTokenValue),this.ecCloseButtonDelaySecondsTokenValue=e,this.staticEcCloseButtonDelaySecondsTokenValue=t,this.endcardCloseButtonAsSkipTokenValue=n,this.showECCloseButtonCountDownTokenValue=i,this.isSecondEndcard=r}},ae=class{getTrackingEventMapConfig(){return{enabled:this.enabled,events:this.events}}constructor(e,t){this.enabled=e,this.events=t}},at=class extends r6{getCallToActionConfig(){return{url:super.getCtaButtonUrl(),text:super.getCtaButtonText(),appMeta:super.getAppMetaData(),delay:super.getCtaButtonDelay(),target:rU(this.skEcCtaOnlyTokenValue)}}constructor({skEcCtaOnlyTokenValue:e,appMetaProviderParams:t}){super(t),this.skEcCtaOnlyTokenValue=e}},an=((M=an||{}).ON_CREATIVE_VIEW="onCreativeView",M.DESTROY_IFRAME="destroyIframe",M.FLUSH_MRAID_EVENTS_PROXY_CALLBACKS="flushMraidEventsProxyCallbacks",M.INIT_CHECKPOINTS="initCheckpoints",M.INIT_OMSDK_HTML_DISPLAY_SERVICE="initOmsdkHtmlDisplayService",M.ON_ENDCARD_CLOSE_BUTTON_WILL_SHOW="closeWillAppear",M.ON_SHOW="onShow",M.FIRE_IF_ENGAGEMENT_IS_USED="fireIfEngagementIsUsed",M);class ai extends iw{getId(){return"closed"}static getInstances(){let e=tV();return e.isBanner()||e.isMrec()||e.isInLine()?[]:[new ai]}getSceneType(){return iM.closed}constructor(){super(),this.addEntryAction({name:rT.ENSURE_REWARD_GRANTED}),this.addEntryAction({name:an.DESTROY_IFRAME}),this.getEntryActions().some((e=>e.name===rT.CLOSE_AD))||this.addEntryAction({name:rT.CLOSE_AD}),this.addTransition(eJ({},rm)),this.addTransition(eJ({},ry))}}var ar=(e=tE(),t=tV())=>!(!t.isMrec()&&!t.isBanner())||th(e.get(t_.START_MUTED))||th(e.get(t_.REAL_START_MUTED)),aa=class{subscribe(e){let t,n=()=>{t&&t.unsubscribe(),this.isUnsubscribed||(this.isUnsubscribed=!0)};return t=this.subscribeFn({next:t=>{this.isUnsubscribed||e.next(t)},error:t=>{var i;this.isUnsubscribed||(null==(i=e.error)||i.call(e,t),n())},complete:()=>{var t;this.isUnsubscribed||(null==(t=e.complete)||t.call(e),n())}}),{unsubscribe:n}}pipe(...e){return e.reduce(((e,t)=>t(e)),this)}constructor(e){this.isUnsubscribed=!1,this.subscribeFn=e}},as=function(e){return t=>new aa((n=>t.subscribe({next:t=>{e(t)&&n.next(t)},error:e=>{var t;return null==(t=n.error)?void 0:t.call(n,e)},complete:()=>{var e;return null==(e=n.complete)?void 0:e.call(n)}})))},ao=(e,t)=>new aa((n=>{let i=(e,t)=>n.next(t);return e.addEventHandler(t,i),{unsubscribe:()=>{e.removeEventHandler(t,i)}}})),al=(e,t,n)=>ao(e,"error-logging").pipe(as((e=>e.event===t&&(!n||e.data.resource_type===n)))),ac=function(){return e=>new aa((t=>{let n=0,i=e.subscribe({next:()=>{n+=1,t.next(n)},error:e=>{var n;return null==(n=t.error)?void 0:n.call(t,e)},complete:()=>{var e;return null==(e=t.complete)?void 0:e.call(t)}});return{unsubscribe:()=>i.unsubscribe()}}))},ad=function(e){return t=>new aa((n=>{let i=null,r=t.subscribe({next:e=>n.next(e),error:e=>{var t;return null==(t=n.error)?void 0:t.call(n,e)},complete:()=>{var e;return null==(e=n.complete)?void 0:e.call(n)}});return i=e.subscribe({next:()=>{var e;null==(e=n.complete)||e.call(n),r.unsubscribe(),null==i||i.unsubscribe()}}),{unsubscribe:()=>{r.unsubscribe(),i.unsubscribe()}}}))},au=(e,t)=>ao(e,"scene-event").pipe(as((e=>e.event===t))),aE=((V=aE||{}).CLICK="CLICK",V.CLICK_METRICS="CLICK_METRICS",V.NEXT_BUTTON_COUNTDOWN_TICK="NEXT_BUTTON_COUNTDOWN_TICK",V.CLOSE_BUTTON_CLICK="CLOSE_BUTTON_CLICK",V.CLOSE_BUTTON_SHOW="CLOSE_BUTTON_SHOW",V.CTA_BUTTON_CLICK="CTA_BUTTON_CLICK",V.CTA_BUTTON_SHOW="CTA_BUTTON_SHOW",V.LAST_CHANCE_ENDCARD_CLOSE="LAST_CHANCE_ENDCARD_CLOSE",V.LAST_CHANCE_ENDCARD_OPEN="LAST_CHANCE_ENDCARD_OPEN",V.LOAD_COMPLETE="LOAD_COMPLETE",V.LOAD_START="LOAD_START",V.NEAR_CLOSE_BUTTON_CLICK="NEAR_CLOSE_BUTTON_CLICK",V.PRELOAD_CANCELLED="PRELOAD_CANCELLED",V.PRELOAD_COMPLETE="PRELOAD_COMPLETE",V.PRELOAD_START="PRELOAD_START",V.SCENE_END="SCENE_END",V.SCENE_START="SCENE_START",V.FORCE_COMPLETE_COUNT_DOWN="FORCE_COMPLETE_COUNT_DOWN",V),a_=(e,t)=>new aa((n=>{let i=null,r=null,a=null;return r=e.subscribe({next:()=>{i=Date.now()}}),a=t.subscribe({next:()=>{var e;null!=i&&(n.next(Date.now()-i),null==r||r.unsubscribe(),null==a||a.unsubscribe(),null==(e=n.complete)||e.call(n))}}),{unsubscribe:()=>{null==r||r.unsubscribe(),null==a||a.unsubscribe()}}})),av=function(e){return t=>new aa((n=>{let i=e,r=t.subscribe({next:e=>{var t;i>0&&(n.next(e),i-=1),0===i&&(null==(t=n.complete)||t.call(n))},error:e=>{var t;return null==(t=n.error)?void 0:t.call(n,e)},complete:()=>{var e;return null==(e=n.complete)?void 0:e.call(n)}});return{unsubscribe:()=>r.unsubscribe()}}))},ah=(e,t,n)=>new aa((i=>{let r=a_(e,t).subscribe({next:e=>{var t;i.next(e),null==(t=i.complete)||t.call(i)}}),a=n.subscribe({next:()=>{var e;i.next(0),null==(e=i.complete)||e.call(i)}});return{unsubscribe:()=>{r.unsubscribe(),a.unsubscribe()}}})),aS=(e,t,n)=>new aa((i=>{let r=0,a=null,s=t.subscribe({next:()=>{var e;i.next(r),null==(e=i.complete)||e.call(i),null==a||a.unsubscribe(),s.unsubscribe()}}),o=e.subscribe({next:()=>{a=n.subscribe({next:()=>{r+=1},error:e=>{var t;return null==(t=i.error)?void 0:t.call(i,e)}})}});return{unsubscribe:()=>{null==a||a.unsubscribe(),o.unsubscribe()}}})),aT=function(e){return t=>new aa((n=>{let i={next:e=>n.next(e),error:e=>{var t;return null==(t=n.error)?void 0:t.call(n,e)},complete:()=>{var e;return null==(e=n.complete)?void 0:e.call(n)}};t.subscribe({next:t=>{e(t).subscribe(i)},error:e=>{var t;return null==(t=n.error)?void 0:t.call(n,e)}})}))},ap=function(e){return t=>new aa((n=>{let i=0;return t.subscribe({next:t=>{try{let r=e(t,i);n.next(r),i+=1}catch(e){var r;null==(r=n.error)||r.call(n,e)}},error:e=>{var t;return null==(t=n.error)?void 0:t.call(n,e)},complete:()=>{var e;return null==(e=n.complete)?void 0:e.call(n)}})}))},ag=function(e){return t=>new aa((n=>{let i=!1,r=t.subscribe({next:e=>{i=!0,n.next(e)},error:e=>{var t;return null==(t=n.error)?void 0:t.call(n,e)},complete:()=>{var t;i||n.next(e),null==(t=n.complete)||t.call(n)}});return{unsubscribe:()=>r.unsubscribe()}}))},aC=e=>au(e,aE.CLOSE_BUTTON_SHOW).pipe(aT((()=>au(e,aE.CLICK).pipe(ap((()=>!0))))),ad(au(e,aE.SCENE_END)),ag(!1));const aI="persistent-simple-cta",aA="mute-button",aO="mute-button-icon",am="#555FFF",af=3e3,aN="close-or-skip-button",aD="countdown",aR="last-chance-endcard-next-button",ay="last-chance-endcard-cta",aL="persistent-rich-cta-button",aP="next-button",ab="privacy-drawer",aw="shield-icon",aM=Symbol("source"),aV=e=>"scene-event"===e.type&&null!=e.event;var ak=class extends rG{emit(e){let t=this.getReportableEvent(e);t&&this.wrappedService.emit(t)}getEventCount(e){let t=this.getReportableEvent(e);return t?this.wrappedService.getActivityEvents().filter((e=>"event"===e.activity.type&&"scene-event"===e.activity.eventType&&e.activity.name===t.event&&(""===t.data.scene_id||e.activity.data.scene_id===t.data.scene_id)&&e.activity.data.scene_type===t.data.scene_type)).length:0}getReportableEvent(e){if(aV(e))return e;let t=this.injectedGetCurrentScene();return t?{type:"scene-event",event:e,data:{scene_id:t.getId(),scene_type:t.getSceneType()}}:void 0}constructor(e,t=tB){super(e),this.injectedGetCurrentScene=t}},aU=(e,t=tB)=>new ak(null!=e?e:tH(),t);const aB=e=>{let t=document.querySelector(`#${aN}`);if(null===t)return!1;let{clientX:n,clientY:i}=e,{top:r,right:a,bottom:s,left:o}=t.getBoundingClientRect();return(n<o&&n>=o-30||n>a&&n<=a+30)&&i>=r-30&&i<=s+30||(i<r&&i>=r-30||i>s&&i<=s+30)&&n>=o-30&&n<=a+30},aH=e=>{let t=window.innerWidth-75,n=75;return e.clientX>=t&&e.clientY<=n},aW=(e,t=aU())=>{if(void 0===e)return;let n={clientX:"touches"in e?e.touches[0].clientX:e.clientX,clientY:"touches"in e?e.touches[0].clientY:e.clientY};(document.querySelector(`#${aN}`)?aB(n):aH(n))&&t.emit(aE.NEAR_CLOSE_BUTTON_CLICK)},ax=[aA,aN,aw,ab],aF=(e,t)=>{if(e instanceof Element){var n;let i=null!=(n=e.getAttribute("id"))?n:"";return!t.includes(i)&&("body"===e.tagName.toLowerCase()||aF(e.parentElement,t))}return!0},aK=(e,t,n=tB())=>{let{clientX:i,clientY:r}="touches"in e?e.touches[0]:e;t.emit({type:"scene-event",event:aE.CLICK,data:{scene_id:n.getId(),scene_type:n.getSceneType(),click_coordinates:{x:i,y:r},click_target:e.target}})},aG=(e,t=aU)=>{let n=t();aK(e,n),aW(e,n)};var aY=(e,t)=>au(e,aE.CLICK).pipe(ad(t),as((e=>{var t;return aF(null==(t=e.data)?void 0:t.click_target,ax)})),ac(),ag(0)),aj=e=>ah(au(e,aE.LAST_CHANCE_ENDCARD_OPEN),au(e,aE.LAST_CHANCE_ENDCARD_CLOSE),au(e,aE.SCENE_END)),aX=(...e)=>new aa((t=>{let n=[],i=()=>{n.forEach((e=>e()))},r=e=>{var n;t.next(e),null==(n=t.complete)||n.call(t),i()},a=e=>{var n;return null==(n=t.error)?void 0:n.call(t,e)},s=()=>{var e;return null==(e=t.complete)?void 0:e.call(t)};e.forEach((e=>{let{unsubscribe:t}=e.subscribe({next:r,error:a,complete:s});n.push(t)}))})),az=e=>aX(au(e,aE.SCENE_END).pipe(ap((()=>!1))),au(e,aE.LAST_CHANCE_ENDCARD_OPEN).pipe(aT((()=>aY(e,au(e,aE.LAST_CHANCE_ENDCARD_CLOSE)))),ap((e=>e>0)),ag(!1))),a$=e=>aS(au(e,aE.SCENE_START),aX(au(e,aE.CLOSE_BUTTON_SHOW),au(e,aE.SCENE_END)),au(e,aE.NEAR_CLOSE_BUTTON_CLICK)),aq=(e=tW(),t=!1)=>{let n=aU(e),i=a_(au(n,aE.SCENE_START),au(n,aE.SCENE_END)),r=au(n,aE.CLICK).pipe(av(1)),a=ah(au(n,aE.SCENE_START),r,au(n,aE.SCENE_END)),s=aS(au(n,aE.CLOSE_BUTTON_SHOW).pipe(av(1)),au(n,aE.SCENE_END),au(n,aE.NEAR_CLOSE_BUTTON_CLICK)),o=ah(au(n,aE.CLOSE_BUTTON_SHOW),au(n,aE.CLOSE_BUTTON_CLICK),au(n,aE.SCENE_END)),l=aC(n),c={click_count:aY(n,au(n,aE.SCENE_END)),close_button_idle_time:o,duration:i,first_click:a,interaction_after_close_button_visible:l,near_click_count_after_close_button_appears:s,near_click_count_before_close_button_appears:a$(n)};return t&&(c.last_chance_endcard_duration=aj(n),c.last_chance_endcard_clicked=az(n)),c},aZ=(e,t)=>ao(e,"video").pipe(as((e=>e.event===t))),aQ=((k=aQ||{}).BANDWIDTH_ESTIMATION="bandwidthEstimation",k.CAN_PLAY_THROUGH="canplaythrough",k.CLOSE="close",k.DURATION_CHANGE="durationchange",k.ENDED="ended",k.ERROR="error",k.HLS_LEVEL_PLAYLIST_LOADED="hlsLevelPlaylistLoaded",k.HLS_LEVEL_SWITCHED="hlsLevelSwitched",k.HLS_VIDEO_STALLED="hlsVideoStalled",k.MUTE="mute",k.PAUSE="pause",k.PLAY="play",k.PROGRESS="progress",k.SUSPEND="suspend",k.TIME_UPDATE="timeupdate",k.UNMUTE="unmute",k.WAITING="waiting",k),aJ=(e,t)=>{let n=Number(t.incentivizedCloseButtonDelaySeconds);return!t.isIncentiveTiedToCloseButtonDelay||Number.isNaN(n)||n>e?.8*e:.8*n},a0=((U=a0||{}).PROGRESS="progress",U.VIDEO_LENGTH="videoLength",U.VIDEO_REACHED_DURATION="videoReachedDuration",U),a1=(e,t)=>0===t?0:t-e<=.5?4:Math.floor(e/t*4);const a2=()=>tH(),a3=()=>tH(),a5=()=>tH(),a4=(e,t,n)=>{td().getMraidBridgeExt()&&t>0&&e>0&&a3().emit({type:"videoViewed",event:a0.VIDEO_LENGTH,data:{current_time:e,duration:t,seconds:n},fireOnlyOnce:!0})},a6=(e,t,n)=>{let i=a1(e,t),r=a3();4===i&&r.emit({type:"videoViewed",event:a0.VIDEO_REACHED_DURATION,data:{current_time:e,duration:t,seconds:n},fireOnlyOnce:!0})},a8=(e,t,n)=>{let i=a3();i.getActivityEvents().some((e=>e.activity.name===a0.PROGRESS&&e.activity.data.seconds>=n))||i.emit({type:"videoViewed",event:a0.PROGRESS,data:{current_time:e,duration:t,seconds:n}}),a4(e,t,n),a6(e,t,n)};var a7=(e,t,n=td(),i=rX())=>{var r,a,s,o;let l=n.getMraidBridgeExt();if(!l)return;let c=Math.floor(1e3*Math.max(null!=(s=null==(r=t.data)?void 0:r.current_time)?s:0,.1)),d=Math.floor(1e3*(null!=(o=null==(a=t.data)?void 0:a.duration)?o:0));switch(t.event){case a0.PROGRESS:l.notifyEventValuePairEvent("videoViewed",c);break;case a0.VIDEO_REACHED_DURATION:l.notifyEventValuePairEvent("videoViewed",d);break;case a0.VIDEO_LENGTH:l.notifyEventValuePairEvent("videoLength",d),i.emit(rK.VIDEO_LENGTH,!0)}};const a9=[{currentTime:.1,timeout:0},{currentTime:2,timeout:2e3},{currentTime:3,timeout:1e3},{currentTime:4,timeout:1e3},{currentTime:5,timeout:1e3}],se=(e,t)=>[rK.CHECKPOINT_0,rK.CHECKPOINT_25,rK.CHECKPOINT_50,rK.CHECKPOINT_75,rK.CHECKPOINT_100][Math.floor(e/t*4)],st=(e,t=iF(),n=rX())=>{let i=a9[e],r=a9.length-1;t.getNewTimer(i.timeout,(()=>{n.emit(se(i.currentTime,5),!0,{current_time:i.currentTime,duration:5}),a8(i.currentTime,5,Math.round(i.currentTime)),e!==r&&st(e+1)})).start()};var sn=(e,t)=>ao(e,"incentivized-event").pipe(as((e=>e.event===t))),si=e=>new aa((t=>{let n=()=>{var e;t.next(rS.FORFEIT_REWARD),null==(e=t.complete)||e.call(t)};sn(e,rS.FORFEIT_REWARD).subscribe({next:n,error:e=>{var n;return null==(n=t.error)?void 0:n.call(t,e)}}),e.hasExistingEvent({type:"incentivized-event",event:rS.FORFEIT_REWARD})&&n()})),sr=e=>new aa((t=>{var n;e.hasExistingEvent({type:"incentivized-event",event:rS.GRANT_REWARD})&&(t.next(rS.FORFEIT_REWARD),null==(n=t.complete)||n.call(t))})),sa=(e,t,n)=>new aa((i=>{let r=t.getNewTimer(e,(()=>{var e;i.next(n),null==(e=i.complete)||e.call(i)}));return r.start(),{unsubscribe:()=>{r.destroy()}}})),ss=(e,t,n=tW(),i=iF())=>new aa((r=>{let a=(e===iM.video?aZ(n,aQ.PLAY).pipe(av(1),aT((e=>{var r;return aX(sa(1e3*aJ(null==(r=e.data)?void 0:r.duration,t),i,rS.GRANT_REWARD),au(n,aE.SCENE_END).pipe(ap((()=>rS.FORFEIT_REWARD))),si(n),sr(n))}))):au(n,aE.SCENE_START).pipe(aT((()=>aX(sa(1e3*aJ(5,t),i,rS.GRANT_REWARD),au(n,aE.SCENE_END).pipe(ap((()=>rS.FORFEIT_REWARD))),si(n),sr(n)))))).subscribe({next:e=>{var t;e===rS.GRANT_REWARD&&n.emit({type:"incentivized-event",event:rS.GRANT_REWARD,fireOnlyOnce:!0}),null==(t=r.complete)||t.call(r)},error:e=>{var t;return null==(t=r.error)?void 0:t.call(r,e)}});return{unsubscribe:()=>{a.unsubscribe()}}})),so=e=>{let t=null,n=au(e,aE.PRELOAD_START),i=au(e,aE.PRELOAD_COMPLETE),r=au(e,aE.PRELOAD_CANCELLED),a=au(e,aE.SCENE_END);return new aa((e=>{let s=n.subscribe({next:()=>{t=Date.now()}}),o=i.subscribe({next:()=>{var n;null!==t&&(e.next(Date.now()-t),null==(n=e.complete)||n.call(e))}}),l=()=>{var n;e.next(null!=t?-1*(Date.now()-t):0),null==(n=e.complete)||n.call(e)},c=r.subscribe({next:l}),d=a.subscribe({next:l});return{unsubscribe:()=>{s.unsubscribe(),o.unsubscribe(),c.unsubscribe(),d.unsubscribe()}}}))},sl=((B={}).NESTED_IFRAME_WITH_CORS="cors",B.NESTED_IFRAME_WITHOUT_CORS="basic",B),sc=()=>tH(),sd=((H=sd||{}).NESTED_IFRAME_TYPE="NESTED_IFRAME_TYPE",H),su=(e=tB,t=sc())=>{let n=t.getActivityEvents().filter((t=>{var n,i;return"event"===t.activity.type&&"iframe"===t.activity.eventType&&t.activity.name===sd.NESTED_IFRAME_TYPE&&(null==(n=t.activity.data)?void 0:n.scene_id)===(null==(i=e())?void 0:i.getId())})).map((e=>{var t;return null==(t=e.activity.data)?void 0:t.nested_iframe_type}));return n.includes(sl.NESTED_IFRAME_WITH_CORS)?sl.NESTED_IFRAME_WITH_CORS:n.includes(sl.NESTED_IFRAME_WITHOUT_CORS)?sl.NESTED_IFRAME_WITHOUT_CORS:""},sE=(e,t,n=tB)=>new aa((i=>{let r=au(e,aE.SCENE_END).subscribe({next:()=>{var e;i.next(su(n,t)),null==(e=i.complete)||e.call(i)}});return{unsubscribe:()=>{r.unsubscribe()}}})),s_=(e,t=!1,n=tW(),i=iF())=>{let r=aU(n),a=al(n,r2.PLAYABLE).pipe(ac()).pipe(ad(au(r,aE.SCENE_END))),s=ah(au(r,aE.LOAD_START),au(r,aE.LOAD_COMPLETE),au(r,aE.SCENE_END)),o=tt(eJ({},aq(n,t)),{error_count:a,iframe_type:sE(r,n),load_duration:s,preload_duration:so(r)});return e.enabled&&(o.grant_reward=ss(iM.endcard,e,n,i)),o},sv=(e,t)=>({ctaButtonUrl:e.get(t_.CTA_BUTTON_URL),ctaButtonText:e.get(t_.CTA_BUTTON_TEXT),ctaButtonTextEncoded:e.get(t_.CTA_BUTTON_ENCODED_TEXT),ctaButtonDelay:e.get(t_.DOWNLOAD_BUTTON_DELAY_SECONDS),appName:e.get(t_.APP_NAME),appIcon:e.get(t_.APP_ICON),appDescription:e.get(t_.APP_DESCRIPTION),appRatingCount:e.get(t_.APP_RATING_COUNT),appLongDescription:e.get(t_.APP_LONG_DESCRIPTION),appContentRating:e.get(t_.APP_CONTENT_RATING),appScreenShots:e.get(t_.APP_SCREENSHOTS),appDownloadCount:e.get(t_.APP_DOWNLOAD_COUNT),appRating:e.get(t_.APP_RATING),appStoreRating:e.get(t_.APP_STORE_RATING),appStoreId:e.get(t_.APP_STORE_ID),appNameEncoded:e.get(t_.APP_NAME_ENCODED),appDescriptionEncoded:e.get(t_.APP_DESCRIPTION_ENCODED),appLongDescriptionEncoded:e.get(t_.APP_LONG_DESCRIPTION_ENCODED),errorLoggingReportingService:t}),sh=class{getIncentivizedConfig(){return{enabled:this.enabled,incentivizedCloseButtonDelaySeconds:this.incentivizedCloseButtonDelaySeconds,isIncentiveTiedToCloseButtonDelay:this.isIncentiveTiedToCloseButtonDelay}}constructor({enabled:e=!1,incentivizedCloseButtonDelaySeconds:t,isIncentiveTiedToCloseButtonDelay:n=!1}){this.enabled=e,this.incentivizedCloseButtonDelaySeconds=t,this.isIncentiveTiedToCloseButtonDelay=n}},sS={},sT=function(e,t,n,i,r){var a=new Worker(sS[t]||(sS[t]=URL.createObjectURL(new Blob([e+';addEventListener("error",function(e){e=e.error;postMessage({$e$:[e.message,e.code,e.stack]})})'],{type:"text/javascript"}))));return a.onmessage=function(e){var t=e.data,n=t.$e$;if(n){var i=Error(n[0]);i.code=n[1],i.stack=n[2],r(i,null)}else r(null,t)},a.postMessage(n,i),a},sp=Uint8Array,sg=Uint16Array,sC=Int32Array,sI=new sp([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),sA=new sp([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),sO=new sp([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),sm=function(e,t){for(var n=new sg(31),i=0;i<31;++i)n[i]=t+=1<<e[i-1];var r=new sC(n[30]);for(i=1;i<30;++i)for(var a=n[i];a<n[i+1];++a)r[a]=a-n[i]<<5|i;return{b:n,r:r}},sf=sm(sI,2),sN=sf.b,sD=sf.r;sN[28]=258,sD[258]=28;for(var sR=sm(sA,0),sy=sR.b,sL=sR.r,sP=new sg(32768),sb=0;sb<32768;++sb){var sw=(43690&sb)>>1|(21845&sb)<<1;sw=(61680&(sw=(52428&sw)>>2|(13107&sw)<<2))>>4|(3855&sw)<<4,sP[sb]=((65280&sw)>>8|(255&sw)<<8)>>1}var sM=function(e,t,n){for(var i,r=e.length,a=0,s=new sg(t);a<r;++a)e[a]&&++s[e[a]-1];var o=new sg(t);for(a=1;a<t;++a)o[a]=o[a-1]+s[a-1]<<1;if(n){i=new sg(1<<t);var l=15-t;for(a=0;a<r;++a)if(e[a])for(var c=a<<4|e[a],d=t-e[a],u=o[e[a]-1]++<<d,E=u|(1<<d)-1;u<=E;++u)i[sP[u]>>l]=c}else for(a=0,i=new sg(r);a<r;++a)e[a]&&(i[a]=sP[o[e[a]-1]++]>>15-e[a]);return i},sV=new sp(288);for(sb=0;sb<144;++sb)sV[sb]=8;for(sb=144;sb<256;++sb)sV[sb]=9;for(sb=256;sb<280;++sb)sV[sb]=7;for(sb=280;sb<288;++sb)sV[sb]=8;var sk=new sp(32);for(sb=0;sb<32;++sb)sk[sb]=5;var sU=sM(sV,9,0),sB=sM(sV,9,1),sH=sM(sk,5,0),sW=sM(sk,5,1),sx=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},sF=function(e,t,n){var i=t/8|0;return(e[i]|e[i+1]<<8)>>(7&t)&n},sK=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(7&t)},sG=function(e){return(e+7)/8|0},sY=function(e,t,n){return(null==t||t<0)&&(t=0),(null==n||n>e.length)&&(n=e.length),new sp(e.subarray(t,n))},sj=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],sX=function(e,t,n){var i=Error(t||sj[e]);if(i.code=e,Error.captureStackTrace&&Error.captureStackTrace(i,sX),!n)throw i;return i},sz=function(e,t,n,i){var r=e.length,a=i?i.length:0;if(!r||t.f&&!t.l)return n||new sp(0);var s=!n,o=s||2!=t.i,l=t.i;s&&(n=new sp(3*r));var c=function(e){var t=n.length;if(e>t){var i=new sp(Math.max(2*t,e));i.set(n),n=i}},d=t.f||0,u=t.p||0,E=t.b||0,_=t.l,v=t.d,h=t.m,S=t.n,T=8*r;do{if(!_){d=sF(e,u,1);var p=sF(e,u+1,3);if(u+=3,!p){var g=e[(L=sG(u)+4)-4]|e[L-3]<<8,C=L+g;if(C>r){l&&sX(0);break}o&&c(E+g),n.set(e.subarray(L,C),E),t.b=E+=g,t.p=u=8*C,t.f=d;continue}if(1==p)_=sB,v=sW,h=9,S=5;else if(2==p){var A=sF(e,u,31)+257,I=sF(e,u+10,15)+4,O=A+sF(e,u+5,31)+1;u+=14;for(var m=new sp(O),f=new sp(19),N=0;N<I;++N)f[sO[N]]=sF(e,u+3*N,7);u+=3*I;var D=sx(f),R=(1<<D)-1,y=sM(f,D,1);for(N=0;N<O;){var L,P=y[sF(e,u,R)];if(u+=15&P,(L=P>>4)<16)m[N++]=L;else{var b=0,M=0;for(16==L?(M=3+sF(e,u,3),u+=2,b=m[N-1]):17==L?(M=3+sF(e,u,7),u+=3):18==L&&(M=11+sF(e,u,127),u+=7);M--;)m[N++]=b}}var V=m.subarray(0,A),w=m.subarray(A);h=sx(V),S=sx(w),_=sM(V,h,1),v=sM(w,S,1)}else sX(1);if(u>T){l&&sX(0);break}}o&&c(E+131072);for(var U=(1<<h)-1,k=(1<<S)-1,B=u;;B=u){var H=(b=_[sK(e,u)&U])>>4;if((u+=15&b)>T){l&&sX(0);break}if(b||sX(2),H<256)n[E++]=H;else{if(256==H){B=u,_=null;break}var x=H-254;if(H>264){var W=sI[N=H-257];x=sF(e,u,(1<<W)-1)+sN[N],u+=W}var F=v[sK(e,u)&k],Y=F>>4;F||sX(3),u+=15&F;w=sy[Y];if(Y>3){W=sA[Y];w+=sK(e,u)&(1<<W)-1,u+=W}if(u>T){l&&sX(0);break}o&&c(E+131072);var K=E+x;if(E<w){var G=a-w,X=Math.min(w,K);for(G+E<0&&sX(3);E<X;++E)n[E]=i[G+E]}for(;E<K;++E)n[E]=n[E-w]}}t.l=_,t.p=B,t.b=E,t.f=d,_&&(d=1,t.m=h,t.d=v,t.n=S)}while(!d);return E!=n.length&&s?sY(n,0,E):n.subarray(0,E)},s$=function(e,t,n){n<<=7&t;var i=t/8|0;e[i]|=n,e[i+1]|=n>>8},sq=function(e,t,n){n<<=7&t;var i=t/8|0;e[i]|=n,e[i+1]|=n>>8,e[i+2]|=n>>16},sZ=function(e,t){for(var n=[],i=0;i<e.length;++i)e[i]&&n.push({s:i,f:e[i]});var r=n.length,a=n.slice();if(!r)return{t:s5,l:0};if(1==r){var s=new sp(n[0].s+1);return s[n[0].s]=1,{t:s,l:1}}n.sort((function(e,t){return e.f-t.f})),n.push({s:-1,f:25001});var o=n[0],l=n[1],c=0,d=1,u=2;for(n[0]={s:-1,f:o.f+l.f,l:o,r:l};d!=r-1;)o=n[n[c].f<n[u].f?c++:u++],l=n[c!=d&&n[c].f<n[u].f?c++:u++],n[d++]={s:-1,f:o.f+l.f,l:o,r:l};var E=a[0].s;for(i=1;i<r;++i)a[i].s>E&&(E=a[i].s);var _=new sg(E+1),v=sQ(n[d-1],_,0);if(v>t){i=0;var h=0,S=v-t,T=1<<S;for(a.sort((function(e,t){return _[t.s]-_[e.s]||e.f-t.f}));i<r;++i){var p=a[i].s;if(!(_[p]>t))break;h+=T-(1<<v-_[p]),_[p]=t}for(h>>=S;h>0;){var g=a[i].s;_[g]<t?h-=1<<t-_[g]++-1:++i}for(;i>=0&&h;--i){var C=a[i].s;_[C]==t&&(--_[C],++h)}v=t}return{t:new sp(_),l:v}},sQ=function(e,t,n){return-1==e.s?Math.max(sQ(e.l,t,n+1),sQ(e.r,t,n+1)):t[e.s]=n},sJ=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new sg(++t),i=0,r=e[0],a=1,s=function(e){n[i++]=e},o=1;o<=t;++o)if(e[o]==r&&o!=t)++a;else{if(!r&&a>2){for(;a>138;a-=138)s(32754);a>2&&(s(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(s(r),--a;a>6;a-=6)s(8304);a>2&&(s(a-3<<5|8208),a=0)}for(;a--;)s(r);a=1,r=e[o]}return{c:n.subarray(0,i),n:t}},s0=function(e,t){for(var n=0,i=0;i<t.length;++i)n+=e[i]*t[i];return n},s1=function(e,t,n){var i=n.length,r=sG(t+2);e[r]=255&i,e[r+1]=i>>8,e[r+2]=255^e[r],e[r+3]=255^e[r+1];for(var a=0;a<i;++a)e[r+a+4]=n[a];return 8*(r+4+i)},s2=function(e,t,n,i,r,a,s,o,l,c,d){s$(t,d++,n),++r[256];for(var u,E,_,v,h=sZ(r,15),S=h.t,T=h.l,p=sZ(a,15),g=p.t,C=p.l,A=sJ(S),I=A.c,O=A.n,m=sJ(g),f=m.c,N=m.n,D=new sg(19),R=0;R<I.length;++R)++D[31&I[R]];for(R=0;R<f.length;++R)++D[31&f[R]];for(var y=sZ(D,7),L=y.t,P=y.l,b=19;b>4&&!L[sO[b-1]];--b);var M=c+5<<3,V=s0(r,sV)+s0(a,sk)+s,w=s0(r,S)+s0(a,g)+s+14+3*b+s0(D,L)+2*D[16]+3*D[17]+7*D[18];if(l>=0&&M<=V&&M<=w)return s1(t,d,e.subarray(l,l+c));if(s$(t,d,1+(w<V)),d+=2,w<V){u=sM(S,T,0),E=S,_=sM(g,C,0),v=g;var U=sM(L,P,0);s$(t,d,O-257),s$(t,d+5,N-1),s$(t,d+10,b-4),d+=14;for(R=0;R<b;++R)s$(t,d+3*R,L[sO[R]]);d+=3*b;for(var k=[I,f],B=0;B<2;++B){var H=k[B];for(R=0;R<H.length;++R){var x=31&H[R];s$(t,d,U[x]),d+=L[x],x>15&&(s$(t,d,H[R]>>5&127),d+=H[R]>>12)}}}else u=sU,E=sV,_=sH,v=sk;for(R=0;R<o;++R){var W=i[R];if(W>255){sq(t,d,u[(x=W>>18&31)+257]),d+=E[x+257],x>7&&(s$(t,d,W>>23&31),d+=sI[x]);var F=31&W;sq(t,d,_[F]),d+=v[F],F>3&&(sq(t,d,W>>5&8191),d+=sA[F])}else sq(t,d,u[W]),d+=E[W]}return sq(t,d,u[256]),d+E[256]},s3=new sC([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),s5=new sp(0),s4=function(e,t,n,i,r,a){var s=a.z||e.length,o=new sp(i+s+5*(1+Math.ceil(s/7e3))+r),l=o.subarray(i,o.length-r),c=a.l,d=7&(a.r||0);if(t){d&&(l[0]=a.r>>3);for(var u=s3[t-1],E=u>>13,_=8191&u,v=(1<<n)-1,h=a.p||new sg(32768),S=a.h||new sg(v+1),T=Math.ceil(n/3),p=2*T,g=function(t){return(e[t]^e[t+1]<<T^e[t+2]<<p)&v},C=new sC(25e3),A=new sg(288),I=new sg(32),O=0,m=0,f=a.i||0,N=0,D=a.w||0,R=0;f+2<s;++f){var y=g(f),L=32767&f,P=S[y];if(h[L]=P,S[y]=L,D<=f){var b=s-f;if((O>7e3||N>24576)&&(b>423||!c)){d=s2(e,l,0,C,A,I,m,N,R,f-R,d),N=O=m=0,R=f;for(var M=0;M<286;++M)A[M]=0;for(M=0;M<30;++M)I[M]=0}var V=2,w=0,U=_,k=L-P&32767;if(b>2&&y==g(f-k))for(var B=Math.min(E,b)-1,H=Math.min(32767,f),x=Math.min(258,b);k<=H&&--U&&L!=P;){if(e[f+V]==e[f+V-k]){for(var W=0;W<x&&e[f+W]==e[f+W-k];++W);if(W>V){if(V=W,w=k,W>B)break;var F=Math.min(k,W-2),Y=0;for(M=0;M<F;++M){var K=f-k+M&32767,G=K-h[K]&32767;G>Y&&(Y=G,P=K)}}}P=h[L=P],k+=L-P&32767}if(w){C[N++]=268435456|sD[V]<<18|sL[w];var X=31&sD[V],J=31&sL[w];m+=sI[X]+sA[J],++A[257+X],++I[J],D=f+V,++O}else C[N++]=e[f],++A[e[f]]}}for(f=Math.max(f,D);f<s;++f)C[N++]=e[f],++A[e[f]];d=s2(e,l,c,C,A,I,m,N,R,f-R,d),c||(a.r=7&d|l[d/8|0]<<3,d-=7,a.h=S,a.p=h,a.i=f,a.w=D)}else{for(f=a.w||0;f<s+c;f+=65535){var j=f+65535;j>=s&&(l[d/8|0]=c,j=s),d=s1(l,d+1,e.subarray(f,j))}a.i=s}return sY(o,0,i+sG(d)+r)},s6=function(){for(var e=new Int32Array(256),t=0;t<256;++t){for(var n=t,i=9;--i;)n=(1&n&&-306674912)^n>>>1;e[t]=n}return e}(),s8=function(){var e=1,t=0;return{p:function(n){for(var i=e,r=t,a=0|n.length,s=0;s!=a;){for(var o=Math.min(s+2655,a);s<o;++s)r+=i+=n[s];i=(65535&i)+15*(i>>16),r=(65535&r)+15*(r>>16)}e=i,t=r},d:function(){return(255&(e%=65521))<<24|(65280&e)<<8|(255&(t%=65521))<<8|t>>8}}},s7=function(e,t,n,i,r){if(!r&&(r={l:1},t.dictionary)){var a=t.dictionary.subarray(-32768),s=new sp(a.length+e.length);s.set(a),s.set(e,a.length),e=s,r.w=a.length}return s4(e,null==t.level?6:t.level,null==t.mem?r.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):20:12+t.mem,n,i,r)},s9=function(e,t){var n={};for(var i in e)n[i]=e[i];for(var i in t)n[i]=t[i];return n},oe=function(e,t,n){for(var i=e(),r=e.toString(),a=r.slice(r.indexOf("[")+1,r.lastIndexOf("]")).replace(/\s+/g,"").split(","),s=0;s<i.length;++s){var o=i[s],l=a[s];if("function"==typeof o){t+=";"+l+"=";var c=o.toString();if(o.prototype)if(-1!=c.indexOf("[native code]")){var d=c.indexOf(" ",8)+1;t+=c.slice(d,c.indexOf("(",d))}else for(var u in t+=c,o.prototype)t+=";"+l+".prototype."+u+"="+o.prototype[u].toString();else t+=c}else n[l]=o}return t},ot=[],on=function(e){var t=[];for(var n in e)e[n].buffer&&t.push((e[n]=new e[n].constructor(e[n])).buffer);return t},oi=function(e,t,n,i){if(!ot[n]){for(var r="",a={},s=e.length-1,o=0;o<s;++o)r=oe(e[o],r,a);ot[n]={c:oe(e[s],r,a),e:a}}var l=s9({},ot[n].e);return sT(ot[n].c+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+t.toString()+"}",n,l,on(l),i)},or=function(e){return postMessage(e,[e.buffer])},oa=function(e){return e&&{out:e.size&&new sp(e.size),dictionary:e.dictionary}},os=function(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0},oo=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},ol=function(e){(31!=e[0]||139!=e[1]||8!=e[2])&&sX(6,"invalid gzip data");var t=e[3],n=10;4&t&&(n+=2+(e[10]|e[11]<<8));for(var i=(t>>3&1)+(t>>4&1);i>0;i-=!e[n++]);return n+(2&t)},oc=function(e){var t=e.length;return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0},od=function(e,t){return(8!=(15&e[0])||e[0]>>4>7||(e[0]<<8|e[1])%31)&&sX(6,"invalid zlib data"),(e[1]>>5&1)==+!t&&sX(6,"invalid zlib data: "+(32&e[1]?"need":"unexpected")+" dictionary"),2+(e[1]>>3&4)};function ou(e,t){return s7(e,t||{},0,0)}var oE=function(){function e(e,t){"function"==typeof e&&(t=e,e={}),this.ondata=t;var n=e&&e.dictionary&&e.dictionary.subarray(-32768);this.s={i:0,b:n?n.length:0},this.o=new sp(32768),this.p=new sp(0),n&&this.o.set(n)}return e.prototype.e=function(e){if(this.ondata||sX(5),this.d&&sX(4),this.p.length){if(e.length){var t=new sp(this.p.length+e.length);t.set(this.p),t.set(e,this.p.length),this.p=t}}else this.p=e},e.prototype.c=function(e){this.s.i=+(this.d=e||!1);var t=this.s.b,n=sz(this.p,this.s,this.o);this.ondata(sY(n,t,this.s.b),this.d),this.o=sY(n,this.s.b-32768),this.s.b=this.o.length,this.p=sY(this.p,this.s.p/8|0),this.s.p&=7},e.prototype.push=function(e,t){this.e(e),this.c(t)},e}();function o_(e,t){return sz(e,{i:2},t&&t.out,t&&t.dictionary)}var ov="undefined"!=typeof TextDecoder&&new TextDecoder;try{ov.decode(s5,{stream:!0})}catch(e){}var oh=function(e){for(var t="",n=0;;){var i=e[n++],r=(i>127)+(i>223)+(i>239);if(n+r>e.length)return{s:t,r:sY(e,n-1)};t+=r?3==r?String.fromCharCode(55296|(i=((15&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536)>>10,56320|1023&i):1&r?String.fromCharCode((31&i)<<6|63&e[n++]):String.fromCharCode((15&i)<<12|(63&e[n++])<<6|63&e[n++]):String.fromCharCode(i)}};"function"==typeof queueMicrotask&&queueMicrotask;var oS=e=>e.replace(/(top\.window\.open|top\.mraid\.open|parent\.window\.open|parent\.mraid\.open)\((.*?)\)/g,"mraid.open($2)"),oT=e=>{let t=/(?:window\.)?(?:top\.|parent\.)?(?:window\.)?(?:location(?:\.href)?)\s*=\s*([^;\n]+?)(\n|;|\s*<\/script>|$)/g;return t.test(e)?e.replace(t,((e,t,n)=>`mraid.open(${t})${n}`)):e},op=e=>{let t=/<script[^>]*?src=(["'][^"']*?mraid.js[^>]*?["'])[^>]*?>(<\/script>)?/gi;return t.test(e)?e.replace(t,""):e},og=class extends ez{decompress(e){var t,n;let i=atob(e),r=new Uint8Array(i.length);for(let e=0;e<i.length;e+=1)r[e]=i.charCodeAt(e);return function(e){if(ov)return ov.decode(e);var t=oh(e),n=t.s;return t.r.length&&sX(8),n}(((n=ol(r))+8>r.length&&sX(6,"invalid gzip data"),sz(r.subarray(n,-8),{i:2},new sp(oc(r)),t))).toString()}decode(e,t){try{let n;n=t&&this.placementTypeService.isFullscreen()?this.decompress(e):tp(e);let i=op(n),r=oT(i);return oS(r)}catch(e){return this.errorLoggingService.emit({type:"error-logging",event:r2.EXCEPTION,data:{error:{message:"Failed to decode endcard"}}}),""}}static getServiceIdentifier(){return"HTMLDecoderServiceInterface"}constructor(e=tV(),t=r5()){super(),this.placementTypeService=e,this.errorLoggingService=t}},oC=()=>{let e=eX.getInstance(),t=og.getServiceIdentifier();return e.get(t)},oI=class extends ez{isUserInterestedInEndcard(e){return e&&e.length>=10&&e.filter((e=>{var t;return(null!=(t=e.endcardInteractions)?t:0)>=2})).length>=3}calculateAmplifyValue(e){let t=Math.max(0,e-this.amplifyValue);return 0===t&&(this.amplifyValue=e),t}async getVideoCloseButtonDelayWithUserActivity(e){let t=null!=e?e:0,n=(await this.userActivityService.getAllRecords()).filter((e=>e.eventId!==this.sessionId&&(e.placementType===tu.FULLSCREEN||!e.placementType)));return this.isUserInterestedInEndcard(n)?(this.amplified=!0,this.calculateAmplifyValue(t)):t}isEndcardAmplified(){return this.amplified}getAmplifiedEndcardCloseButtonDelay(e){return(null!=e?e:0)+this.amplifyValue}static getServiceIdentifier(){return"AmplifyEndcardEngagementServiceInterface"}constructor(e,t){super(),this.sessionId=e,this.userActivityService=t,this.amplified=!1,this.amplifyValue=2}},oA=()=>{let e=eX.getInstance(),t=oI.getServiceIdentifier();if(e.has(t))return e.get(t)};const oO=[t_.EC_IMAGE,t_.EC_IMAGE_2,t_.EC_HTML,t_.ADM_HTML,t_.EC_HTML_2];var om=((W={}).BASE64_ENCODED="base64-encoded",W.GZIP="gzip",W.NONE="none",W);class of extends rw{getId(){return this.id}getSceneType(){return this.sceneType}getStoreKitOverlayAutoShowConfig(){return this.storeKitOverlayAutoShowConfig}getAppStoreOnDelayConfig(){return this.appStoreOnDelayConfig}getCloseButtonConfig(){let e=this.closeButtonConfigProvider.getCloseButtonConfig();return tt(eJ({},e),{style:this.isLastPage()?rh.CLOSE:e.style})}getLastChanceEndcardConfig(){return this.lastChanceEndcardConfig}getTrackingEventMapConfig(){return this.trackingEventMapConfig}getCallToActionConfig(){return this.callToActionConfig}setLastChanceEndcardConfig(e){this.lastChanceEndcardConfig=e}getEventStreams(){return this.eventStreams?this.eventStreams:s_(this.incentivizedConfig,this.lastChanceEndcardConfig.enabled)}getIncentivizedConfig(){return this.incentivizedConfig}getHasNestedIframe(){return this.hasNestedFrame}initIframeContentData(e){let t=e.getNestedIframeContentData(this.endcardContent);this.hasNestedFrame=!!t,this.iframeContentData=e.initializeIframeContentData(this.endcardContent,t)}async getIframeContentData(){var e;return null!=(e=this.iframeContentData)?e:Promise.resolve({content:this.endcardContent})}getObservabilityData(){return tt(eJ({},super.getObservabilityData()),{has_nested_iframe:this.getHasNestedIframe()})}static getInstances(e=tE(),t=tV(),n=tM(),i=r5(),r=oC(),a=oA){let s=[t_.EC_HTML,t_.ADM_HTML,t_.EC_HTML_2],o=[],l={[t_.EC_HTML]:"endcard",[t_.ADM_HTML]:"endcard",[t_.EC_HTML_2]:"secondEndcard"},c=th(e.get(t_.EC_HTML_PRELOAD));return s.filter((t=>e.has(t))).forEach(((s,d)=>{var u;let E=s===t_.ADM_HTML,_=`${l[s]}_${d}`,v=new r7(r8(_,e,t),i);o.push(new of({id:_,endcardContent:r.decode(null!=(u=e.get(s))?u:"",th(e.get(t_.EC_HTML_COMPRESS))),index:d,isAlternative:!1,compressionType:th(e.get(t_.EC_HTML_COMPRESS))?"gzip":"base64-encoded",storeKitOverlayAutoShowConfig:new rJ(d,this.isEndcardOnly(e),rx(e),e.get(t_.FULL_CTA_OPTION),e.get(t_.SKOVERLAY_AUTO),e.get(t_.SKOVERLAY_DELAY_SECONDS),e.get(t_.EC_SKOVERLAY_DELAY_SECONDS),e.get(t_.SKOVERLAY_AUTO_CLOSE),e.get(t_.EC_SKOVERLAY_DISABLE_AUTO_MMP),n,t).getStoreKitOverlayAutoShowConfig(),appStoreOnDelayConfig:new r0(d,rx(e),e.get(t_.APP_STORE_ON_ENDCARD_AUTO_DELAY),n).getAppStoreOnDelayConfig(),lastChanceEndcardConfig:v.getLastChanceEndcardConfig(),omsdkEnabled:E,closeButtonConfigProvider:new r9({ecCloseButtonDelaySecondsTokenValue:e.get(t_.EC_CLOSE_BUTTON_DELAY_SECONDS),staticEcCloseButtonDelaySecondsTokenValue:e.get(t_.STATIC_EC_CLOSE_BUTTON_DELAY_SECONDS),showECCloseButtonCountDownTokenValue:e.get(t_.SHOW_EC_CLOSE_BUTTON_COUNTDOWN),endcardCloseButtonAsSkipTokenValue:e.get(t_.ENDCARD_CLOSE_BUTTON_AS_SKIP),isSecondEndcard:1===d}),trackingEventMapConfig:new ae(!1).getTrackingEventMapConfig(),callToActionConfig:new at({skEcCtaOnlyTokenValue:e.get(t_.SK_EC_CTA_ONLY),appMetaProviderParams:sv(e,i)}).getCallToActionConfig(),muted:ar(e,t),eligibleToPreload:c,placementTypeService:t,shouldSplitVideoEndcardClick:th(e.get(t_.VIDEO_ENDCARD_CLICK_SPLIT)),incentivizedConfig:new sh({enabled:th(e.get(t_.INCENTIVIZED)),incentivizedCloseButtonDelaySeconds:e.get(t_.INCENTIVIZED_CLOSE_BUTTON_DELAY_SECONDS),isIncentiveTiedToCloseButtonDelay:th(e.get(t_.IS_INCENTIVE_TIED_TO_CLOSE_BUTTON_DELAY))}).getIncentivizedConfig(),amplifyEndcardEngagementService:a}))})),o}constructor({id:e,endcardContent:t,index:n,isAlternative:i,compressionType:r,storeKitOverlayAutoShowConfig:a,appStoreOnDelayConfig:s,lastChanceEndcardConfig:o,omsdkEnabled:l,closeButtonConfigProvider:c,trackingEventMapConfig:d,muted:u=!1,eligibleToPreload:E=!1,callToActionConfig:_,placementTypeService:v=tV(),shouldSplitVideoEndcardClick:h=!1,eventStreams:S,incentivizedConfig:T,amplifyEndcardEngagementService:p=oA}){super({isFullscreen:v.isFullscreen()}),this.sceneType=iM.endcard,this.hasNestedFrame=!1,this.id=e,this.endcardContent=t,this.index=n,this.alternative=i,this.compressionType=r,this.storeKitOverlayAutoShowConfig=a,this.appStoreOnDelayConfig=s,this.lastChanceEndcardConfig=o,this.omsdkEnabled=l,this.trackingEventMapConfig=d,this.closeButtonConfigProvider=c,this.callToActionConfig=_,this.placementTypeService=v,this.muted=u,this.eligibleToPreload=E,this.shouldSplitVideoEndcardClick=h,this.eventStreams=S,this.incentivizedConfig=T,this.amplifyEndcardEngagementService=p,l&&this.addEntryAction({name:an.INIT_OMSDK_HTML_DISPLAY_SERVICE}),this.addTransition(rf),this.addTransition(rN),this.addTransition(rD),this.addTransition(rR),this.addOrUpdateTransition({name:ib.CLOSE,actions:[],scene:new ai}),this.addExitAction({name:an.FLUSH_MRAID_EVENTS_PROXY_CALLBACKS}),this.addOrUpdateTransition({name:ib.CLOSE_BUTTON_WILL_SHOW,actions:[{name:an.ON_ENDCARD_CLOSE_BUTTON_WILL_SHOW}]}),this.addTransition({name:ib.CREATIVE_VIEW,actions:[{name:an.ON_CREATIVE_VIEW}]}),this.addEntryAction({name:an.ON_SHOW}),this.addEntryAction({name:an.FIRE_IF_ENGAGEMENT_IS_USED})}}of.isEndcardOnly=(e=tE())=>{let t=!e.has(t_.MAIN_VIDEO)&&!e.has(t_.MAIN_STREAM),n=1===oO.filter((t=>e.has(t))).length;return t&&n};var oN=of,oD=class{getDelay(){return th(this.incentivizedTokenValue)&&this.incentivizedCloseButtonDelaySecondsTokenValue?Number(this.incentivizedCloseButtonDelaySecondsTokenValue):this.closeButtonDelaySecondsTokenValue?Number(this.closeButtonDelaySecondsTokenValue):0}getCountDown(){return void 0===this.showVideoCloseButtonCountDownTokenValue||th(this.showVideoCloseButtonCountDownTokenValue)}getStyle(){return th(this.videoCloseButtonAsSkipTokenValue)?rh.SKIP:rh.CLOSE}getCloseButtonConfig(){return{delay:this.getDelay(),style:this.getStyle(),countdown:this.getCountDown()}}constructor({closeButtonDelaySecondsTokenValue:e,incentivizedCloseButtonDelaySecondsTokenValue:t,incentivizedTokenValue:n,videoCloseButtonAsSkipTokenValue:i,showVideoCloseButtonCountDownTokenValue:r}){this.closeButtonDelaySecondsTokenValue=e,this.incentivizedCloseButtonDelaySecondsTokenValue=t,this.incentivizedTokenValue=n,this.videoCloseButtonAsSkipTokenValue=i,this.showVideoCloseButtonCountDownTokenValue=r}},oR=class{getProgressBarConfig(){var e,t;return{show:!this.isBanner&&!rQ(this.videoProgressBarTokenValue),color:null!=(t=null!=(e=this.videoProgressBarColorTokenValue)?e:this.ctaButtonBackgroundTokenValue)?t:am}}constructor({videoProgressBarTokenValue:e,videoProgressBarColorTokenValue:t,ctaButtonBackgroundTokenValue:n,isBanner:i}){this.videoProgressBarTokenValue=e,this.videoProgressBarColorTokenValue=t,this.ctaButtonBackgroundTokenValue=n,this.isBanner=i}};const oy=(e=tE(),t=tV(),n=r5())=>{let i=sv(e,n);return{appStoreId:rx(e),skCtaOnlyTokenValue:e.get(t_.SK_CTA_ONLY),blockPersistentCtaTokenValue:e.get(t_.BLOCK_PERSISTENT_CTA),appMetaProviderParams:i,placementTypeService:t}};var oL=class extends r6{getCallToActionTarget(){return this.placementTypeService.isBanner()||this.placementTypeService.isMrec()?iV.SKPV:rU(this.skCtaOnlyTokenValue)}isPersistentCtaEnabled(){return(this.placementTypeService.isFullscreen()||this.placementTypeService.isMrec()||this.placementTypeService.isInLine())&&!th(this.blockPersistentCtaTokenValue)}getCallToActionConfig(){return{isPersistent:this.isPersistentCtaEnabled(),target:this.getCallToActionTarget(),url:super.getCtaButtonUrl(),text:super.getCtaButtonText(),appMeta:super.getAppMetaData(),delay:super.getCtaButtonDelay()}}constructor({appStoreId:e,skCtaOnlyTokenValue:t,blockPersistentCtaTokenValue:n,appMetaProviderParams:i,placementTypeService:r=tV()}){super(i),this.appStoreId=e,this.skCtaOnlyTokenValue=t,this.blockPersistentCtaTokenValue=n,this.placementTypeService=r}},oP=class{getManifestMetadata(){var e;if(void 0!==this.mainManifestTokenValue&&""!==this.mainManifestTokenValue)return{manifest:tp(this.mainManifestTokenValue),track_0:tp(null!=(e=this.track0TokenValue)?e:""),chunks:this.chunkSeriesValues,chunk_init:this.chunkInitTokenValue}}constructor(e,t,n,i){this.mainManifestTokenValue=e,this.track0TokenValue=t,this.chunkSeriesValues=n,this.chunkInitTokenValue=i}};const ob=e=>!(null===e||"object"!=typeof e||void 0!==e.manifest&&"string"!=typeof e.manifest||void 0!==e.track_0&&"string"!=typeof e.track_0||void 0!==e.chunks&&(!Array.isArray(e.chunks)||!e.chunks.every((e=>"string"==typeof e||null!==e&&"object"==typeof e&&Object.values(e).every((e=>"string"==typeof e))))));var ow=e=>{var t;let n=null==e||null==(t=e.getStreamManifest)?void 0:t.call(e);return void 0!==n&&ob(n)},oM=e=>{var t;let n=null==e||null==(t=e.getAudioManifest)?void 0:t.call(e);return void 0!==n&&ob(n)},oV=e=>{if(!e)return!1;let t=e.toLowerCase();return!t.startsWith("http://")&&!t.startsWith("https://")},ok=e=>`file://${window.location.pathname.replace("index.html","")}${e}`;const oU=e=>e?oV(e)&&!e.toLowerCase().startsWith("file://")?ok(e):e:"";var oB=class{getStreamManifest(){return ow(this.scene)?this.scene.getStreamManifest():void 0}getAudioManifest(){return oM(this.scene)?this.scene.getAudioManifest():void 0}getCachedManifestMetadata(){var e,t,n,i,r,a,s,o,l,c;let d=this.getStreamManifest(),u=this.getAudioManifest();return{video:{track_0:null!=(n=null==d?void 0:d.track_0)?n:"",manifest:null!=(i=null==d?void 0:d.manifest)?i:"",chunks:null!=(r=null==d||null==(e=d.chunks)?void 0:e.map(oU))?r:[],chunk_init:null!=(a=oU(null==d?void 0:d.chunk_init))?a:""},audio:{track_0:null!=(s=null==u?void 0:u.track_0)?s:"",manifest:null!=(o=null==u?void 0:u.manifest)?o:"",chunks:null!=(l=null==u||null==(t=u.chunks)?void 0:t.map(oU))?l:[],chunk_init:null!=(c=oU(null==u?void 0:u.chunk_init))?c:""}}}getChunkFormat(){var e,t;let n=null==(t=this.getStreamManifest())||null==(e=t.chunks)?void 0:e[0];if(!n||!oV(n))return"";let i=n.split(".");return i.length<2?"":i[i.length-1]}constructor(e=(null==(x=tU.getValue())?void 0:x.scene)){this.scene=e}},oH=(e,t)=>{let n=aZ(e,aQ.HLS_LEVEL_PLAYLIST_LOADED),i=au(t,aE.SCENE_END);return new aa((e=>{let t=n.subscribe({next:t=>{var n,i;e.next(null==(n=t.data)?void 0:n.starting_sequence_number),null==(i=e.complete)||i.call(e)}}),r=i.subscribe({next:()=>{var t;e.next(void 0),null==(t=e.complete)||t.call(e)}});return{unsubscribe:()=>{t.unsubscribe(),r.unsubscribe()}}}))},oW=(e=tB,t=a2())=>{var n,i,r;return null!=(r=null==(i=t.getActivityEvents().filter((t=>{var n,i;return"event"===t.activity.type&&"video"===t.activity.eventType&&t.activity.name===aQ.BANDWIDTH_ESTIMATION&&(null==(n=t.activity.data)?void 0:n.scene_id)===(null==(i=e())?void 0:i.getId())})).pop())||null==(n=i.activity.data)?void 0:n.bwe)?r:-1},ox=(e,t,n=tB)=>new aa((i=>{let r=au(e,aE.SCENE_END).subscribe({next:()=>{var e;i.next(oW(n,t)),null==(e=i.complete)||e.call(i)}});return{unsubscribe:()=>{r.unsubscribe()}}})),oF=(e,t)=>ao(e,"theatre-mode-event").pipe(as((e=>e.event===t))),oK=((F=oK||{}).HIDE_CONTROLS="HIDE_CONTROLS",F.REVEAL_CONTROLS="REVEAL_CONTROLS",F.DISABLE_THEATRE_MODE="DISABLE_THEATRE_MODE",F),oG=(e,t=!1,n=tW(),i=iF())=>{let r=aU(n),a=al(n,r2.RESOURCE,r3.VIDEO).pipe(ac()).pipe(ad(au(r,aE.SCENE_END))),s=ah(au(r,aE.LOAD_START),au(r,aE.LOAD_COMPLETE),au(r,aE.SCENE_END)),o=ah(au(r,aE.CTA_BUTTON_SHOW),au(r,aE.CTA_BUTTON_CLICK),au(r,aE.SCENE_END)),l=tt(eJ({},aq(n,t)),{average_bandwidth:ox(r,n),cta_duration:o,error_count:a,hls_starting_sequence_number:oH(n,r),load_duration:s,preload_duration:so(r)});return e.enabled&&(l.grant_reward=ss(iM.video,e,n,i)),l.hide_controls_count=oF(n,oK.HIDE_CONTROLS).pipe(ac()).pipe(ad(au(r,aE.SCENE_END))),l.reveal_controls_count=oF(n,oK.REVEAL_CONTROLS).pipe(ac()).pipe(ad(au(r,aE.SCENE_END))),l};class oY extends rw{getTransitions(){let e=super.getTransitions();return e.push(rM,rV,rk,rf,rN,rD,rR,rP,rL),e}getId(){return this.id}getSceneType(){return iM.video}getVideoPlayer(){return this.videoType===iB.PROGRESSIVE?iU.PROGRESSIVE:window.Hls.isSupported()?iU.CUSTOM:iU.NATIVE}getVideoUrl(){return this.videoType===iB.PROGRESSIVE&&void 0!==this.originalVideoUrl?this.originalVideoUrl:this.url}getObservabilityData(){var e,t,n,i,r,a,s,o,l;let c=new oB(this),d=c.getCachedManifestMetadata();return{cached:null!=(s=null==(t=d.video)||null==(e=t.chunks)?void 0:e.length)?s:0,format:c.getChunkFormat(),manifest:!!(null==(n=d.video)?void 0:n.manifest),local:+!!this.url.toLowerCase().startsWith("file://"),player:this.getVideoPlayer(),segments:null!=(o=null==(r=this.getStreamManifest())||null==(i=r.chunks)?void 0:i.length)?o:0,track:!!(null==(a=d.video)?void 0:a.track_0),url:null!=(l=this.getVideoUrl())?l:"",video:this.videoType}}getProgressBarConfig(){return this.progressBarConfig}getFullScreenClickConfig(){return this.fullScreenClickConfig}getAppStoreOnDelayConfig(){return this.appStoreOnDelayConfig}getCloseButtonConfig(e){let t=this.closeButtonConfigProvider.getCloseButtonConfig(e);return tt(eJ({},t),{style:this.isLastPage()?rh.CLOSE:t.style})}getStoreKitOverlayAutoShowConfig(){return this.storeKitOverlayAutoShowConfig}getCallToActionConfig(){return this.callToActionConfig}getLastChanceEndcardConfig(){return this.lastChanceEndcardConfig}getTrackingEventMapConfig(){return this.trackingEventMapConfig}setLastChanceEndcardConfig(e){this.lastChanceEndcardConfig=e}setCanSkipToNextScene(e){this.canSkipToNextScene=e}getStreamManifest(){return this.streamManifest}getAudioManifest(){return this.audioManifest}getEventStreams(){return this.eventStreams?this.eventStreams:oG(this.incentivizedConfig,this.lastChanceEndcardConfig.enabled)}getIncentivizedConfig(){return this.incentivizedConfig}static isLoopingVideo(e,t=!1){return t||th(e)}static getInstances(e=tE(),t=tV(),n=tM(),i=r5()){let r=[t_.MAIN_VIDEO,t_.MAIN_STREAM],a=[],s=e.get(t_.ORIGINAL_VIDEO_URL),o=oY.isLoopingVideo(e.get(t_.VIDEO_LOOPING),oY.isVideoOnly(e)),l=th(e.get(t_.THEATRE_MODE));return r.filter((t=>e.has(t))).forEach(((r,c)=>{var d;let u=r===t_.MAIN_STREAM?iB.HLS:iB.PROGRESSIVE,E=`video_${c}`,_=new r7(r8(E,e,t),i),v=new oL(oy(e,t,i)).getCallToActionConfig(),h=new rq(rx(e),e.get(t_.FULL_CTA_OPTION),e.get(t_.SKOVERLAY_AUTO),e.get(t_.SKOVERLAY_DELAY_SECONDS),e.get(t_.SKOVERLAY_AUTO_CLOSE),e.get(t_.SKOVERLAY_DISABLE_AUTO_MMP),n,t).getStoreKitOverlayAutoShowConfig();a.push(new oY({id:E,url:null!=(d=e.get(r))?d:"",index:c,isAlternative:!1,videoType:u,streamManifest:new oP(e.get(t_.MAIN_MANIFEST),e.get(t_.TRACK_0),e.getSeriesValues("STREAM_CHUNK_"),e.get(t_.INIT_STREAM_CHUNK)).getManifestMetadata(),audioManifest:new oP(e.get(t_.MAIN_MANIFEST),e.get(t_.AUDIO_TRACK_0),e.getSeriesValues("AUDIO_CHUNK_"),e.get(t_.INIT_AUDIO_CHUNK)).getManifestMetadata(),theatreModeEnabled:l,progressBarConfig:new oR({videoProgressBarTokenValue:e.get(t_.VIDEO_PROGRESS_BAR),videoProgressBarColorTokenValue:e.get(t_.VIDEO_PROGRESS_BAR_COLOR),ctaButtonBackgroundTokenValue:e.get(t_.CTA_BUTTON_BACKGROUND),isBanner:t.isBanner()}).getProgressBarConfig(),fullScreenClickConfig:new rB({fullCtaTokenValue:e.get(t_.FULL_CTA),skFullCtaTokenValue:e.get(t_.SK_FSC),partialFSCTokenValue:e.get(t_.PARTIAL_FSC),ctaButtonUrlTokenValue:e.get(t_.CTA_BUTTON_URL),id:E,placementType:t.getPlacementType()}).getFullScreenClickConfig(),storeKitOverlayAutoShowConfig:h,appStoreOnDelayConfig:new rZ(e.get(t_.APP_STORE_ON_VIDEO_AUTO_DELAY),rx(e),n,t).getAppStoreOnDelayConfig(),callToActionConfig:v,lastChanceEndcardConfig:_.getLastChanceEndcardConfig(),trackingEventMapConfig:new ae(!1).getTrackingEventMapConfig(),closeButtonConfigProvider:new oD({closeButtonDelaySecondsTokenValue:e.get(t_.CLOSE_BUTTON_DELAY_SECONDS),incentivizedCloseButtonDelaySecondsTokenValue:e.get(t_.INCENTIVIZED_CLOSE_BUTTON_DELAY_SECONDS),incentivizedTokenValue:e.get(t_.INCENTIVIZED),videoCloseButtonAsSkipTokenValue:e.get(t_.VIDEO_CLOSE_BUTTON_AS_SKIP),showVideoCloseButtonCountDownTokenValue:e.get(t_.SHOW_VIDEO_CLOSE_BUTTON_COUNTDOWN)}),originalVideoUrl:s,loopVideo:o,showDownloadButton:!!rx(e)&&th(e.get(t_.VIDEO_SHOW_CTA))&&(!v.isPersistent||h.enabled),isFullscreen:t.isFullscreen(),muted:ar(e,t),shouldSplitVideoEndcardClick:th(e.get(t_.VIDEO_ENDCARD_CLICK_SPLIT)),incentivizedConfig:new sh({enabled:th(e.get(t_.INCENTIVIZED)),incentivizedCloseButtonDelaySeconds:e.get(t_.INCENTIVIZED_CLOSE_BUTTON_DELAY_SECONDS),isIncentiveTiedToCloseButtonDelay:th(e.get(t_.IS_INCENTIVE_TIED_TO_CLOSE_BUTTON_DELAY))}).getIncentivizedConfig()}))})),a}constructor({id:e,url:t,index:n,isAlternative:i,videoType:r,streamManifest:a,audioManifest:s,fullScreenClickConfig:o,storeKitOverlayAutoShowConfig:l,theatreModeEnabled:c,appStoreOnDelayConfig:d,callToActionConfig:u,lastChanceEndcardConfig:E,progressBarConfig:_,closeButtonConfigProvider:v,originalVideoUrl:h,trackingEventMapConfig:S,showDownloadButton:T,loopVideo:p=!1,muted:g=!1,isFullscreen:C,shouldSplitVideoEndcardClick:A=!1,eventStreams:I,incentivizedConfig:O}){super({isFullscreen:C}),this.id=e,this.url=t,this.index=n,this.alternative=i,this.videoType=r,this.streamManifest=a,this.audioManifest=s,this.progressBarConfig=_,this.fullScreenClickConfig=o,this.storeKitOverlayAutoShowConfig=l,this.appStoreOnDelayConfig=d,this.callToActionConfig=u,this.showDownloadButton=T,this.lastChanceEndcardConfig=E,this.theatreModeEnabled=c,this.closeButtonConfigProvider=v,this.originalVideoUrl=h,this.loopVideo=p,this.muted=g,this.trackingEventMapConfig=S,this.shouldSplitVideoEndcardClick=A,this.eventStreams=I,this.incentivizedConfig=O,this.canSkipToNextScene=!1,this.addTransition({name:ib.NEXT,actions:[{name:iP.CLOSE_VIDEO},{name:rT.SET_THEATRE_MODE_INACTIVE},{name:iP.DISABLE_THEATRE_MODE}]})}}oY.isVideoOnly=(e=tE())=>{let t=!e.some(...oO),n=1===[t_.MAIN_VIDEO,t_.MAIN_STREAM].filter((t=>e.has(t))).length;return t&&n};var oj=function(e){return e instanceof oY&&Object.values(iB).includes(e.videoType)&&"object"==typeof e.progressBarConfig&&"object"==typeof e.fullScreenClickConfig&&"object"==typeof e.storeKitOverlayAutoShowConfig&&"object"==typeof e.appStoreOnDelayConfig&&"object"==typeof e.callToActionConfig&&"object"==typeof e.lastChanceEndcardConfig&&"object"==typeof e.trackingEventMapConfig&&(void 0===e.originalVideoUrl||!0)&&(void 0===e.loopVideo||!0)},oX=e=>e instanceof oN&&e.getSceneType()===iM.endcard,oz=class extends ez{static getServiceIdentifier(){return"PreloadServiceInterface"}isHTMLPreloading(e,t=iD(e)){return(null==t?void 0:t.state.value)===iy.PRELOADING}getHTMLScenesToPreload(e){if(e.isChild())return;let t=[];if(oj(e)){oX(e.next)&&e.next.eligibleToPreload&&t.push({scene:e.next,isCloseButtonVisible:!1,isPrivacyButtonVisible:!1,shouldRenderIFrame:!0,startPreloading:!1});let n=e.getTransitions().find((e=>e.name===ib.COMPLETE));oX(null==n?void 0:n.scene)&&n.scene!==e.next&&n.scene.eligibleToPreload&&t.push({scene:n.scene,isCloseButtonVisible:!1,isPrivacyButtonVisible:!1,shouldRenderIFrame:!0,startPreloading:!1})}else if(oX(e)&&e.eligibleToPreload){let n=iD(e.getId());(null==n?void 0:n.state.context.preloadSuccess)&&(t.push({scene:e,isCloseButtonVisible:!0,isPrivacyButtonVisible:!0,shouldRenderIFrame:!0,startPreloading:!1}),e.getTransitions().forEach((e=>{e.scene&&oX(e.scene)&&e.scene.eligibleToPreload&&t.push({scene:e.scene,isCloseButtonVisible:!1,isPrivacyButtonVisible:!1,shouldRenderIFrame:!0,startPreloading:!0})})))}return t.length>0?t:void 0}startPreloading(e,t=iD(e)){null==t||t.send(iR.PRELOAD)}cancelPreloading(e,t=iD(e)){null==t||t.send(iR.CANCEL_PRELOAD)}};const o$=e=>"observability"===e.type&&null!=e.event;var oq=class extends rG{emit(e,t){let n=this.getReportableEvent(e,t);this.wrappedService.emit(n)}getEventCount(e,t=["name"]){let n=this.getReportableEvent(e);return this.wrappedService.getActivityEvents().filter((e=>{let{activity:i}=e;return i.type===tI.EVENT&&"observability"===i.eventType&&!!i.data&&t.every((e=>this.isEventMatch(i.data,n.data,e)))})).length}getReportableEvent(e,t){return o$(e)?e:{type:"observability",event:tI.EVENT,data:"string"==typeof e?{name:e,metric:t}:e}}isEventMatch(e,t,n){return Array.isArray(e)?e.some((e=>Array.isArray(t)?t.some((t=>e[n]===t[n])):e[n]===t[n])):Array.isArray(t)?t.some((t=>(null==e?void 0:e[n])===t[n])):(null==e?void 0:e[n])===t[n]}},oZ=e=>new oq(null!=e?e:tH()),oQ=class extends ez{getMessageFromErrorEvent(e){var t;return e.message&&""!==e.message?e.message:(null==(t=e.error)?void 0:t.message)&&""!==e.error.message?e.error.message:"Unexpected script error"}isIgnoredError(e){let t=e.toLowerCase();return["syntaxerror: unexpected token ':'"].some((e=>-1!==t.indexOf(e)))}sendImageError(e,t=!1){let n=this.getImageErrorEvent(e.target);t&&(n.data.is_fatal=!0),this.send(n)}shouldImageErrorBeFatal(e){var t;return"image_0"===e&&!(null==(t=this.currentScene())?void 0:t.prev)}handlePlayableError(e){var t,n,i,r;let a=e.data&&"playable-error"===e.data.title,s=null!=(i=null==(n=e.data)||null==(t=n.content)?void 0:t.message)?i:"";a&&!this.isIgnoredError(s)&&(e.data.content.error_source=tm.PLAYABLE,this.send({type:"error-logging",event:r2.PLAYABLE,data:{error:e.data.content,scene_id:null==(r=tB())?void 0:r.getId()}}))}handleUnhandledrejectionError(e){var t,n;this.send({type:"error-logging",event:r2.UNHANDLEDREJECTION,data:{error:{message:null!=(n=null==(t=e.reason)?void 0:t.toString())?n:"Unhandled rejection error",error_source:tm.TEMPLATE}}}),this.observabilityEventReportingService.emit(tA.TEMPLATE_ERROR,tO.TEMPLATE_ERROR)}handleCommonError(e){let{localName:t}=e.target;if("video"===t)return;if("img"===t){let{id:t}=e.target,n=this.shouldImageErrorBeFatal(t);return void this.sendImageError(e,n)}let n={type:"error-logging",event:r2.EXCEPTION,data:{error:{message:this.getMessageFromErrorEvent(e),error_source:tm.TEMPLATE,resource_url:null==e?void 0:e.filename}}};this.send(n),this.observabilityEventReportingService.emit(tA.TEMPLATE_ERROR,tO.TEMPLATE_ERROR)}getErrorCode(e){var t;let n=null==(t=e.data)?void 0:t.resource_type;return n===r3.IMAGE?1e4:n===r3.VIDEO?10001:30006}getImageErrorEvent(e){let{currentSrc:t}=e;return{type:"error-logging",event:r2.RESOURCE,data:{resource_type:r3.IMAGE,error:{resource_url:t,error_source:tm.RESOURCE,message:tN}}}}init(){window.addEventListener("error",this.handleCommonError.bind(this),!0),window.addEventListener("unhandledrejection",this.handleUnhandledrejectionError.bind(this)),window.addEventListener("message",this.handlePlayableError.bind(this))}send(e){this.errorLoggingReportingService.emit(e)}notifyFatalError(e){var t,n,i,r;let a=this.getErrorCode(e),s=null!=(r=null==(t=e.data.error)?void 0:t.message)?r:"Unknown error";null==(i=this.mraidService.getMraidBridgeExt())||null==(n=i.notifyError)||n.call(i,a,s,!0)}static getServiceIdentifier(){return"ErrorLoggingServiceInterface"}constructor(e=td(),t=r5(),n=oZ(),i=tB){super(),this.mraidService=e,this.errorLoggingReportingService=t,this.observabilityEventReportingService=n,this.currentScene=i}},oJ={};function o0(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof e.then}(oJ=o0).default=o0;class o1 extends Error{}var o2=(e,t=1e4,n=new o1("Timed out waiting!"))=>new Promise(((i,r)=>{let a=t=>{var s;let o=e();((s=oJ)&&s.__esModule?s.default:s)(o)?o.then((e=>{e?i(e):t<0?r(n):setTimeout((()=>a(t-100)),100)})):o?i(o):t<0?r(n):setTimeout((()=>a(t-100)),100)};setTimeout((()=>a(t-100)),100)}));class o3 extends ez{addEventStreams(e){var t;let n=e.getId();if(null==(t=this.sceneEventStreams[n])?void 0:t.hasCompleted)throw Error("Cannot add more event streams after completion");let i=e.getEventStreams(),r={eventStreams:i,results:{},errors:{},completed:{},hasCompleted:!1};this.sceneEventStreams[n]=r,0!==Object.keys(i).length?Object.keys(r.eventStreams).forEach((e=>{r.eventStreams[e].subscribe({next:t=>{r.results[e]=t},error:t=>{r.errors[e]=t},complete:()=>{r.completed[e]=!0}})})):r.hasCompleted=!0}end(e){this.reportingService.emit({type:"scene-event",event:aE.SCENE_END,data:{scene_id:e.getId(),scene_type:e.getSceneType()}})}start(e){this.addEventStreams(e),this.reportingService.emit({type:"scene-event",event:aE.SCENE_START,data:{scene_id:e.getId(),scene_type:e.getSceneType()}})}subscribeAll(e){let t=e.getId(),n=this.sceneEventStreams[t];return n.hasCompleted?Promise.resolve({}):new Promise((e=>{o2((()=>Object.keys(n.eventStreams).every((e=>!!n.errors[e]||n.completed[e]))),o3.MAX_WAIT_TIME,Error(`Event streams for scene ${t} have not completed successfully`)).then((()=>{n.hasCompleted=!0,e(n.results)}))}))}haveAllCompleted(){return 0===Object.keys(this.sceneEventStreams).length||Object.keys(this.sceneEventStreams).every((e=>this.sceneEventStreams[e].hasCompleted))}reset(){this.sceneEventStreams={}}static getServiceIdentifier(){return"EventStreamServiceInterface"}constructor(e=aU()){super(),this.reportingService=e,this.sceneEventStreams={}}}o3.MAX_WAIT_TIME=2e3;var o5=()=>({dbName:"viewMaster_indexed_db_urlCache",dbVersion:1,objectStore:{name:"urlCache",keyPath:"url",expiry:30}}),o4=class extends ez{async addRecord(){}async get(){return Promise.resolve(void 0)}async getAllRecords(){return Promise.resolve([])}async clearStore(){}async deleteExpiredRecords(){}},o6=class extends o4{static getServiceIdentifier(){return"UrlCacheServiceInterface"}};class o8{static async hasSufficientSpace(){var e;if(!(null==(e=window.navigator.storage)?void 0:e.estimate))return!0;let{quota:t,usage:n}=await window.navigator.storage.estimate();return!t||!n||t-n>=5e6}static async shouldInitIndexedDB(){return!!window.indexedDB&&o8.hasSufficientSpace()}static handleUpgrade(e,t){let n=e.target.result,{name:i,keyPath:r,index:a}=t;if(!n.objectStoreNames.contains(i)){let e=n.createObjectStore(i,{keyPath:r});a&&e.createIndex(a.name,a.keyPath,a.options)}}static convertToError(e){var t;return Error(null!=(t=null==e?void 0:e.message)?t:"Unknown error from IndexedDB")}static async open(e){if(await o8.shouldInitIndexedDB())return new Promise(((t,n)=>{let{dbName:i,objectStore:r,dbVersion:a}=e,s=window.indexedDB.open(i,a);s.onupgradeneeded=e=>o8.handleUpgrade(e,r),s.onsuccess=e=>t(e.target.result),s.onerror=e=>n(o8.convertToError(e.target.error))})).catch((()=>{}))}reportError(e){let t=e instanceof Error?e.message:String(e);this.errorLoggingReportingService.emit({type:"error-logging",event:r2.EXCEPTION,data:{error:{message:t}}})}async withTransaction(e,t,n){if(!this.db.objectStoreNames.contains(this.storeName))return n;try{let n=this.db.transaction(this.storeName,e),i=n.objectStore(this.storeName);return await new Promise(((e,r)=>{n.onerror=()=>r(o8.convertToError(n.error)),t(i).then((t=>e(t))).catch((e=>r(o8.convertToError(e))))}))}catch(e){return this.reportError(e),n}}handleCursor(e,t,n,i){let r=e.target.result;if(r)if(r.value.createDate<t){let e=r.delete();e.onsuccess=()=>r.continue(),e.onerror=()=>i(o8.convertToError(e.error))}else r.continue();else n()}async deleteExpiredRecords(){let e=Date.now()-864e5*this.expiry;return this.withTransaction("readwrite",(t=>new Promise(((n,i)=>{let r=t.openCursor();r.onsuccess=t=>this.handleCursor(t,e,n,i),r.onerror=()=>i(o8.convertToError(r.error))}))),void 0)}async addRecord(e){return e.createDate||(e.createDate=Date.now()),this.withTransaction("readwrite",(async t=>{let n=t.put(e);return new Promise(((e,t)=>{n.onsuccess=()=>e(),n.onerror=()=>t(o8.convertToError(n.error))}))}),void 0)}async get(e){return this.withTransaction("readonly",(async t=>{let n=t.get(e);return new Promise(((e,t)=>{n.onsuccess=()=>e(n.result),n.onerror=()=>t(o8.convertToError(n.error))}))}),void 0)}async getAllRecords(){return this.withTransaction("readonly",(async e=>new Promise(((t,n)=>{let i=e.getAll();i.onsuccess=()=>t(i.result),i.onerror=()=>n(o8.convertToError(i.error))}))),[])}async clearStore(){return this.withTransaction("readwrite",(async e=>{let t=e.clear();return new Promise(((e,n)=>{t.onsuccess=()=>e(),t.onerror=()=>n(o8.convertToError(t.error))}))}),void 0)}constructor(e,t,n=r5()){this.db=e;let{objectStore:i}=t;this.storeName=i.name,this.keyPath=i.keyPath,this.expiry=i.expiry,this.errorLoggingReportingService=n}}var o7=class{async getIndexedDatabaseService(){return this.indexedDatabaseService}constructor(e,t,n){this.indexedDatabaseService=o8.open(e).then((i=>i?new o8(i,e,t):new n)).then((e=>e.deleteExpiredRecords().then((()=>e))))}},o9=class extends ez{async addRecord(e){return(await this.indexedDatabaseService).addRecord(e)}async get(e){return(await this.indexedDatabaseService).get(e)}async getAllRecords(){return(await this.indexedDatabaseService).getAllRecords()}async clearStore(){let e=await this.indexedDatabaseService;await e.clearStore()}async deleteExpiredRecords(){return(await this.indexedDatabaseService).deleteExpiredRecords()}static getServiceIdentifier(){return"UrlCacheServiceInterface"}constructor(e=o5(),t=r5()){super(),this.indexedDatabaseService=new o7(e,t,o6).getIndexedDatabaseService()}},le=((K={}).LOAD_FAIL="LOAD_FAIL",K.PLAY="PLAY",K.CAN_PLAY="CAN_PLAY",K.AUTO_PLAY_FAIL="AUTO_PLAY_FAIL",K.PAUSE="PAUSE",K.END="END",K.TIME_UPDATE="TIME_UPDATE",K.CLOSE="CLOSE",K.DURATION_CHANGE="DURATION_CHANGE",K.WAITING="WAITING",K.SUSPEND="SUSPEND",K.RETRY="RETRY",K.MAXIMIZE="MAXIMIZE",K.MINIMIZE="MINIMIZE",K),lt=((G={}).LOADING="LOADING",G.LOAD_FAIL_RETRY="LOAD_FAIL_RETRY",G.PLAYING="PLAYING",G.PAUSED="PAUSED",G.AUTO_PLAY_FAIL="AUTO_PLAY_FAIL",G.ENDED="ENDED",G.FINAL="FINAL",G),ln=((Y={}).UPDATE_PROGRESS="updateProgress",Y.EMIT_PROGRESS="emitProgress",Y.EMIT_LOAD="emitLoad",Y.EMIT_PLAY="emitPlay",Y.EMIT_PAUSE="emitPause",Y.EMIT_CLOSE="emitClose",Y.EMIT_CLOSE_FULLY_PLAYED="emitCloseFullyPlayed",Y.INCREMENT_LOOP_COUNT="incrementLoopCount",Y.REPORT_VIDEO_START="reportVideoStart",Y.SET_CAN_PLAY="setCanPlay",Y.EMIT_DURATION_CHANGE="emitDurationChange",Y.EMIT_TIME_UPDATE="emitTimeUpdate",Y.EMIT_WAITING="emitWaiting",Y.EMIT_SUSPEND="emitSuspend",Y.UPDATE_CURRENT_TIME="updateCurrentTime",Y.RESET_CURRENT_TIME="resetCurrentTime",Y.EMIT_CHECKPOINT_TPAT_EVENT="emitCheckpointTpatEvent",Y.EMIT_SCENE_EVENT="emitTrackingEvent",Y.DISABLE_THEATRE_MODE="disableTheatreMode",Y),li=((j=li||{}).FSC="FSC",j);const lr=()=>tH(),la=()=>tH();var ls=class extends ez{setVideoContext(e,t,n){this.videoScene=e,this.videoElement=t,this.videoInterpreter=n}getVideoScene(){return this.videoScene}getVideoElement(){return this.videoElement}getVideoInterpreter(){return this.videoInterpreter}getFullScreenCallToActionEventHandlerProps(){var e;return this.videoScene?{fullScreenClickConfig:tt(eJ({},this.videoScene.getFullScreenClickConfig()),{enabled:!0,target:null!=(e=this.videoScene.getFullScreenClickConfig().target)?e:iV.SKPV}),trackingEventMapConfig:tt(eJ({},this.videoScene.getTrackingEventMapConfig()),{enabled:!0}),sceneId:this.videoScene.getId()}:{}}clickHandler(){var e;this.fullScreenCallToActionReportingService.emit({type:"fsc",event:li.FSC,data:{scene_id:null==(e=this.videoScene)?void 0:e.getId()}})}videoAdViewableChange(e,t,n=!1){this.videoScene&&this.videoInterpreter&&(t.event!==tx.MAXIMIZED||n?t.event===tx.MINIMIZED&&this.videoInterpreter.send({type:le.MINIMIZE}):this.videoInterpreter.send({type:le.MAXIMIZE,hasHlsVideo:this.videoScene.videoType===iB.HLS}))}isPortrait(){return"portrait"===this.environmentService.getOrientation()}closeVideo(){var e;null==(e=this.videoInterpreter)||e.send({type:le.CLOSE}),this.setVideoContext(void 0,null)}static getServiceIdentifier(){return"PictureInPictureServiceInterface"}constructor(e=tM(),t=la()){super(),this.environmentService=e,this.fullScreenCallToActionReportingService=t,this.videoElement=null}},lo=()=>({dbName:"viewMaster_indexed_db",dbVersion:1,objectStore:{name:"userActivity",keyPath:"eventId",expiry:90}}),ll=class extends o4{static getServiceIdentifier(){return"UserActivityServiceInterface"}},lc=class extends ez{findObservabilityActivityEvent(e){return t=>{var n;let i=t.activity;if("observability"===(null==i?void 0:i.eventType)&&(Array.isArray(i.data)&&i.data.some((t=>t.name===e))||(null==(n=i.data)?void 0:n.name)===e))return i}}findSceneEventActivityEvent(e,t){return n=>{var i;if("eventType"in n.activity&&"scene-event"===n.activity.eventType&&n.activity.name===e&&(null==(i=n.activity.data)?void 0:i.scene_type)===t)return n.activity}}getAdStartTime(){let e=this.reportingService.getActivity().find(this.findObservabilityActivityEvent(tA.AD_START));if(e)return new Date(e.timestamp)}getVideoEnd(){var e;let t=this.reportingService.getActivityEvents().find((e=>"video"===e.activity.eventType&&e.activity.name===aQ.CLOSE));if(null==t||null==(e=t.activity.data)?void 0:e.maximum_viewing_time)return Math.floor(1e3*t.activity.data.maximum_viewing_time)}getEndcardSceneEndActivity(){return this.reportingService.getActivityEvents().find((e=>"observability"===e.activity.eventType&&!!e.activity.data&&!Array.isArray(e.activity.data)&&e.activity.data.name===tA.SCENE_END&&e.activity.data.scene_type===iM.endcard))}getEndcardInteractions(){var e,t;let n=this.getEndcardSceneEndActivity();return null==n||null==(t=n.activity)||null==(e=t.data)?void 0:e.click_count}getEndcardDuration(){var e,t;let n=this.getEndcardSceneEndActivity();return null==n||null==(t=n.activity)||null==(e=t.data)?void 0:e.duration}getVideoCloseShown(){let e=this.reportingService.getActivity(),t=e.find(this.findObservabilityActivityEvent(tA.VIDEO_START)),n=e.find(this.findSceneEventActivityEvent(aE.CLOSE_BUTTON_SHOW,iM.video));if(t&&n)return n.timestamp-t.timestamp}getEndcardCloseShown(){let e=this.reportingService.getActivity(),t=e.find(this.findSceneEventActivityEvent(aE.SCENE_START,iM.endcard)),n=e.find(this.findSceneEventActivityEvent(aE.CLOSE_BUTTON_SHOW,iM.endcard));if(t&&n)return n.timestamp-t.timestamp}getEndcardInteractionAfterCloseButton(){var e,t;let n=this.getEndcardSceneEndActivity();return null==n||null==(t=n.activity)||null==(e=t.data)?void 0:e.interaction_after_close_button_visible}getUserActivityData(){var e,t,n;return{eventId:null!=(e=this.tokenService.get(t_.SESSION_ID))?e:"",creativeId:null!=(t=this.tokenService.get(t_.CREATIVE_ID))?t:"",adSource:this.tokenService.get(t_.AD_SOURCE),placementType:this.placementTypeService.getPlacementType(),time:this.getAdStartTime(),videoUrl:null!=(n=this.tokenService.get(t_.ORIGINAL_VIDEO_URL))?n:this.tokenService.get(t_.MAIN_STREAM),videoStart:0,videoEnd:this.getVideoEnd(),endcardInteractions:this.getEndcardInteractions(),endcardDuration:this.getEndcardDuration(),videoCloseShown:this.getVideoCloseShown(),endcardCloseShown:this.getEndcardCloseShown(),endcardInteractionAfterCloseButton:this.getEndcardInteractionAfterCloseButton(),rewarded:this.placementTypeService.isRewarded(),createDate:Date.now(),averageBandwidth:this.injectedGetVideoStreamAverageBandwidth()}}async addRecord(){let e=await this.indexedDatabaseService,t=this.getUserActivityData();return e.addRecord(t)}async getAllRecords(){return(await this.indexedDatabaseService).getAllRecords()}async deleteExpiredRecords(){return(await this.indexedDatabaseService).deleteExpiredRecords()}static getServiceIdentifier(){return"UserActivityServiceInterface"}constructor(e=lo(),t=r5(),n=tE(),i=tW(),r=oW,a=tV()){super(),this.indexedDatabaseService=new o7(e,t,ll).getIndexedDatabaseService(),this.tokenService=n,this.reportingService=i,this.placementTypeService=a,this.injectedGetVideoStreamAverageBandwidth=r}},ld=()=>{var e;let t=null==(e=tU.getValue())?void 0:e.scene;if((null==t?void 0:t.getSceneType())===iM.video)return t;if((null==t?void 0:t.getSceneType())===iM.composite){let e=t.getScenes().find((e=>e.getSceneType()===iM.video));if(e)return e}},lu=(e,t=ld)=>{var n;let i=null==(n=t())?void 0:n.getId();if(i)return(null!=e?e:iN()).interpreterMap.get(i)},lE=((X={}).SHOW="SHOW",X.HIDE="HIDE",X),l_=((z={}).SHOWING="SHOWING",z.HIDDEN="HIDDEN",z),lv=(($={}).ON_LAST_CHANCE_ENDCARD_SHOW="onLastChanceEndcardShow",$.ON_LAST_CHANCE_ENDCARD_HIDE="onLastChanceEndcardHide",$);const lh="last-chance-endcard",lS=e=>({id:null!=e?`${lh}-${e}`:lh,initial:l_.HIDDEN,context:{delay:0},states:{[l_.SHOWING]:{on:{[lE.HIDE]:{target:l_.HIDDEN,actions:[lv.ON_LAST_CHANCE_ENDCARD_HIDE]}}},[l_.HIDDEN]:{on:{[lE.SHOW]:{target:l_.SHOWING,actions:[lv.ON_LAST_CHANCE_ENDCARD_SHOW]}}}}}),lT={actions:{[lv.ON_LAST_CHANCE_ENDCARD_SHOW]:()=>{let e=aU(),t=oZ();e.emit(aE.LAST_CHANCE_ENDCARD_OPEN),t.emit(tA.SCENE_START,tO.LAST_CHANCE_ENDCARD_SCENE_START)},[lv.ON_LAST_CHANCE_ENDCARD_HIDE]:()=>{aU().emit(aE.LAST_CHANCE_ENDCARD_CLOSE)}}};var lp=(e,t)=>{let n=null!=t?t:iN(),i=null!=e?`${lh}-${e}`:lh;return n.interpreterMap.get(i)},lg=(e=tB,t=lp)=>{let n=e();if(!n)return!1;let i=t(n.getId());return null==i?void 0:i.state.matches(l_.SHOWING)},lC=(e,t,n)=>{if(!n)return;let i=n.getBoundingClientRect(),r=Math.max(i.left-e,0,e-i.right),a=Math.max(i.top-t,0,t-i.bottom);return parseInt(`${Math.sqrt(r*r+a*a)}`,10)};const lI=({sceneId:e,eventName:t,precedingEventName:n,reportingService:i},r=!1)=>{var a;let s,o=i.getActivityEvents();if(n){let t=o.find((t=>{var i;return(null==(i=t.activity.data)?void 0:i.scene_id)===e&&t.activity.name===n}));if(!t)return r?[]:null;s=t.timestamp}let l=i=>{var r;return(null==(r=i.activity.data)?void 0:r.scene_id)===e&&i.activity.name===t&&(!n||i.timestamp>s)};return r?o.filter(l):null!=(a=o.find(l))?a:null},lA=e=>lI(e,!0),lO=e=>lI(e,!1),lm=e=>{let t=lA(e);return 0===t.length?null:t[t.length-1]},lf=e=>{let t=lA(e);return 0===t.length?null:t[0]},lN=e=>e.reduce(((e,[t,n])=>e+(n.timestamp-t.timestamp)),0),lD=(e,t)=>lN(e.getActivityEventPairs("viewability",tx.MINIMIZED,tx.MAXIMIZED).filter((e=>e[0].timestamp>t))),lR=(e,t)=>lN(e.getActivityEventPairs("store-kit-product-view",nt.APP_STORE_OPEN,nt.APP_STORE_CLOSE).filter((e=>e[0].timestamp>t))),ly=({sceneId:e,eventName:t,precedingEventName:n,reportingService:i=aU()})=>{var r,a;let s=null!=(a=null==(r=lO({sceneId:e,eventName:t,precedingEventName:n,reportingService:i}))?void 0:r.timestamp)?a:null;if(null===s)return;let o=lD(i,s),l=lR(i,s);return{sceneEventTimestamp:s,elapsedTimeSinceEvent:Date.now()-s,backgroundDuration:o,appStoreDuration:l}},lL=({sceneId:e,eventName:t,precedingEventName:n,reportingService:i=aU()})=>{let r=ly({sceneId:e,eventName:t,precedingEventName:n,reportingService:i});if(void 0===r)return;let{elapsedTimeSinceEvent:a,appStoreDuration:s,backgroundDuration:o}=r;return a-o+s},lP=e=>e?aE.LAST_CHANCE_ENDCARD_OPEN:void 0,lb=({coordinates:e,clickTarget:t,targetElement:n})=>(null==n?void 0:n.contains(t))||t.contains(n)?0:lC(e.x,e.y,n),lw=(e,t)=>{var n,i,r;return t?null==(i=e.getLastChanceEndcardConfig)||null==(n=i.call(e).close)?void 0:n.countdown:null==(r=e.getCloseButtonConfig)?void 0:r.call(e,{}).countdown},lM=e=>{let t=e(),n=null==t?void 0:t.state.context.currentTime;return void 0!==n?parseInt(""+1e3*n,10):void 0},lV=(e,t)=>new Promise((n=>{let i=ao(e,"tpat").pipe(as((e=>[rK.POSTROLL_CLICK,rK.CLICK_URL].includes(e.event))),ap((()=>!0)));aX(sa(200,t,!1),i).subscribe({next:e=>{n(e)},error:()=>n(!1),complete:()=>n(!1)})})),lk=()=>({nextButton:document.querySelector(`#${aR}, #${aP}`),closeButton:document.querySelector(`#${aN}`),ctaButton:document.querySelector(`#${aI}, #${ay}, #${aL}`),privacyButton:document.querySelector(`#${aw}`),muteButton:document.querySelector(`#${aO}`),countdown:document.querySelector(`#${aD}`)}),lU=({sceneId:e,lastChanceEndcardVisible:t,reportingService:n})=>{let i=lm({sceneId:e,eventName:aE.NEXT_BUTTON_COUNTDOWN_TICK,precedingEventName:lP(t),reportingService:n});if(!i)return 0;let r=Date.now()-i.timestamp,a=1e3*i.activity.data.delay;return r<=1e3?-(a-r):-a},lB=({sceneId:e,lastChanceEndcardVisible:t,reportingService:n})=>lL({sceneId:e,eventName:t?aE.LAST_CHANCE_ENDCARD_OPEN:aE.SCENE_START,reportingService:n}),lH=({sceneId:e,lastChanceEndcardVisible:t,reportingService:n})=>{var i;let r=lf({sceneId:e,eventName:aE.NEXT_BUTTON_COUNTDOWN_TICK,precedingEventName:lP(t),reportingService:n});return parseInt(""+1e3*(null!=(i=null==r?void 0:r.activity.data.delay)?i:0),10)},lW=e=>{if(!lk().closeButton)return parseInt(`${lU(e)}`,10);let{sceneId:t,lastChanceEndcardVisible:n,reportingService:i}=e;return lL({sceneId:t,eventName:aE.CLOSE_BUTTON_SHOW,precedingEventName:lP(n),reportingService:i})},lx=({coordinates:e,clickTarget:t,lastChanceEndcardVisible:n})=>{let i=lk();return{closeDistance:lb({coordinates:e,clickTarget:t,targetElement:i.nextButton}),ctaDistance:lb({coordinates:e,clickTarget:t,targetElement:i.ctaButton}),privacyDistance:lb({coordinates:e,clickTarget:t,targetElement:i.privacyButton}),muteDistance:n?void 0:lb({coordinates:e,clickTarget:t,targetElement:i.muteButton})}},lF=e=>{let{data:t={}}=e;return{sceneId:t.scene_id,coordinates:t.click_coordinates,clickTarget:t.click_target,eventName:e.event}},lK=e=>{let{eventName:t,sceneId:n,coordinates:i,clickTarget:r}=e;return t===aE.CLICK&&!!n&&!!i&&!!r},lG=e=>[aE.SCENE_START,aE.LAST_CHANCE_ENDCARD_OPEN].includes(e),lY=(e,t,n,i)=>(r,a)=>{let s=lF(a),o=!!i();if(lK(s)){let t=n();t&&e({currentScene:t,coordinates:s.coordinates,clickTarget:s.clickTarget,lastChanceEndcardVisible:o})}lG(s.eventName)&&t()};var lj=class extends ez{setupEventHandlers(){this.injectedSceneEventReportingService.addEventHandler("scene-event",lY(this.collectClickMetrics.bind(this),this.resetSceneClickIndex.bind(this),this.injectedGetCurrentScene,this.injectedGetIsLastChanceEndcardVisible))}resetSceneClickIndex(){this.sceneClickIndex=void 0}updateGlobalMetrics(){var e,t;this.clickIndex=(null!=(e=this.clickIndex)?e:-1)+1,this.sceneClickIndex=(null!=(t=this.sceneClickIndex)?t:-1)+1}async collectClickMetrics({currentScene:e,coordinates:t,clickTarget:n,lastChanceEndcardVisible:i}){let r={sceneId:e.getId(),lastChanceEndcardVisible:i,reportingService:this.injectedSceneEventReportingService};this.updateGlobalMetrics();let a=tt(eJ({clickX:parseInt(String(t.x),10),clickY:parseInt(String(t.y),10),width:window.innerWidth,height:window.innerHeight,clickIndex:this.clickIndex,sceneClickIndex:this.sceneClickIndex},lx({coordinates:t,clickTarget:n,lastChanceEndcardVisible:i})),{sceneElapsedDuration:lB(r),closeCountdown:lw(e,i),closeButtonTimeStamp:lW(r),minimumView:lH(r),videoTimeStamp:i?void 0:lM(this.injectedGetVideoInterpreter),mmp:await lV(this.injectedTpatReportingService,this.injectedTimerService)});this.injectedObservabilityEventReportingService.emit({type:"observability",event:tI.EVENT,data:eJ({scene_id:e.getId(),scene_type:i?"lcec":e.getSceneType(),name:tA.CLICK_METRICS},this.mapClickMetricsForObservability(a))})}mapClickMetricsForObservability(e){return{click_index:e.clickIndex,click_x:e.clickX,click_y:e.clickY,close_button_timestamp:e.closeButtonTimeStamp,close_countdown:e.closeCountdown,close_distance:e.closeDistance,cta_distance:e.ctaDistance,height:e.height,minimum_view:e.minimumView,mmp:e.mmp,mute_distance:e.muteDistance,privacy_distance:e.privacyDistance,scene_click_index:e.sceneClickIndex,scene_elapsed_duration:e.sceneElapsedDuration,video_timestamp:e.videoTimeStamp,width:e.width}}static getServiceIdentifier(){return"ClickMetricsServiceInterface"}constructor({injectedGetVideoInterpreter:e=lu,injectedGetIsLastChanceEndcardVisible:t=lg,injectedSceneEventReportingService:n=aU(),injectedObservabilityEventReportingService:i=oZ(),injectedGetCurrentScene:r=tB,injectedTpatReportingService:a=rX(),injectedTimerService:s=iF()}={}){super(),this.injectedGetVideoInterpreter=e,this.injectedGetIsLastChanceEndcardVisible=t,this.injectedSceneEventReportingService=n,this.injectedObservabilityEventReportingService=i,this.injectedGetCurrentScene=r,this.injectedTpatReportingService=a,this.injectedTimerService=s,this.clickIndex=void 0,this.sceneClickIndex=void 0,this.setupEventHandlers()}},lX=class extends ez{static getServiceIdentifier(){return"CloseButtonServiceInterface"}constructor(...e){super(...e),this.cachedConfig=new Map}},lz=((q={}).GET="Get",q.POST="Post",q),l$=class extends ez{get(e,t){this.pingUrl(lz.GET,e,null==t?void 0:t.retry,void 0,null==t?void 0:t.headers)}post(e,t){this.pingUrl(lz.POST,e,null==t?void 0:t.retry,null==t?void 0:t.requestData,null==t?void 0:t.headers)}pingUrl(e,t,n,i,r){let a=i?JSON.stringify(i):void 0,s=r?JSON.stringify(r):void 0;this.mraidBridgeExt.pingUrl(e,t,null==n||n,a,s)}static getServiceIdentifier(){return"MraidNetworkRequestServiceInterface"}constructor(e){super(),this.mraidBridgeExt=e.getMraidBridgeExt()}},lq=class{get(e){e.length>0&&((new Image).src=e)}post(e,t){if(!navigator.sendBeacon)return;let n="";(null==t?void 0:t.requestData)&&(n=JSON.stringify(t.requestData)),navigator.sendBeacon(e,n)}},lZ=class{resolve(){var e;return"function"==typeof(null==(e=this.mraidService.getMraidBridgeExt())?void 0:e.pingUrl)?new l$(this.mraidService):new lq}constructor(e){this.mraidService=e}},lQ=0;function lJ(e,t,n,i,r,a){t||(t={});var s,o,l=t;if("ref"in l)for(o in l={},t)"ref"==o?s=t[o]:l[o]=t[o];var c={type:e,props:l,key:n,ref:s,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--lQ,__i:-1,__u:0,__source:r,__self:a};if("function"==typeof e&&(s=e.defaultProps))for(o in s)void 0===l[o]&&(l[o]=s[o]);return t1.vnode&&t1.vnode(c),c}const l0={V4_9_0:new tT("4.9.0"),V4_9_3:new tT("4.9.3"),V5_0_0:new tT("5.0.0"),V5_0_1:new tT("5.0.1"),V5_1_2:new tT("5.1.2"),V5_2_1:new tT("5.2.1")};var l1=((Z=l1||{}).SILENT="silent",Z.UN_SILENT="un-silent",Z),l2=(e=td())=>{var t,n,i;return null!=(i=null==(n=e.getMraidExt())||null==(t=n.isSilent)?void 0:t.call(n))&&i},l3=(e=eX.getInstance())=>e.get(rH),l5=(e=l3())=>{let t=[],n=e=>{e.forEach((e=>{let i=e.getSceneType();(i===iM.video||i===iM.endcard)&&t.push(e),i===iM.composite&&n(e.getScenes())}))};return n(e),t.some((e=>e.muted))},l4=()=>tH();const l6=(e=tH())=>e.getActivityEvents().some((e=>"silent"===e.activity.eventType&&(e.activity.name===l1.SILENT||e.activity.name===l1.UN_SILENT))),l8=(e,t,n)=>{t||n||e.emit({type:"silent",event:l1.UN_SILENT})},l7=(e,t)=>{e.emit({type:"silent",event:t?l1.SILENT:l1.UN_SILENT})};var l9=(e,t=td(),n=l4(),i=tM(),r=l5())=>{let a=l2(t);var s;i.getOperatingSystem()===tg.iOS?(null==(s=t.getMraid())||s.removeEventListener("silentChange",e),l8(n,r,a)):l7(n,a)},ce=()=>{let e=eX.getInstance(),t=ns.getServiceIdentifier();return e.get(t)},ct=()=>tH(),cn=(e=ct(),t=ce())=>{let n=t.isViewable();e.emit({type:"viewability",event:n?tx.MAXIMIZED:tx.MINIMIZED})},ci=()=>{let e=eX.getInstance(),t=oz.getServiceIdentifier();return e.get(t)},cr=((Q={}).INFO="info",Q.READY="ready",Q.ERROR="error",Q.STATE_CHANGE="stateChange",Q.ORIENTATION_CHANGE="orientationChange",Q.VIEWABLE_CHANGE="viewableChange",Q.SIZE_CHANGE="sizeChange",Q.SILENT_CHANGE="silentChange",Q),ca=((J={}).CLOSE_BUTTON_WILL_SHOW="closeButtonWillShow",J),cs=class extends ez{getEventCallbacks(e,t){return this.callbacks[e]||(this.callbacks[e]={}),this.callbacks[e][t]=this.callbacks[e][t]||[],[...this.callbacks[e][t]]}updateEventCallbacks(e,t,n){this.callbacks[e]||(this.callbacks[e]={}),this.callbacks[e][t]=n}addEventListener(e,t,n){if(!this.allowedMraidEvents.includes(t))return;let i=this.getEventCallbacks(e,t);this.updateEventCallbacks(e,t,[...i,n])}removeEventListener(e,t,n){if(this.allowedMraidEvents.includes(t))if(n){let i=this.getEventCallbacks(e,t).filter((e=>e!==n));this.updateEventCallbacks(e,t,i)}else this.updateEventCallbacks(e,t,[])}flushAllEventCallbacks(e){this.callbacks[e]&&Object.keys(this.callbacks[e]).forEach((t=>{this.updateEventCallbacks(e,t,[])}))}init(){this.mraidEvents.forEach((e=>{let t=(...n)=>{"silentChange"===e&&this.injectedHandleAdSilentMessage(t),"viewableChange"===e&&this.injectedHandleAdViewabilityMessage();let i=tB();i&&this.getEventCallbacks(i.getId(),e).forEach((e=>{e(...n)}))};this.mraidService.getMraid().addEventListener(e,t)}))}triggerEvent(e,t,...n){"viewableChange"===t&&this.injectedPreloadService.isHTMLPreloading(e)||this.getEventCallbacks(e,t).forEach((e=>{e(...n)}))}static getServiceIdentifier(){return"MraidEventsProxyServiceInterface"}constructor(e,t=td(),n=l9,i=cn,r=ci()){super(),this.mraidEvents=e,this.mraidService=t,this.injectedHandleAdSilentMessage=n,this.injectedHandleAdViewabilityMessage=i,this.injectedPreloadService=r,this.allowedMraidEvents=[...this.mraidEvents,...Object.values(ca)],this.callbacks={}}},co=()=>{let e=eX.getInstance(),t=cs.getServiceIdentifier();return e.get(t)};const cl=(e=tE())=>e.has(t_.ERID_ADVERTISER_INFO,t_.ERID_ADVERTISER_LINK,t_.ERID_RECOMMEND_RULE,t_.CTA_BUTTON_URL),cc=e=>e?`?${e.toString()}`:"",cd=(e=tE())=>{if(cl(e)){let t=new URLSearchParams;return t.set("adSource",tp(e.get(t_.ERID_ADVERTISER_INFO))),t.set("adUrl",tp(e.get(t_.ERID_ADVERTISER_LINK))),t.set("adRulesUrl",tp(e.get(t_.ERID_RECOMMEND_RULE))),t.set("adCtaUrl",e.get(t_.CTA_BUTTON_URL)),`https://cdn-lb.vungle.com/privacy-policy-and-ad-info-erid/index.html${cc(t)}`}return e.get(t_.VUNGLE_PRIVACY_URL)};var cu=()=>({[iY.SET_PRIVACY_BUTTON_VISIBLE]:e9({isPrivacyButtonVisible:!0}),[iY.SET_PRIVACY_BUTTON_HIDDEN]:e9({isPrivacyButtonVisible:!1}),[iY.OPEN_PRIVACY_URL]:()=>{var e,t;let n=tM(),i=tE(),r=oZ(),a=n.getOperatingSystem(),s=a===tg.Android||a===tg.iOS&&n.getMraidVersion().isGreaterThanOrEqualTo(l0.V5_0_0);r.emit(tA.PRIVACY_CTA,tO.PRIVACY_CTA),s&&!cl(i)?null==(e=td().getMraidBridgeExt())||e.openPrivacy(cd(i)):null==(t=td().getMraid())||t.open(cd(i))},[iY.SET_PRIVACY_DRAWER_OPEN]:e9({isPrivacyDrawerOpen:!0}),[iY.SET_PRIVACY_DRAWER_CLOSED]:e9({isPrivacyDrawerOpen:!1}),[iY.TRIGGER_VIEWABLE_CHANGE]:e=>{let t=co(),n=ce();e.isPrivacyDrawerOpen?n.setViewable(!1):n.resetViewable();let i=tB();i&&t.triggerEvent(i.getId(),cr.VIEWABLE_CHANGE,n.isViewable())}}),cE=()=>{let e=eX.getInstance(),t=im.getServiceIdentifier();return e.get(t)},c_=()=>{let e=eX.getInstance(),t=ls.getServiceIdentifier();return e.get(t)},cv=()=>{let e=eX.getInstance(),t=oQ.getServiceIdentifier();return e.get(t)},ch=(e=lu,t=c_())=>({[iP.MUTE_SOUND]:()=>{cE().mute()},[iP.UN_MUTE_SOUND]:()=>{cE().unmute()},[iP.EMIT_MUTED]:()=>{let e=a2(),t=cE();e.emit({type:"video",event:t.isMuted()?aQ.MUTE:aQ.UNMUTE})},[iP.EMIT_VIDEO_ERROR]:(e,t)=>{a2().emit({type:"video",event:aQ.ERROR,data:t})},[iP.CLOSE_VIDEO]:()=>{var t;null==(t=e())||t.send({type:le.CLOSE})},[iP.CLOSE_VIDEO_CURRENT_SCENE]:()=>{var t;null==(t=e())||t.send({type:le.CLOSE})},[iP.PAUSE_VIDEO]:()=>{var t;null==(t=e())||t.send({type:le.PAUSE})},[iP.PLAY_VIDEO]:()=>{var t;null==(t=e())||t.send({type:le.PLAY})},[iP.POSTROLL_VIEW]:()=>{rX().emit(rK.POSTROLL_VIEW,!0)},[iP.SEND_EVENT_VIDEO_SKIP_TO_NEXT_SCENE]:()=>{oZ().emit(tA.VIDEO_SKIP_TO_ENDCARD,tO.VIDEO_SKIP_TO_ENDCARD)},[iP.SET_PICTURE_IN_PICTURE_VIDEO_CONTEXT]:()=>{var n;let i=tB(),r=null==(n=e())?void 0:n.state.context.videoElement;t.setVideoContext(i,r,e())},[iP.SHOW_PICTURE_IN_PICTURE]:e9({shouldRenderPictureInPicture:()=>!0}),[iP.CLOSE_PICTURE_IN_PICTURE]:e9({shouldRenderPictureInPicture:()=>!1}),[iP.SEND_FATAL_VIDEO_ERROR]:()=>{let e=cv(),t={type:"error-logging",event:r2.RESOURCE,data:{resource_type:r3.VIDEO,is_fatal:!0,error:Error(tR)}};e.send(t)},[iP.DISABLE_THEATRE_MODE]:()=>{a5().emit({type:"theatre-mode-event",event:oK.DISABLE_THEATRE_MODE})}}),cS=(e=aU())=>({[rv.EMIT_CLOSE_BUTTON_SHOW]:()=>{e.emit(aE.CLOSE_BUTTON_SHOW)},[rv.EMIT_CLOSE_BUTTON_CLICK]:()=>{e.emit(aE.CLOSE_BUTTON_CLICK)},[rv.SET_CLOSE_BUTTON_VISIBLE]:e9({isCloseButtonVisible:!0}),[rv.SET_CLOSE_BUTTON_HIDDEN]:e9({isCloseButtonVisible:!1})}),cT=()=>"true"===tE().get(t_.OM_ENABLED),cp=((ee={}).REMOVE_HANDLER="REMOVE_HANDLER",ee),cg=()=>{try{return window.OmidSessionClient.default}catch(e){return}},cC=class{init(e,t){var n,i;if(this.sessionClient=cg(),!this.sessionClient)return;let{AdSession:r,Partner:a,Context:s,VerificationScriptResource:o,AdEvents:l,MediaEvents:c}=this.sessionClient;if(t){let e=new o(t.vendorURL,t.vendorKey,t.params);this.verificationScriptResources=[e]}let d=tM().getSdkVersion().toString();this.partner=new a(this.vungleData.partnerName,d||this.vungleData.partnerVersion),this.context=new s(this.partner,this.verificationScriptResources),void 0!==e&&(null==(n=this.context)||n.setVideoElement(e)),this.adSession=new r(this.context),(null==(i=this.adSession)?void 0:i.isSupported)&&this.adSession.isSupported()&&(this.adEvents=new l(this.adSession),this.mediaEvents=new c(this.adSession))}eventDrain(){this.funcsOnImpression.forEach((e=>{e()})),this.funcsOnImpression=[]}pushOrCallFunction(e){this.hasSessionStarted?e():this.funcsOnImpression.push(e)}onCtaClick(){this.pushOrCallFunction((()=>{var e;null==(e=this.mediaEvents)||e.adUserInteraction("click")}))}constructor(){this.vungleData={partnerName:"Vungle",partnerVersion:"1.0"},this.hasSessionStartRequested=!1,this.initialized=!1,this.hasSessionStarted=!1,this.funcsOnImpression=[]}},cI=((et=cI||{}).HTML_DISPLAY="htmlDisplay",et.VIDEO="video",et),cA=((en=cA||{}).LOADED="loaded",en),cO=((ei=cO||{}).SESSION_START="sessionStart",ei.SESSION_ERROR="sessionError",ei.SESSION_FINISH="sessionFinish",ei),cm=class extends cC{init(){if(!this.initialized)try{var e,t,n;this.initialized=!0,super.init(),null==(e=this.adSession)||e.setCreativeType(cI.HTML_DISPLAY),null==(t=this.adSession)||t.setImpressionType(cA.LOADED),null==(n=this.adSession)||n.registerSessionObserver(this.onSessionChange.bind(this))}catch(e){tH().emit({type:"error-logging",event:r2.EXCEPTION,data:{error:{message:"Unable to init omsdk banner and mrec"}}})}}onSessionStarted(){var e,t;this.hasSessionStartRequested&&this.initialized&&!this.hasSessionStarted&&(null==(e=this.adEvents)||e.impressionOccurred(),this.hasSessionStarted=!0,null==(t=this.adEvents)||t.loaded(null),this.eventDrain())}onSessionChange(e){if(e.type===cO.SESSION_START)return this.hasSessionStartRequested=!0,void this.onSessionStarted();e.type===cO.SESSION_FINISH&&tH().emit({type:"cta",event:cp.REMOVE_HANDLER})}static getServiceIdentifier(){return"OmsdkHtmlDisplayServiceInterface"}constructor(){super(),this.init()}},cf=()=>{if(cT()){let e=cm.getServiceIdentifier(),t=new cm;eX.getInstance().bind(e,t)}},cN=()=>tH();const cD=(e,t)=>`${e}_${t}`,cR=e=>{let t=e.split("_");return t[t.length-1]},cy=(e,t,n=nr())=>{var i,r;if(!(null==(i=t.data)?void 0:i.trackingEventMapConfig.enabled))return;let a=cR(t.event),s=null==(r=t.data)?void 0:r.trackingEventMapConfig.events;if(!(null==s?void 0:s[a]))return;let o=s[a];null==o||o.forEach((e=>{n.get(e)}))};var cL=(e=!0,t=cN())=>{nK((()=>e?(t.addEventHandler("tracking-event",cy),()=>{t.removeEventHandler("tracking-event",cy)}):()=>{}),[t,e])},cP=(e,t,n,i=!1,r=cN())=>{if(!t||!n||!n.enabled)return;let a=n.events;if(!(null==a?void 0:a[e]))return;let s=cD(t,e);r.emit({type:"tracking-event",event:s,fireOnlyOnce:i,data:{trackingEventMapConfig:n}})},cb=(e,t=l3())=>{let n=t.find((t=>t.getId()===e.value));if(!n)throw Error(`No scene found for state ${e.value}`);return n},cw=()=>{let e=eX.getInstance(),t=na.getServiceIdentifier();return e.get(t)},cM=(e=tB,t=iD,n=rX,i=cP,r=oA,a=cw)=>({[an.ON_CREATIVE_VIEW]:()=>{let t=e();t&&[iM.endcard,iM.image].includes(t.getSceneType())&&i(ik.CREATIVE_VIEW,t.getId(),t.getTrackingEventMapConfig(),!0)},[an.FLUSH_MRAID_EVENTS_PROXY_CALLBACKS]:()=>{let e=tB();e&&co().flushAllEventCallbacks(e.getId())},[an.DESTROY_IFRAME]:e9({shouldRenderIFrame:!1}),[an.INIT_CHECKPOINTS]:()=>{!n().hasExistingEvent({type:"tpat",event:rK.CHECKPOINT_0})&&ce().isViewable()&&st(0)},[an.INIT_OMSDK_HTML_DISPLAY_SERVICE]:()=>{cf()},[an.ON_ENDCARD_CLOSE_BUTTON_WILL_SHOW]:()=>{let e=co(),t=tB();t&&(e.triggerEvent(t.getId(),ca.CLOSE_BUTTON_WILL_SHOW),e.removeEventListener(t.getId(),ca.CLOSE_BUTTON_WILL_SHOW))},[an.ON_SHOW]:()=>{let e=iN().interpreterMap.get("ad");if(e){let n=t(cb(e.state).getId());null==n||n.send({type:iR.SHOW})}},[an.FIRE_IF_ENGAGEMENT_IS_USED]:()=>{var e;(null==(e=r())?void 0:e.isEndcardAmplified())&&a().pushEvent({name:tA.ENGAGEMENT_IS_USED,metric:tO.ENGAGEMENT_IS_USED})}});const cV=tk({isLastChanceEndcardOverlayShowing:!1},"LastChanceEndcardOverlayContext");var ck=((er={}).SHOW_LAST_CHANCE_ENDCARD="showLastChanceEndcard",er.CLOSE_LAST_CHANCE_ENDCARD="closeLastChanceEndcard",er),cU=()=>({showLastChanceEndcard:()=>{let e=tU.getValue().scene;if(rb(e)){let t=lp(e.getId());cV.setValue({isLastChanceEndcardOverlayShowing:!0}),null==t||t.send({type:lE.SHOW})}},closeLastChanceEndcard:()=>{cV.setValue({isLastChanceEndcardOverlayShowing:!1});let e=tU.getValue().scene;if(rb(e)){let t=lp(e.getId());null==t||t.send({type:lE.HIDE})}}}),cB=class extends ez{initializeForComponent(e,t,n){0!==t&&(this.storeKitOverlayService.canOpen()?e(!0):this.timerService.getNewTimer(n,(()=>{this.initializeForComponent(e,t-1,n)})).start())}startAutoShow(e){var t;if(this.reset(),!e.enabled)return Promise.resolve();let n=this.timerService.getNewTimer(null!=(t=e.autoShowDelay)?t:0);return this.openTimer=n,(async()=>{let t;if(e.isAutoClose){var i;let n=null!=(i=e.autoCloseDelay)?i:5e3;t=this.timerService.getNewTimer(n,(()=>{this.storeKitOverlayService.close()})),this.closeTimer=t}this.storeKitOverlayService.open({delayed:!0,fallback:i0.OFF}),await n.asPromise().then((()=>{this.storeKitOverlayService.open({delayed:!0,fallback:i0.OFF}),t&&t.start(),e.openCallback&&e.openCallback(),n.destroy()}))})()}reset(){this.openTimer&&(this.openTimer.destroy(),this.openTimer=void 0),this.closeTimer&&(this.closeTimer.destroy(),this.closeTimer=void 0)}static getServiceIdentifier(){return"StoreKitOverlayAutoShowServiceInterface"}constructor(e,t=iF()){super(),this.storeKitOverlayService=e,this.timerService=t}},cH=()=>{let e=eX.getInstance(),t=cB.getServiceIdentifier();if(e.has(t))return e.get(t)},cW=((ea={}).RESET_AUTO_SHOW_OVERLAY_SERVICE="resetAutoShowOverlayService",ea),cx=(e=cH)=>({resetAutoShowOverlayService:()=>{let t=e();null==t||t.reset()}}),cF=class extends ez{fireStoreKitOverlayWithDelay(e){let t=i3();new tl(e,(()=>{(null==t?void 0:t.canOpen())&&(null==t||t.open())})).start()}openStoreViewWithDelay(e){if(rr()&&rc())return void this.fireStoreKitOverlayWithDelay(e);let t=iF().getNewTimer(e,(()=>{let e=ri();null==e||e.open(!1)}));t.start(),this.timer=t}reset(){var e;null==(e=this.timer)||e.destroy()}static getServiceIdentifier(){return"AppStoreOnDelayServiceInterface"}},cK=()=>{let e=eX.getInstance(),t=cF.getServiceIdentifier();if(e.has(t))return e.get(t)},cG=((es={}).RESET_APP_STORE_ON_DELAY_SERVICE="resetAppStoreOnDelayService",es),cY=(e=cK)=>({resetAppStoreOnDelayService:()=>{let t=e();null==t||t.reset()}}),cj=()=>eJ({},rp(),cu(),ch(),i4(),cx(),rE(),iG(),ix(),cS(),cM(),cU(),cY()),cX=(e=tE())=>({isPrivacyButtonVisible:!1,isPrivacyDrawerOpen:!1,isCloseButtonVisible:!1,shouldRenderIFrame:!0,shouldRenderPictureInPicture:!1,isFreeForm:e.has(t_.AD_EXPERIENCE),allowDebug:e.has(t_.IS_RUNNING_INSIDE_EMBED)||e.has(t_.IS_STAFF_DEVICE_BID),isIncentivized:th(e.get(t_.INCENTIVIZED)),globalTimer:0,isTheatreModeActive:!1}),cz=class{convertScene(e){let t=e.getTransitions(),n={[e.getId()]:{entry:[],exit:[],on:{}}};return e.getEntryActions().forEach((t=>{n[e.getId()].entry.push(t.name)})),e.getExitActions().forEach((t=>{n[e.getId()].exit.push(t.name)})),t.forEach((t=>{let i=t.actions.map((e=>e.name)),{cond:r}=t;t.scene?n[e.getId()].on[t.name]={actions:i,target:t.scene.getId(),cond:r}:n[e.getId()].on[t.name]={actions:i,cond:r}})),this.removeFalsyValues(n)}convertScenes(e){let t={};return e.forEach((e=>{Object.assign(t,this.convertScene(e))})),t}removeFalsyValues(e){return Object.keys(e).forEach((t=>{e[t]&&"object"==typeof e[t]?(this.removeFalsyValues(e[t]),0===Object.keys(e[t]).length&&delete e[t]):e[t]||delete e[t]})),e}},c$=()=>{let e=new cz,t=l3(),n=e.convertScenes(t);return{id:"ad",initial:t[0].getId(),states:n,context:cX()}},cq=((eo=cq||{}).DECODING_ERROR="decoding_error",eo),cZ=(e=td(),t=tV())=>{var n,i,r,a,s,o;return null!=(o=null!=(s=null==(i=e.getMraidExt())||null==(n=i.getConsentRequired)?void 0:n.call(i))?s:null==(a=e.getMraid())||null==(r=a.getConsentRequired)?void 0:r.call(a))&&o&&!t.isBanner()},cQ=class{parseAdExperienceData(e){try{let t=tp(e);return JSON.parse(t)}catch(e){return void this.freeFormReportingService.emit({type:"free-form",event:cq.DECODING_ERROR})}}getAdExperience(e=cZ(this.mraidService,this.placementTypeService)){var t,n;if(!this.adExperienceCache){let n=null!=(t=this.tokenService.get(t_.AD_EXPERIENCE))?t:"",i=this.parseAdExperienceData(n);this.adExperienceCache=this.addGDPRSceneIfConsentRequired(i,e)}return null!=(n=this.adExperienceCache)?n:{components:{},statemachine:{id:"ad",initial:"closed",states:{}}}}addGDPRSceneIfConsentRequired(e,t=cZ(this.mraidService,this.placementTypeService)){if(e&&t){let t=e.statemachine.initial;e.statemachine.states.gdpr={on:{[ib.NEXT]:{target:t}}},e.statemachine.initial=rW}return e}getAdMachineConfig(){let e=this.getAdExperience();return tt(eJ({},null==e?void 0:e.statemachine),{id:"ad"})}getSceneData(){let e=this.getAdExperience();return(null==e?void 0:e.components)?Object.entries(e.components).map((([e,t])=>tt(eJ({},t),{id:e}))):[]}constructor(e=tE(),t=tH(),n=td(),i=tV(),r=oC()){this.tokenService=e,this.freeFormReportingService=t,this.mraidService=n,this.placementTypeService=i,this.htmlDecoderService=r}},cJ=(e=new cQ,t=l3())=>{let n=e.getAdMachineConfig();return n.states=n.states||{},t.forEach((e=>{let t=e.getId();n.states[t]=n.states[t]||{on:{},entry:[],exit:[]},e.getTransitions().forEach((e=>{if(n.states[t].on){var i,r,a;let s=e.name,o=null==(i=e.scene)?void 0:i.getId(),l=null==(r=n.states[t].on)?void 0:r[s],c={actions:Array.from(new Set([...Array.from(null!=(a=null==l?void 0:l.actions)?a:[]),...e.actions.map((e=>e.name))])),cond:(null==l?void 0:l.cond)?l.cond:e.cond};o&&(c.target=o),n.states[t].on[s]=eJ({},null!=l?l:{},c)}})),n.states[t].entry||(n.states[t].entry=[]),n.states[t].entry.push(...e.getEntryActions().map((e=>e.name))),n.states[t].exit||(n.states[t].exit=[]),n.states[t].exit.push(...e.getExitActions().map((e=>e.name)))})),tt(eJ({},n),{context:eJ({},cX(),n.context)})},c0=()=>tH(),c1=((el=c1||{}).SCENE_BUILDER_COMPLETE="SCENE_BUILDER_COMPLETE",el),c2=(e,t,n={})=>{let i=[],r=new Set,a=new Set,s=t.reduce(((e,t)=>(e[t.getId()]=t,e)),{});return function t(o){var l,c,d;let u,E;if(a.has(o))return;a.add(o);let _=s[o],v=_?_.getSceneType():iM.closed,h=!!_&&_.isAlternative();u=1===a.size?"start":v===iM.closed?"end":"intermediate";let S=[];h&&S.push("Alternate"),S.push((E=n[v]||v)?E.charAt(0).toUpperCase()+E.slice(1):E),i.some((e=>e.id===o))||i.push({id:o,label:S.join(" "),type:u,alternative:h,connections:[]});let T=(null==(l=e.states[o])?void 0:l.on)||{},p=null;if("LAST_CHANCE_ENDCARD"in T){p=`${o}_last_chance`,i.some((e=>e.id===p))||i.push({id:p,label:"Last Chance Endcard",alternative:h,type:"intermediate",connections:[]});let e=`${o}->${p}`;r.has(e)||(r.add(e),null==(d=i.find((e=>e.id===o)))||null==(c=d.connections)||c.push(p))}Object.keys(T).forEach((e=>{let n=T[e];if(null==n?void 0:n.target){let e=n.target,l=o;p&&(l=p);let c=`${l}->${e}`;var a,s;if(!r.has(c))r.add(c),null==(s=i.find((e=>e.id===l)))||null==(a=s.connections)||a.push(e),t(e)}}))}(e.initial),{nodes:i.map((e=>{var t;let n=null==(t=e.connections)?void 0:t.filter((t=>{var n;return t!==iM.closed||!(null==(n=e.connections)?void 0:n.some((e=>e!==iM.closed)))}));return tt(eJ({},e),{connections:n})}))}},c3=(e=tE(),t=c0())=>{let n;n=e.has(t_.AD_EXPERIENCE)?cJ():c$();let i={actions:eJ({},cj())};return e.has(t_.IS_RUNNING_INSIDE_EMBED)&&t.emit({type:"scene-builder-event",event:c1.SCENE_BUILDER_COMPLETE,data:c2(n,l3(),{endcard:"Playable"})}),[n,i]};const c5=(e=iN())=>{let t=e.machineMap.get("ad");if(t)return t.machine;let[n,i]=c3();return e.createMachine(n,i)};var c4=(e=iN())=>e.interpret(c5(e)),c6=function(e,t,n=iN()){let i=nY((()=>n.createMachine(e,t)),[e]),r=iS(i.initialState),[a,s]=nY((()=>{let e=n.interpret(i),t=e.subscribe((e=>{r.value=e}));return[e,t]}),[i]);return nK((()=>(a.status!==e0.Running&&a.start(),()=>{s.unsubscribe(),a.stop()})),[a]),[r,a.send,a,e]},c8=((ec={}).CALL="CALL",ec.DONE="DONE",ec),c7=((ed={}).IDLE="IDLE",ed.BUSY="BUSY",ed);const c9=e=>({id:`throttle-${e}`,initial:c7.IDLE,context:{},states:{IDLE:{on:{[c8.CALL]:{target:c7.BUSY}}},BUSY:{on:{[c8.DONE]:{target:c7.IDLE}}}}});var de=()=>{let e=eX.getInstance(),t=o3.getServiceIdentifier();return e.get(t)};const dt={[iM.video]:tO.VIDEO_SCENE_START,[iM.endcard]:tO.ENDCARD_SCENE_START};var dn=e=>{let t=e.getSceneType();return t&&t in dt?[dt[t]]:[]},di=(e,t=oZ(),n=l3)=>{if(e.getSceneType()===iM.closed)return;let i=eJ({name:tA.SCENE_START,scene_id:e.getId(),scene_type:e.getSceneType(),scene_index:n().indexOf(e)},e.getObservabilityData()),r=[i,...dn(e).map((e=>tt(eJ({},i),{metric:e})))];t.emit(r)},dr=()=>{let e=c4(),t=e.send,n=iS(e.state),i=c6(c9("ad")),[r,a]=i,s=nY((()=>e=>{[ib.NEXT,ib.LAST_CHANCE_ENDCARD,ib.LAST_CHANCE_ENDCARD_CLOSE].includes(e.type)?r.value.matches(c7.IDLE)&&(a({type:c8.CALL}),t(e),window.setTimeout((()=>{a({type:c8.DONE})}),500)):t(e)}),[i]);return nK((()=>{let t=e.subscribe((e=>{let t=n.value;if(n.value=e,e.changed&&t.value!==e.value){let n=cb(t),i=de();i.end(n);let r=cb(e);tU.setValue({scene:r}),i.start(r),di(r)}}));return()=>{t.unsubscribe()}}),[e]),[n,s]},da=()=>(nK((()=>{iF().getNewTimer(500,(()=>{i9()})).start()}),[]),lJ("div",{id:"app-store-transition-fallback",className:"wnLcbW_fallback",children:lJ("button",{title:"Close","aria-label":"Close",id:aN,type:"button",onClick:()=>{i9()},className:"closeIcon",children:lJ("div",{className:"closeIcon"})})})),ds=class extends nS{componentDidCatch(e,t){tH().emit({type:"error-logging",event:r2.EXCEPTION,data:{error:{message:e.message,stack:`Stack trace:\n${e.stack}\n\nError info:\n${JSON.stringify(t)}\n`}}})}render(){let{children:e}=this.props;return e}},dl=class{getConsentTitleText(){var e,t,n,i,r,a;return null!=(a=null!=(r=null==(t=this.mraidService.getMraidExt())||null==(e=t.getConsentTitleText)?void 0:e.call(t))?r:null==(i=this.mraidService.getMraid())||null==(n=i.getConsentTitleText)?void 0:n.call(i))?a:"Ad-Interaction Data Collection"}getConsentBodyText(){var e,t,n,i,r,a;return null!=(a=null!=(r=null==(t=this.mraidService.getMraidExt())||null==(e=t.getConsentBodyText)?void 0:e.call(t))?r:null==(i=this.mraidService.getMraid())||null==(n=i.getConsentBodyText)?void 0:n.call(i))?a:"With permission, Liftoff collects your ad-interaction data to serve relevant ads to you. Note: you'll see ads independent of your selection, but they may not be as relevant. Do you consent to data tracking for more relevant ads?"}getConsentAcceptButtonText(){var e,t,n,i,r,a;return null!=(a=null!=(r=null==(t=this.mraidService.getMraidExt())||null==(e=t.getConsentAcceptButtonText)?void 0:e.call(t))?r:null==(i=this.mraidService.getMraid())||null==(n=i.getConsentAcceptButtonText)?void 0:n.call(i))?a:"I consent"}getConsentDenyButtonText(){var e,t,n,i,r,a;return null!=(a=null!=(r=null==(t=this.mraidService.getMraidExt())||null==(e=t.getConsentDenyButtonText)?void 0:e.call(t))?r:null==(i=this.mraidService.getMraid())||null==(n=i.getConsentDenyButtonText)?void 0:n.call(i))?a:"I do not consent"}consentAction(e){var t;null==(t=this.mraidService.getMraidBridgeExt())||t.consentAction(e)}constructor(e=td()){this.mraidService=e}},dc=({sendAdEvent:e=()=>{}})=>{let t=new dl,n=n=>{t.consentAction(n),e({type:ib.NEXT})};return lJ("div",{className:"C4yOdG_gdpr",id:"gdpr",children:[lJ("div",{className:"C4yOdG_content",children:[lJ("header",{className:"C4yOdG_header",children:[lJ("span",{className:"C4yOdG_icon"}),lJ("h3",{id:"gdpr-title",className:"C4yOdG_title",children:t.getConsentTitleText()})]}),lJ("p",{id:"gdpr-body-text",className:"C4yOdG_bodyText",children:t.getConsentBodyText()})]}),lJ("div",{className:"C4yOdG_buttons",children:[lJ("button",{type:"button",id:"gdpr-accept",className:"C4yOdG_primaryButton",onClick:()=>n("opted_in"),children:t.getConsentAcceptButtonText()}),lJ("button",{type:"button",id:"gdpr-deny",className:"C4yOdG_secondaryButton",onClick:()=>n("opted_out"),children:t.getConsentDenyButtonText()})]})]})};const dd=e=>4===e.length?e:dd(`0${e}`),du=e=>e.split("").map((e=>dd(parseInt(e,16).toString(2)))).join("").split("");var dE=class{constructor(e=tE()){this.tokenService=e,this.getBits=()=>{let e=this.tokenService.get(t_.SESSION_ID);if(!e){let e=[];for(let t=0;t<96;t+=1)e.push("0");return e}return du(e)}}};ex="_0zGmtq_bit",eF="_0zGmtq_one";const d_=(e,t)=>`bit-${e}-${t}`;var dv=()=>{let e=new dE;return tV().isFullscreen()?lJ("div",{className:"_0zGmtq_watermark",id:"watermark",children:[lJ("div",{className:`${eF}  _0zGmtq_leading ${ex}`}),e.getBits().map(((e,t)=>lJ("div",{className:`${ex} ${"0"===e?"_0zGmtq_zero":eF}`,id:d_(e,t)},d_(e,t))))]}):null},dh=(e,t,n=tH())=>(nK((()=>(n.addEventHandler(e,t),()=>{n.removeEventHandler(e,t)})),[n,e,t]),()=>{n.removeEventHandler(e,t)}),dS=function(e=a5()){let t=iS(!0);return dh("theatre-mode-event",((n,i)=>{e.hasExistingEvent({type:"theatre-mode-event",event:oK.DISABLE_THEATRE_MODE})?t.value=!0:i.event===oK.HIDE_CONTROLS?t.value=!1:i.event===oK.REVEAL_CONTROLS&&(t.value=!0)}),e),t},dT=(...e)=>e.filter(Boolean).join(" ");const dp={[tv.ACCELERATE]:"#96633d",[tv.EDSP]:"#853d96",[tv.UNKNOWN]:"#333"};var dg=({handleClick:e,adSource:t,theatreModeReportingService:n=a5()})=>lJ("button",{type:"button",id:aw,title:"Liftoff Privacy",className:dT("m2_mMq_privacyButton",dS(n).value?"fadeIn":"fadeOut"),onClick:e,"aria-label":"Liftoff Privacy",children:lJ("svg",{id:"j",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 302 340",children:[lJ("path",{d:"M274.04,32.82L160.56,7.74c-2.53-.42-5.1-.43-7.62,0L28.59,32.87c-12.39,2.04-21.55,13.63-21.55,27.27v165.78c0,7.75,2.99,15.14,8.25,20.36l55.61,55.27c44.48,44.21,116.29,44.21,160.77,0l55.61-55.27c5.26-5.22,8.25-12.62,8.25-20.36V60.08c0-13.62-9.13-25.19-21.49-27.26Z",fill:dp[null!=t?t:tv.UNKNOWN],opacity:".6",strokeWidth:"0"}),lJ("path",{d:"M275.5,26.22L161.67,1.07c-3.25-.55-6.56-.54-10.08.03L27.37,26.22C11.67,28.88.29,43.11.29,60.13v143.34c0,23.78,9.29,46.64,25.47,62.73l51.82,46.31c41.98,37.52,105.43,37.52,147.41,0l51.82-46.32c16.19-16.09,25.47-38.95,25.47-62.73V60.08c0-17.03-11.41-31.3-26.79-33.86ZM288.78,203.48c0,20.2-7.83,39.57-21.48,53.14l-32.94,29.99c-8.73-9.02-16.42-17.46-16.42-17.46-10.8-11.49-24.61-2.92-24.61-2.92-1.95,1.13-4.12,2.13-6.42,3.02-3.77,1.29-8.66,2.76-14.21,4-9.02,1.83-17.27,2.47-20.08,2.65-.44.01-.87.04-1.3.05-.44,0-.87-.04-1.3-.05-2.82-.18-11.06-.82-20.08-2.65-5.55-1.24-10.44-2.71-14.21-4-2.3-.89-4.47-1.88-6.42-3.02,0,0-13.82-8.57-24.61,2.92,0,0-7.28,7.89-16.44,17.48l-32.96-30.01c-13.65-13.56-21.48-32.93-21.48-53.14V60.13c0-10.25,6.83-19.11,15.89-20.6l124.34-25.14c.96-.15,1.92-.22,2.82-.22.8,0,1.57.05,2.25.16l113.83,25.15c9.04,1.51,15.85,10.36,15.85,20.59v143.4Z",fill:"#f3f4f5",strokeWidth:"0"}),lJ("path",{d:"M188.96,142.21c-6.2,0-9.55,5-10.07,15.01l-.06,3.69c0,11.44,3.34,17.16,10.01,17.16,4.45,0,7.62-1.87,9.53-5.6v-24.54c-1.83-3.81-4.96-5.72-9.41-5.72Z",fill:"#f3f4f5",strokeWidth:"0"}),lJ("polygon",{points:"107.78 160.02 126.43 160.02 117.07 129.93 107.78 160.02",fill:"#f3f4f5",strokeWidth:"0"}),lJ("path",{d:"M151,57c-51.36,0-93,41.64-93,93s41.64,93,93,93,93-41.64,93-93-41.64-93-93-93ZM136.49,192.36l-5.06-16.2h-28.65l-5,16.2h-22.34l31.81-86.73h19.66l32.05,86.73h-22.46ZM200.46,192.36l-1.01-6.91c-4.13,5.4-9.37,8.1-15.73,8.1-7.67,0-13.74-2.94-18.23-8.82-4.49-5.88-6.73-14.24-6.73-25.08,0-10.21,2.2-18.25,6.61-24.13,4.41-5.88,10.56-8.82,18.47-8.82,5.76,0,10.6,2.26,14.54,6.79v-32.64h20.13v91.5h-18.05Z",fill:"#f3f4f5",strokeWidth:"0"})]})}),dC=((eu={})[eu.LEFT=0]="LEFT",eu[eu.RIGHT=1]="RIGHT",eu[eu.UP=2]="UP",eu[eu.DOWN=3]="DOWN",eu),dI=((eE=dI||{})[eE.HORIZONTAL=0]="HORIZONTAL",eE[eE.VERTICAL=1]="VERTICAL",eE);const dA=n7(0),dO=n7(0),dm=n7(!1),df=n7(0);var dN=({children:e,onSwipeLeft:t,onSwipeRight:n,onSwipeUp:i,onSwipeDown:r})=>{let a=nG(null),s=(e,t)=>Math.abs(e)>Math.abs(t),o=(e,t)=>s(e,t)?+(e>0):t>0?3:2,l=(e,t)=>s(e,t)?Math.abs(e):Math.abs(t),c=(e,t)=>{let n=e-dA.value,i=t-dO.value;return{Direction:o(n,i),Orientation:+!s(n,i),Distance:l(n,i),DeltaX:n,DeltaY:i}};return lJ("div",{ref:a,title:"swipe",onTouchStart:e=>{dm.value=!0;let t=0,n=0;e instanceof TouchEvent?(t=e.touches[0].clientX,n=e.touches[0].clientY):e instanceof MouseEvent?(t=e.clientX,n=e.clientY):(t=e.detail.clientX,n=e.detail.clientY),dA.value=t,dO.value=n,df.value=Date.now()},onTouchEnd:e=>{var s;let o=null==a||null==(s=a.current)?void 0:s.childNodes;if(!dm||!o)return;let{endX:l,endY:d}=(e=>{var t,n,i,r;return e instanceof TouchEvent?{endX:e.changedTouches[0].clientX,endY:e.changedTouches[0].clientY}:e instanceof MouseEvent?{endX:e.clientX,endY:e.clientY}:{endX:null!=(i=null==(t=e.detail)?void 0:t.clientX)?i:0,endY:null!=(r=null==(n=e.detail)?void 0:n.clientY)?r:0}})(e),u=c(l,d),E=o[0];if(((e,t)=>e.Distance>=.05*t)(u,0===u.Orientation?E.clientWidth:E.clientHeight)){switch(u.Direction){case 0:t&&t();break;case 1:n&&n();break;case 3:r&&r();break;default:i&&i()}dm.value=!1}},children:e})},dD=((e_={})[e_.LOVE=1]="LOVE",e_[e_.BROKEN=2]="BROKEN",e_[e_.OFFENSIVE=3]="OFFENSIVE",e_),dR=class{getAdSource(){return this.placementTypeService.getAdSource()}getCreativeId(){var e;return null!=(e=this.tokenService.get(t_.CREATIVE_ID))?e:""}getEventId(){var e;return null!=(e=this.tokenService.get(t_.SESSION_ID))?e:""}getVersions(){var e;return`SDK ${this.environmentService.getSdkVersion().toString()}, VM ${null!=(e=window.appVersion)?e:"0.0.0"}, OS ${this.environmentService.getOsVersion().toString()}`}handleDrawerClose(e){e({type:ib.PRIVACY_BOTTOM_DRAWER_CLOSE})}handleIconClick(e){e({type:ib.PRIVACY_BOTTOM_DRAWER_OPEN})}handleReadMoreClick(e){e({type:ib.PRIVACY_BOTTOM_DRAWER_CLOSE}),window.setTimeout((()=>{e({type:ib.OPEN_PRIVACY_PAGE})}),50)}privacyDrawerEnabled(){return this.placementTypeService.isFullscreen()}constructor(e=tE(),t=tV(),n=tM(),i=oZ()){this.tokenService=e,this.placementTypeService=t,this.environmentService=n,this.observabilityReportingService=i,this.handleFeedbackSubmit=e=>{let t={1:tO.AD_FEEDBACK_LOVE,2:tO.AD_FEEDBACK_BROKEN,3:tO.AD_FEEDBACK_OFFENSIVE};this.observabilityReportingService.emit(tA.AD_FEEDBACK,t[e])}}};eK="_0LRN8a_title";const dy=[{type:dD.LOVE,text:"Love it",emoji:"😍"},{type:dD.BROKEN,text:"Broken",emoji:"🫤"},{type:dD.OFFENSIVE,text:"Offensive",emoji:"🤬"}];var dL=({handleFeedbackSubmit:e})=>{let t=iS(null),n=n=>{t.value=n,e(t.value)};return lJ("div",{className:"_0LRN8a_container",children:t.value?lJ("div",{className:"_0LRN8a_completeContainer",children:[lJ("div",{className:dT(eK,"_0LRN8a_thanks"),children:"Thank you"}),lJ("span",{className:"_0LRN8a_complete"})]}):lJ("div",{className:"_0LRN8a_popup",children:[lJ("div",{className:dT(eK,"_0LRN8a_question"),children:"What do you think of this ad?"}),lJ("div",{className:"_0LRN8a_options",children:dy.map((e=>lJ("button",{type:"button",className:"_0LRN8a_option",onClick:()=>n(e.type),children:[lJ("span",{className:"_0LRN8a_optionText",children:e.text}),lJ("span",{className:"_0LRN8a_emoji",children:e.emoji})]},e.type)))})]})})},dP=({label:e,value:t,id:n})=>{let i=iS(!1);return lJ("div",{className:"rM5gmW_adInfoRow",id:n,children:[lJ("div",{className:"rM5gmW_adInfoLabel",children:e}),lJ("button",{type:"button",className:dT("rM5gmW_adInfoValue",i.value?"rM5gmW_expanded":""),onClick:()=>{i.value=!i.value},children:t})]})},db=({isOpen:e,handleReadMoreClick:t,closeHandler:n,creativeID:i,eventID:r,versions:a,handleFeedbackSubmit:s,allowDebug:o=!1})=>{let l=iS([]);return dh("debug",((e,t)=>{var n;o&&(null==(n=t.data)?void 0:n.message)&&(l.value=[...l.value,t.data.message])})),lJ("div",{className:dT("FbTWOG_popupContainer",e?"FbTWOG_popupContainerDisplay":""),id:ab,children:[lJ("div",{className:e?"FbTWOG_mask":"FbTWOG_displayNone",id:"privacy-popup-mask",onClick:n,role:"none"}),lJ(dN,{onSwipeDown:n,children:lJ("div",{id:"privacy-popup",role:"dialog","aria-label":"Privacy popup","aria-hidden":e?"false":"true",className:dT("FbTWOG_privacyPopup",e?"FbTWOG_show":"FbTWOG_hide"),children:[lJ("div",{className:"FbTWOG_popupHeader",children:lJ("button",{type:"button","aria-label":"Close privacy popup","aria-hidden":e?"false":"true",onClick:n,id:"privacy-close-button",children:lJ("span",{className:"closeIcon privacy"})})}),lJ("div",{className:"FbTWOG_popupBody",children:lJ(dL,{handleFeedbackSubmit:s})}),lJ("div",{className:"FbTWOG_privacyPolicy",children:lJ("button",{type:"button",className:"FbTWOG_readMore","aria-hidden":e?"false":"true",onClick:t,id:"privacy-read-more-button",children:"Privacy Policy"})}),lJ("div",{className:"FbTWOG_popupFooter",children:[lJ("div",{className:"FbTWOG_adInfoTitle",children:"Ad Info"}),lJ(dP,{label:"Creative ID:",value:i,id:"privacy-drawer-creative-id"}),lJ(dP,{label:"Event ID:",value:r,id:"privacy-drawer-event-id"}),lJ(dP,{label:"Versions:",value:a,id:"privacy-drawer-versions"}),l.value.length>0&&lJ("div",{className:"FbTWOG_debug",children:[lJ("h3",{children:"Debug Messages"}),lJ("div",{className:"debug-container",children:l.value.map((e=>lJ("div",{className:"debug-message",children:e},e)))})]})]})]})})]})},dw=((ev=dw||{}).CLOSE="vungle.events.request.close",ev),dM=()=>tH();const dV=n7(!1);var dk=({sendAdEvent:e,privacyService:t=new dR,customMraidEventReportingService:n=dM(),allowDebug:i=!1})=>{let r=()=>{dV.value=!1,t.handleDrawerClose(e)};return dh("custom-mraid",((e,t)=>{t.event===dw.CLOSE&&dV&&r()}),n),lJ(nh,{children:[lJ(dg,{handleClick:()=>{t.handleIconClick(e),dV.value=!0},adSource:t.getAdSource()}),t.privacyDrawerEnabled()&&lJ(db,{isOpen:dV.value,closeHandler:r,handleReadMoreClick:()=>{dV.value=!1,t.handleReadMoreClick(e)},creativeID:t.getCreativeId(),eventID:t.getEventId(),versions:t.getVersions(),handleFeedbackSubmit:t.handleFeedbackSubmit,allowDebug:i})]})},dU=function(e,t){let n=nG(0),i=nG(0);return nK((()=>{let r=r=>{let a=Date.now();a-i.current>800&&(n.current=0),n.current+=1,i.current=a;let{clientX:s,clientY:o}=r;n.current>=3&&(e(s,o,t),n.current=0)};return window.addEventListener("pointerdown",r),()=>window.removeEventListener("pointerdown",r)}),[e,t]),null},dB=(e,t=iH())=>{let n=iS(e),i=nG(void 0),r=()=>{var e;null==i||null==(e=i.current)||e.destroy(),i.current=void 0};return nK((()=>{var e;void 0===i.current&&(i.current=t.getNewInterval(1e3,(()=>{let e=n.value-1;n.value=e<=0?0:e})),null==(e=i.current)||e.start());return()=>r()}),[]),iO((()=>{0===n.value&&r()})),dh("scene-event",((e,t)=>{t.event===aE.FORCE_COMPLETE_COUNT_DOWN&&(n.value=0)})),n},dH=({delay:e,handleCountdownUpdate:t,isVisible:n=!0,children:i})=>{let r=dB(e);if(nK((()=>{t&&t(r.value)}),[r.value]),r.value>0&&!n)return lJ("div",{id:aD,className:"NQnIja_countdownInvisible"});if(r.value>0&&n){let e=Math.round(r.value);return 0===e?null:lJ("div",{id:aD,className:"NQnIja_countdown",children:e})}return lJ("div",{children:i})};const dW=[tu.MREC,tu.BANNER,tu.IN_LINE];var dx=class{placementSupportsNextButton(){return!dW.includes(this.placementTypeService.getPlacementType())}constructor(e=tV(),t=aU(),n=tB()){this.placementTypeService=e,this.sceneEventReportingService=t,this.scene=n,this.handleCountdownUpdate=e=>{this.sceneEventReportingService.emit({type:"scene-event",event:aE.NEXT_BUTTON_COUNTDOWN_TICK,data:{scene_id:this.scene.getId(),scene_type:this.scene.getSceneType(),delay:e}})}}},dF=(e=rX())=>e.getActivityEvents().some((e=>e.activity.name===rK.CLICK_URL||e.activity.name===rK.POSTROLL_CLICK)),dK=class{getButtonPadding(e=0,t=10){return dF()?t:Math.min(Math.max(parseInt(this.tokenService.get(t_.CLOSE_BUTTON_PADDING),10)||e,e),t)}constructor(e=tE()){this.tokenService=e}},dG=(e=c4())=>e.state.context.isTheatreModeActive,dY=(e,t=af,n=a5(),i=tV(),r=iF(),a=c4(),s=ct())=>{let o=nG(null),{scene:l}=tU.getValue(),c={type:"theatre-mode-event",event:oK.DISABLE_THEATRE_MODE},d=!i.isFullscreen()||!oj(l)||!l.theatreModeEnabled||n.hasExistingEvent(c),u=()=>{d||n.emit({type:"theatre-mode-event",event:oK.HIDE_CONTROLS})};dh("viewability",(()=>{d||n.emit({type:"theatre-mode-event",event:oK.REVEAL_CONTROLS})}),s),dh("theatre-mode-event",((n,i)=>{d||(i.event===oK.REVEAL_CONTROLS&&(e({type:ib.STOP_THEATRE_MODE}),o.current=r.getNewTimer(t,u),o.current.start()),i.event===oK.HIDE_CONTROLS&&e({type:ib.START_THEATRE_MODE}))}),n),nK((()=>{if(d)return()=>{};let e=()=>{var e;dG(a)&&!l.getFullScreenClickConfig().enabled&&(o.current&&(null==(e=o.current)||e.destroy()),n.emit({type:"theatre-mode-event",event:oK.REVEAL_CONTROLS}))};return document.addEventListener("pointerdown",e),o.current=r.getNewTimer(t,u),o.current.start(),()=>{document.removeEventListener("pointerdown",e),o.current&&o.current.destroy()}}),[])},dj=({sendEvent:e=()=>{},type:t=rh.CLOSE,service:n=new dK,showLastChanceEndcard:i=!1,beforeClick:r=()=>{}})=>{let a=t===rh.SKIP?"mqB7Ka_skipIcon":"closeIcon",s=t===rh.SKIP?"Skip button":"Close button",o=iS(n.getButtonPadding());nK((()=>{e&&e({type:ib.CLOSE_BUTTON_WILL_SHOW})}),[]),dh("tpat",(()=>{o.value=n.getButtonPadding()})),dY(e,af);let l=-o.value;return lJ("button",{title:s,"aria-label":s,id:aN,type:"button",style:{padding:`${o.value}px`,margin:`${l}px`},onClick:t=>{t.stopPropagation(),e({type:ib.CLOSE_BUTTON_CLICK}),r(),e(i?{type:ib.LAST_CHANCE_ENDCARD}:{type:ib.NEXT})},children:lJ("div",{className:a})})};const dX=n7(!0);var dz=({sendAdEvent:e,showLastChanceEndcard:t=!1,config:n,beforeClick:i=()=>{},theatreModeReportingService:r=a5()})=>{let{delay:a=0,countdown:s=!0}=n,o=new dx,l=a>0;dh("viewability",((e,t)=>{dX.value=t.event===tx.MAXIMIZED}));let c=dS(r);return o.placementSupportsNextButton()?lJ("div",{id:t?aR:aP,className:dT("LJWyoG_nextButton",c.value?"fadeIn":"fadeOut"),role:"button",tabIndex:0,"data-countdown-running":dX.value,children:l?lJ(dH,{delay:a,isVisible:s,handleCountdownUpdate:o.handleCountdownUpdate,children:lJ(dj,{sendEvent:e,type:n.style,showLastChanceEndcard:t,beforeClick:i})}):lJ(dj,{sendEvent:e,type:n.style,showLastChanceEndcard:t,beforeClick:i})}):null},d$=(e,t)=>{nK((()=>{let n=window.setInterval((()=>{var i;(null==(i=e.current)?void 0:i.complete)&&(t({type:ib.PRIVACY_LOGO_SHOW}),window.clearInterval(n))}),100);return()=>{window.clearInterval(n)}}),[])},dq=class{clickHandler(e,t){dG(this.adMachineInterpreter)?this.theatreModeReportingService.emit({type:"theatre-mode-event",event:oK.REVEAL_CONTROLS}):this.fscReportingService.emit({type:"fsc",event:li.FSC,data:{cta_url:t,scene_id:e}})}constructor(e=la(),t=tH(),n=i3(),i=c4()){this.fscReportingService=e,this.theatreModeReportingService=t,this.storeKitOverlayService=n,this.adMachineInterpreter=i}};const dZ=n7(!1),dQ=(e,t)=>{dZ.value=t.event===tx.MINIMIZED},dJ=e=>e?`${e}-fullscreen-overlay`:"fullscreen-overlay";var d0=({config:e,ctaUrl:t,sceneId:n,service:i=new dq,reportingService:r=ct(),children:a})=>(nK((()=>(r.addEventHandler("viewability",dQ),()=>{r.removeEventHandler("viewability",dQ)})),[]),lJ(nh,{children:[e.enabled&&lJ("button",{className:dT("_7pzQ5q_overlayCta",dZ.value?"_7pzQ5q_hidden":""),type:"button",id:dJ(e.id),"aria-label":"fsc","aria-hidden":dZ.value,style:e.styleData,onClick:()=>i.clickHandler(n,t)}),a]})),d1=e=>{let[t]=c6(lS(e),lT);return t},d2=((eh=d2||{}).DOWNLOAD_BUTTON_CTA="DOWNLOAD_BUTTON_CTA",eh.ENDCARD_CTA="ENDCARD_CTA",eh.LAST_CHANCE_ENDCARD_CTA="LAST_CHANCE_ENDCARD_CTA",eh.PERSISTENT_CTA="PERSISTENT_CTA",eh),d3=class{emitClickEvents(e){this.ctaReportingService.emit({type:"cta",event:d2.LAST_CHANCE_ENDCARD_CTA,data:{scene_id:e}})}constructor(e=tH()){this.ctaReportingService=e}};const d5=n7(!1);var d4=({config:e,sendAdEvent:t=()=>{},backgroundNone:n=!1,onVisibilityChange:i,sceneId:r})=>{var a,s,o,l,c,d,u,E;let _=new d3,v=nG(null),h=d1(e.id);d$(v,t);let S=()=>{d5.value=!0,_.emitClickEvents(r)};return nK((()=>{i(e.enabled&&!h.value.matches(l_.HIDDEN))}),[e.enabled,h.value]),!e.enabled||h.value.matches(l_.HIDDEN)?null:lJ("div",{className:dT("poFP6W_overlay",null!=(null==(a=e.appMeta)?void 0:a.icon)?"poFP6W_opaque":""),id:"last-chance-endcard-overlay",children:lJ(d0,{config:{enabled:!!(null==(s=e.fsc)?void 0:s.enabled)},sceneId:r,children:[lJ(dz,{sendAdEvent:t,config:null!=(E=e.close)?E:{},showLastChanceEndcard:!1}),lJ("div",{className:dT("poFP6W_lastChanceEndCard",n?"poFP6W_backgroundNone":""),id:"last-chance-endcard",children:[(null==(o=e.appMeta)?void 0:o.icon)&&lJ("img",{className:"poFP6W_icon",ref:v,src:null==(l=e.appMeta)?void 0:l.icon,alt:null==(c=e.appMeta)?void 0:c.name,id:"last-chance-endcard-app-icon",onClick:S,"aria-hidden":"true"}),lJ("p",{className:"poFP6W_name",id:"last-chance-endcard-app-name",onClick:S,"aria-hidden":"true",children:null==(d=e.appMeta)?void 0:d.name}),lJ("button",{type:"button",className:dT("poFP6W_button",d5.value?"":"poFP6W_animate"),"data-animate":!d5.value,onClick:S,id:ay,children:null==(u=e.cta)?void 0:u.text})]})]})})},d6=(e,t=!0)=>{nK((()=>t?(e&&e({type:ib.CLOSE_BUTTON_MOUNT}),()=>{e&&e({type:ib.CLOSE_BUTTON_UNMOUNT})}):()=>{}),[t])},d8=((eS=d8||{}).APP_META_UPDATE="APP_META_UPDATE",eS),d7=()=>tH(),d9=(e,t=!0,n=d7())=>{nK((()=>{var i;t&&e&&"function"==typeof e.getCallToActionConfig&&n.emit({type:"app-meta",event:d8.APP_META_UPDATE,data:null!=(i=e.getCallToActionConfig().appMeta)?i:{enabled:!1}})}),[t])};const ue=(e,t)=>{let n=(new DOMParser).parseFromString(e,"text/html"),i=e=>{var n;if(!e)return null;if(e.nodeType===Node.TEXT_NODE)return(null==(n=e.nodeValue)?void 0:n.trim())?e.nodeValue:null;if(e.nodeType!==Node.ELEMENT_NODE)return null;let r=e.tagName.toLowerCase(),a={};return Array.from(e.attributes).forEach((e=>{a[e.name]=e.value})),"vm-component"===r?lJ(t,{sceneId:a["scene-id"]||""}):n_(r,a,...Array.from(e.childNodes).map(i).filter((e=>!!e)))};return i(n.body.firstChild)};var ut=({htmlString:e,VmComponent:t})=>{let[n,i]=(nb=1,nF(nZ,null));return nK((()=>{i(ue(e,t))}),[e]),n},un=(e=tW())=>{let t=aU(e);return{duration:a_(au(t,aE.SCENE_START),au(t,aE.SCENE_END))}},ui=class extends rw{getTransitions(){let e=super.getTransitions();return e.push(rM,rV,rk,rf,rN,rD,rR),e}getId(){return this.id}getHtml(){return this.html}getDecodedHtml(){return this.htmlDecoderService.decode(this.html,!1)}getSceneType(){return this.sceneType}addScenes(e){this.scenes.push(...e)}getScenes(){return this.scenes}getSceneById(e){return this.scenes.find((t=>t.getId()===e))}getCloseButtonConfig(){let e=this.closeButtonConfigProvider.getCloseButtonConfig();return tt(eJ({},e),{style:this.isLastPage()?rh.CLOSE:e.style})}getLastChanceEndcardConfig(){return this.lastChanceEndcardConfig}setLastChanceEndcardConfig(e){this.lastChanceEndcardConfig=e}getEventStreams(){return this.eventStreams?this.eventStreams:un()}static getInstances(){return[]}constructor({id:e,html:t,children:n,closeButtonConfigProvider:i,lastChanceEndcardConfig:r,placementTypeService:a=tV(),htmlDecoderService:s=oC(),eventStreams:o}){super({isFullscreen:null==a?void 0:a.isFullscreen()}),this.scenes=[],this.id=e,this.html=t,this.children=n,this.closeButtonConfigProvider=i,this.lastChanceEndcardConfig=r,this.placementTypeService=a,this.htmlDecoderService=s,this.sceneType=iM.composite,this.eventStreams=o}},ur=(e,t=tB)=>nY((()=>{let n=t();return n instanceof ui&&n.getSceneType()===iM.composite&&n.getScenes().find((t=>t.getId()===e))||null}),[e]),ua=(e=c4)=>nY((()=>e().send),[]),us=((eT={}).SHOW="ASOD_SHOW",eT.CLOSE="ASOD_CLOSE",eT),uo=((ep={}).INITIAL="ASOD_INITIAL",ep.SHOWN="ASOD_SHOWN",ep),ul=((eg={}).SET_DELAY="ASOD_SET_DELAY",eg.OPEN_APP_STORE="ASOD_OPEN_APP_STORE",eg);const uc=e=>({id:`app-store-on-delay-${e}`,initial:uo.INITIAL,context:{delay:0},states:{[uo.INITIAL]:{on:{[us.SHOW]:{target:uo.SHOWN,actions:[ul.SET_DELAY]}}},[uo.SHOWN]:{entry:[ul.OPEN_APP_STORE]}}}),ud={actions:{[ul.SET_DELAY]:e9({delay:(e,t)=>t.delay}),[ul.OPEN_APP_STORE]:e=>{let t=cK();null==t||t.openStoreViewWithDelay(e.delay)}}};var uu=(e,t,n=!0,i=!0)=>{let[,r]=c6(uc(e),ud);nK((()=>t.enabled&&n&&i?(r({type:us.SHOW,delay:t.autoShowDelay}),()=>{let e=cK();null==e||e.reset()}):()=>{}),[n,i])},uE=(e,t=!0,n=cH(),i=i3())=>{let r=iS(null==i?void 0:i.canOpen()),a=iS(!1);nK((()=>(e.enabled&&r.value&&t&&!a.value&&(null==n||n.startAutoShow(e),a.value=!0),()=>{})),[t,r.value,a.value]),nK((()=>{e.enabled&&(null==n||n.initializeForComponent((e=>{r.value=e}),10,500))}),[]),nK((()=>a.value?()=>null==n?void 0:n.reset():()=>{}),[])},u_=({trackingEventMapConfig:e,fullScreenClickConfig:t,sceneId:n,shouldReplaceShowStoreKitOverlay:i,callToActionService:r=r$(),injectedEmitTrackingEvent:a=cP,sceneEventReportingService:s=aU()})=>dh("fsc",((o,l)=>{var c;(null==(c=l.data)?void 0:c.scene_id)===n&&(null==t?void 0:t.enabled)&&(r.invoke({target:t.target,url:t.ctaUrl,shouldReplaceShowStoreKitOverlay:i}),a(ik.CLICK_THROUGH,n,e),s.emit(aE.CLICK))})),uv=({callToActionConfig:e,trackingEventMapConfig:t,sceneId:n,shouldReplaceShowStoreKitOverlay:i,callToActionService:r=r$(),injectedEmitTrackingEvent:a=cP,sceneEventReportingService:s=aU()})=>dh("cta",((o,l)=>{var c,d,u;if((null==(c=l.data)?void 0:c.scene_id)===n&&e){let{target:o,url:c}=e,E=l.event===d2.ENDCARD_CTA;r.invoke({target:o,url:null!=(u=null==(d=l.data)?void 0:d.cta_url)?u:c,shouldReplaceShowStoreKitOverlay:i,isClickEventFromIframe:E}),a(ik.CLICK_THROUGH,n,t),s.emit(aE.CLICK)}})),uh=(e=document.documentElement)=>"ontouchstart"in e?"touchstart":"click",uS=(e,t,n=!0,i=aG,r=aU)=>{nK((()=>{if(!n||t)return()=>{};let e=e=>{i(e,r)};return document.body.addEventListener(uh(),e,!0),()=>{document.body.removeEventListener(uh(),e,!0)}}),[e,n])};const uT=n7(!1);var up=({scene:e,sendAdEvent:t,isCloseButtonVisible:n=!0,customClassName:i,useBackgroundImage:r=!1})=>{let a=nG(null);uu(e.getId(),e.getAppStoreOnDelayConfig()),uE(e.getStoreKitOverlayAutoShowConfig()),d$(a,t),d6(t),cL(),d9(e),u_({fullScreenClickConfig:uT.value?e.getLastChanceEndcardConfig().fsc:e.getFullScreenClickConfig(),trackingEventMapConfig:e.getTrackingEventMapConfig(),sceneId:e.getId()}),uv({callToActionConfig:uT.value?e.getLastChanceEndcardConfig().cta:void 0,trackingEventMapConfig:e.getTrackingEventMapConfig(),sceneId:e.getId()}),nK((()=>{t({type:ib.CREATIVE_VIEW})}),[]),uS(e.getId(),e.isChild());let s=e.getId();return lJ(nh,{children:[lJ(d4,{config:e.getLastChanceEndcardConfig(),sendAdEvent:t,onVisibilityChange:e=>{uT.value=e},sceneId:s}),lJ("div",{className:null!=i?i:"J2DrKG_staticImageEndcard",style:r?{backgroundImage:`url(${e.url})`}:{},children:lJ(d0,{config:e.getFullScreenClickConfig(),ctaUrl:e.getFullScreenClickConfig().ctaUrl,sceneId:s,children:[n&&!uT.value&&lJ(dz,{config:e.getCloseButtonConfig(),sendAdEvent:t,showLastChanceEndcard:e.getLastChanceEndcardConfig().enabled}),lJ("img",{src:e.url,ref:a,alt:"image",id:s})]})})]})},ug=((eC={}).Native="native",eC.Custom="custom",eC.NotSupported="not-supported",eC),uC=(e=tU)=>{let t=e.getValue().scene;return oj(t)?tk({startSn:void 0},`FragmentLoadingContext_${null==t?void 0:t.getId()}`):null};class uI extends window.Hls.DefaultConfig.loader{openAndSendXhr(e,t,n){var i,r,a;"manifest"===t.type&&(null==(i=this.cachedManifestMetadata.video)?void 0:i.manifest)?this.loadFromString(this.cachedManifestMetadata.video.manifest,e,t):"level"===t.type&&0===t.id&&(null==(r=this.cachedManifestMetadata.video)?void 0:r.track_0)?this.loadFromString(this.cachedManifestMetadata.video.track_0,e,t):"audioTrack"===t.type&&(null==(a=this.cachedManifestMetadata.audio)?void 0:a.track_0)?this.loadFromString(this.cachedManifestMetadata.audio.track_0,e,t):super.openAndSendXhr(e,t,n)}load(e,t,n,i=tU,r=uC,a=a2()){let{onSuccess:s}=n;super.load(e,t,tt(eJ({},n),{onSuccess:(e,t,n,o)=>{var l,c;s(e,t,n,o);let d=null==(l=n.levelDetails)?void 0:l.startSN;"level"===n.type&&void 0!==d&&(a.emit({type:"video",event:aQ.HLS_LEVEL_PLAYLIST_LOADED,data:{starting_sequence_number:d}}),null==(c=r(i))||c.setValue({startSn:d}))}}))}loadFromString(e,t,n){self.clearTimeout(this.requestTimeout),t.onreadystatechange=null,t.onprogress=null;let i={url:n.url,data:e,code:200};Promise.resolve().then((()=>{var e;null==(e=this.callbacks)||e.onSuccess(i,this.stats,n,t)}))}constructor(){super(),this.cachedManifestMetadata=(new oB).getCachedManifestMetadata()}}var uA=()=>eX.getInstance().get(o9.getServiceIdentifier());class uO extends window.Hls.DefaultConfig.loader{getFragmentInfo(e,t=uC,n=tU){var i,r,a,s,o;if(!["main","audio"].includes(e.type))return{shouldUseLocalFile:!1,localUrl:null};let l="main"===e.type?"video":"audio",c="";if("initSegment"===e.sn)c=null!=(i=this.cachedManifestMetadata[l].chunk_init)?i:"";else{let i=Number(e.sn),d=null!=(a=null==(r=t(n))?void 0:r.getValue().startSn)?a:1;c=null!=(o=(null!=(s=this.cachedManifestMetadata[l].chunks)?s:[])[i-d])?o:""}return{localUrl:c,shouldUseLocalFile:oV(c)}}async load(e,t,n){let{shouldUseLocalFile:i,localUrl:r}=this.getFragmentInfo(e.frag);if(i&&r)e.url=r,super.load(e,t,n);else{let i=uA(),r=await i.get(e.url);r?(this.context=e,this.loader={readyState:4,status:200,response:r.data},this.config=t,this.callbacks=n,this.loadedFromCache=!0,this.readystatechange()):super.load(e,t,n)}}readystatechange(){let{context:e,loader:t,stats:n}=this;if(!e||!t||n.aborted)return;if(4!==t.readyState)return void super.readystatechange();let{shouldUseLocalFile:i}=this.getFragmentInfo(this.context.frag);if(i){if(this.callbacks){let{onProgress:i}=this.callbacks;i&&i(n,e,t.response,t);let r={url:t.responseURL,data:t.response,code:200};Promise.resolve().then((()=>{this.callbacks.onSuccess(r,n,e,t)}))}}else{var r;if((null==(r=t.response)?void 0:r.byteLength)>=0&&!this.loadedFromCache){let n=uA();null==n||n.addRecord({url:e.url,data:new Uint8Array(t.response)})}super.readystatechange()}}constructor(){super(),this.cachedManifestMetadata=(new oB).getCachedManifestMetadata()}}var um=e=>"data:application/x-mpegurl;base64,"+btoa(e),uf=(e,t)=>{let n=e.split("/");return n.pop(),n.push(t),n.join("/")};const uN=(e,t)=>{let n=e.charAt(t+4);for(let i=t+5;i<e.length;i+=1)if(e.charAt(i)===n)return i;return t+4};var uD=(e,t)=>{let n=e.split("\n");for(let e=0;e<n.length;e+=1)if(n[e].startsWith("#EXT")&&n[e].includes("URI=")){let i=n[e].indexOf("URI="),r=uN(n[e],i),a=n[e].substring(i+5,r),s=a.toLowerCase();if(!s.startsWith("http")&&!s.startsWith("data:")&&!s.startsWith("file:")){let s=uf(t,a);n[e]=n[e].substring(0,i+5)+s+n[e].substring(r)}}return n.join("\n")},uR=(e,t,n)=>{let i=!1,r=e.split("\n"),a=n.split("/");a.pop();let s=/^#EXT-X-STREAM-INF/,o=/^http/i;for(let e=0;e<r.length-1;e+=1)if(s.exec(r[e]))if(i){if(!o.exec(r[e+1])){let t=r[e+1].split("/");r[e+1]=a.concat(t).join("/")}}else i=!0,r[e+1]=t;return r.join("\n")},uy=(e,t)=>{let n=e.split("\n"),i=t.split("/");i.pop();for(let e=0;e<n.length-1;e+=1)if(n[e].startsWith("#EXT-X-STREAM-INF")&&!n[e+1].toLowerCase().startsWith("http")){let t=n[e+1].split("/");n[e+1]=i.concat(t).join("/")}return n.join("\n")},uL=(e,t)=>{let n={url:void 0,audioGroupId:void 0},i=e.split("\n");for(let e=0;e<i.length-1;e+=1)if(i[e].startsWith("#EXT-X-STREAM-INF")){let r=/AUDIO="([^"]+)"/.exec(i[e]);(null==r?void 0:r[1])&&(n.audioGroupId=r[1]);let a=i[e+1];if(a.toLowerCase().startsWith("http"))return n.url=a,n;n.url=uf(t,a);break}return n};const uP=/URI="([^"]+)"/;var ub=(e,t,n)=>{let i=e.split("\n").find((e=>e.startsWith("#EXT-X-MEDIA:TYPE=AUDIO")&&e.includes(`GROUP-ID="${n}"`)));if(i){let e=uP.exec(i);if(null==e?void 0:e[1]){let n=e[1];return n.toLowerCase().startsWith("http")?n:uf(t,n)}}},uw=(e,t,n,i)=>{let r=e.split("\n"),a=n.split("/");a.pop();for(let e=0;e<r.length;e+=1){let n=r[e];if(n.startsWith("#EXT-X-MEDIA:TYPE=AUDIO")){let s=uP.exec(n);if(null==s?void 0:s[1]){let o=s[1];if(n.includes(`GROUP-ID="${i}"`))r[e]=r[e].replace(uP,`URI="${t}"`);else if(!o.toLowerCase().startsWith("http")){let t=[...a,o].join("/");r[e]=r[e].replace(uP,`URI="${t}"`)}}}}return r.join("\n")},uM=class{getStreamPlayer(e){if(null===e)return ug.NotSupported;if(window.Hls.isSupported()){let e=this.environmentService.getOperatingSystem(),t=this.environmentService.getSdkVersion();if(e!==tg.iOS||t.isGreaterThanOrEqualTo(new tT("7")))return ug.Custom}return""!==e.canPlayType(this.hlsMediaType)?ug.Native:ug.NotSupported}async loadHls(e,t){let n=new window.Hls({maxLoadingDelay:4,maxStarvationDelay:4,pLoader:uI,fLoader:uO,debug:!1});this.addEventListeners(n),n.loadSource(e),n.attachMedia(t)}async getManifestData(e){var t;if(null==(t=this.cachedManifestMetadata.video)?void 0:t.manifest)return this.cachedManifestMetadata.video.manifest;let n=await this.getStream(e,"manifest");return null==n?void 0:n.text()}async getStreamData(e,t){let n=this.cachedManifestMetadata[t].track_0;if(n)return n;let i=await this.getStream(e,t);return null==i?void 0:i.text()}async processAudioStream(e,t,n){let i=ub(t,n,e);if(!i)return um(this.updateFragmentsStream(t,n,"audio"));try{let n=await this.getStreamData(i,"audio");if(void 0!==n){let r=this.updateFragmentsStream(n,i,"audio"),a=um(r);return uw(t,a,i,e)}}catch(e){this.handleStreamError(e,i,"audio")}return t}async getHlsManifest(e){let t=this.cachedManifestMetadata.video.chunks,n=this.cachedManifestMetadata.audio.chunks,i=this.cachedManifestMetadata.video.track_0,r=this.cachedManifestMetadata.audio.track_0;var a;if(![t&&t.length>0,n&&n.length>0,i,r].some(Boolean))return(null==(a=this.cachedManifestMetadata.video)?void 0:a.manifest)?um(uy(this.cachedManifestMetadata.video.manifest,e)):e;try{let n,i=await this.getManifestData(e);if(void 0===i)return e;let{url:r,audioGroupId:a}=uL(i,e);if(!r){let t=this.updateFragmentsStream(i,e,"video");return um(t)}try{let t=await this.getStreamData(r,"video");if(void 0===t)return e;let s=this.updateFragmentsStream(t,r,"video"),o=um(s);n=uR(i,o,r),a&&(n=await this.processAudioStream(a,n,e))}catch(t){return this.handleStreamError(t,r,"video"),e}let s=uD(n,e);return um(s)}catch(t){return this.handleStreamError(t,e,"manifest"),e}}insertCachedSegments(e,t,n){var i;let r=(null!=(i=this.cachedManifestMetadata[n].chunks)?i:[]).reverse(),a=this.cachedManifestMetadata[n].chunk_init,s=t.split("/");s.pop();let o=e.split("\n");for(let e=0;e<o.length-1;e+=1){if(a&&o[e].startsWith("#EXT-X-MAP:URI=")){let t=/#EXT-X-MAP:URI="([^"]+)"/.exec(o[e]);t&&(o[e]=o[e].replace(t[1],a))}if(o[e].startsWith("#EXTINF"))if(r.length>0)o[e+1]=r.pop();else if(!o[e+1].toLowerCase().startsWith("http")){let t=o[e+1].split("/");o[e+1]=s.concat(t).join("/")}}return o.join("\n")}updateFragmentsStream(e,t,n){return uD(this.insertCachedSegments(e,t,n),t)}handleStreamError(e,t,n){var i;this.errorLoggingService.emit({type:"error-logging",event:r2.EXCEPTION,data:{error:{message:e instanceof TypeError||e.message.includes("ailed to fetch")||(null==(i=e.message)?void 0:i.includes("ross-origin"))?`CORS issue prevented HLS ${n} cache optimization from ${t}`:`Failed to download HLS ${n} from ${t}: ${e.message}`}}})}async getStream(e,t){let n=await window.fetch(e);return n.ok||0===n.status?n:void this.errorLoggingService.emit({type:"error-logging",event:r2.EXCEPTION,data:{error:{message:`Network ${n.status} while loading HLS ${t}: ${e}`}}})}getBandwidthEstimate(e,t,n){if(Number.isFinite(e)&&!(e<=0)&&!(e>419430400)&&!(t<50)&&!Number.isNaN(n))return Math.round(n/8/1024)}addEventListeners(e){e.on(window.Hls.Events.FRAG_LOADED,((t,n)=>{if("main"===n.frag.type){let t=n.frag.stats.bwEstimate,i=n.frag.stats.loading.end-n.frag.stats.loading.start,r=e.bandwidthEstimate,a=this.getBandwidthEstimate(t,i,r);a&&this.videoReportingService.emit({type:"video",event:aQ.BANDWIDTH_ESTIMATION,data:{scene_id:this.scene.getId(),bwe:a}})}})),e.on(window.Hls.Events.LEVEL_SWITCHED,((t,n)=>{this.videoReportingService.emit({type:"video",event:aQ.HLS_LEVEL_SWITCHED,data:{scene_id:this.scene.getId(),level:n.level,bitrate:e.levels[n.level].bitrate}})})),e.on(window.Hls.Events.ERROR,((t,n)=>{if(n.fatal)switch(n.type){case window.Hls.ErrorTypes.MEDIA_ERROR:n.details===window.Hls.ErrorDetails.BUFFER_STALLED_ERROR&&this.videoReportingService.emit({type:"video",event:aQ.HLS_VIDEO_STALLED,data:{scene_id:this.scene.getId(),level:e.currentLevel,bitrate:e.levels[e.currentLevel].bitrate}}),this.errorLoggingService.emit({type:"error-logging",event:r2.RESOURCE,data:{error:Error(`HLS media error: ${n.details}`)}}),e.recoverMediaError();break;case window.Hls.ErrorTypes.NETWORK_ERROR:this.errorLoggingService.emit({type:"error-logging",event:r2.EXCEPTION,data:{error:Error(`HLS network error: ${n.details}`)}});break;default:e.destroy()}}))}constructor(e,t=tM(),n=r5(),i=a2(),r=new oB(e)){this.scene=e,this.environmentService=t,this.errorLoggingService=n,this.videoReportingService=i,this.streamPunkService=r,this.hlsMediaType="application/vnd.apple.mpegurl",this.cachedManifestMetadata=this.streamPunkService.getCachedManifestMetadata()}},uV=class{monitorVideoHealth(e,t,n){var i;n&&(null!=(null==(i=this.videoMonitorTimer)?void 0:i.getId())&&this.videoMonitorTimer.destroy(),this.videoMonitorTimer=this.timerService.getNewTimer(3e4,(()=>{!e.value.matches(lt.AUTO_PLAY_FAIL)&&(e.value.context.canPlay&&e.value.context.currentTime>=0||t(tP))})),this.videoMonitorTimer.start())}startStreamingVideo(e,t,n,i=new uM(this.scene,this.environmentService,this.errorLoggingService,this.videoReportingService)){switch(e.setAttribute("type","application/x-mpegURL"),i.getStreamPlayer(e)){case ug.Custom:i.loadHls(t,e);break;case ug.Native:e.setAttribute("src",t),e.load();break;default:this.observabilityReportingService.emit(tA.HLS_NOT_SUPPORTED,tO.HLS_NOT_SUPPORTED),n({type:ib.NEXT})}}getMutedSignal(){return this.muteService.getMutedSignal()}constructor(e,t=iF(),n=tM(),i=r5(),r=oZ(),a=cE(),s=a2()){this.scene=e,this.timerService=t,this.environmentService=n,this.errorLoggingService=i,this.observabilityReportingService=r,this.muteService=a,this.videoReportingService=s}},uk=(e=tE(),t=tV())=>t.isRewarded()&&e.has(t_.INCENTIVIZED_CLOSE_BUTTON_DELAY_SECONDS)?Number(e.get(t_.INCENTIVIZED_CLOSE_BUTTON_DELAY_SECONDS)):e.has(t_.CLOSE_BUTTON_DELAY_SECONDS)?Number(e.get(t_.CLOSE_BUTTON_DELAY_SECONDS)):0,uU=(e,t=tV(),n=uk())=>!!(t.isBanner()||t.isMrec()||t.isInLine())||!!n&&(9999===n||n>e),uB=class extends cC{init(){if(!this.initialized)try{var e,t,n;this.initialized=!0;let i=JSON.parse(window.atob(this.rawOmsdkData));if(!i.vendorURL||!i.vendorKey)return;super.init(this.videoElement,i),null==(e=this.adSession)||e.setCreativeType(cI.VIDEO),null==(t=this.adSession)||t.setImpressionType(cA.LOADED),null==(n=this.adSession)||n.registerSessionObserver(this.onSessionChange.bind(this))}catch(e){tH().emit({type:"error-logging",event:r2.EXCEPTION,data:{error:{message:"Unable to init omsdk video"}}})}}onSessionStarted(){var e,t;this.hasSessionStartRequested&&this.initialized&&this.duration&&!this.hasSessionStarted&&(null==(e=this.adEvents)||e.impressionOccurred(),this.hasSessionStarted=!0,this.isSkippable=!uU(this.duration),this.vastProperties=new this.sessionClient.VastProperties(this.isSkippable,0,!0,"preroll"),null==(t=this.adEvents)||t.loaded(this.vastProperties),this.eventDrain())}onSessionChange(e){if(e.type===cO.SESSION_START)return this.hasSessionStartRequested=!0,void this.onSessionStarted();if(e.type===cO.SESSION_FINISH){let e=tH();e.emit({type:"video",event:cp.REMOVE_HANDLER}),e.emit({type:"cta",event:cp.REMOVE_HANDLER})}}onVideoCheckpoint(){let{currentTime:e,duration:t,muted:n}=this.videoElement;this.pushOrCallFunction((()=>{var i;this.isBuffering&&(this.isBuffering=!1,null==(i=this.mediaEvents)||i.bufferFinish());let r=a1(e,t);if(e>0&&this.mediaEvents){for(let e=this.checkpointsReached.length;e<=r;e+=1)switch(this.checkpointsReached[e]=!0,e){case 0:this.volume=+!n,this.mediaEvents.start(t,this.volume);break;case 1:this.mediaEvents.firstQuartile();break;case 2:this.mediaEvents.midpoint();break;case 3:this.mediaEvents.thirdQuartile();break;case 4:this.mediaEvents.complete()}}}))}onVideoTimeUpdate(){this.onSessionStarted()}onSoundChange(e){this.pushOrCallFunction((()=>{var t;this.volume=+("mute"!==e),null==(t=this.mediaEvents)||t.volumeChange(this.volume)}))}onVideoBuffering(){this.isBuffering||(this.pushOrCallFunction((()=>{var e;null==(e=this.mediaEvents)||e.bufferStart()})),this.isBuffering=!0)}onVideoStateChanged(e){this.pushOrCallFunction((()=>{var t,n;if(this.checkpointsReached[0]){if("pause"===e)return void(null==(n=this.mediaEvents)||n.pause());null==(t=this.mediaEvents)||t.resume()}}))}onVideoDisplayState(e){let{duration:t}=this.videoElement;!this.isVideoReady&&t>0&&(this.isVideoReady=!0,this.pushOrCallFunction((()=>{var t;null==(t=this.mediaEvents)||t.playerStateChange(e)})))}onVideoMetadataAvailable(e){this.duration=e,this.onSessionStarted()}onVideoPageClose(){this.pushOrCallFunction((()=>{var e;this.isSkippable&&(null==(e=this.mediaEvents)||e.skipped())}))}static getServiceIdentifier(){return"OmsdkVideoServiceInterface"}constructor(e,t){super(),this.videoElement=e,this.rawOmsdkData=t,this.checkpointsReached=[],this.volume=0,this.vastProperties=null,this.isBuffering=!1,this.isSkippable=!1,this.isVideoReady=!1,this.videoElement=e,this.init()}};const uH=()=>tE().has(t_.OM_SDK_DATA)&&cT();var uW=e=>{if(uH()){var t;let n=null!=(t=tE().get(t_.OM_SDK_DATA))?t:"";eX.getInstance().bind(uB.getServiceIdentifier(),new uB(e,n))}},ux=((eI={}).SHOWING="SHOWING",eI.HIDDEN="HIDDEN",eI),uF=((eA={}).SHOW="SHOW",eA.HIDE="HIDE",eA.CLOSE="CLOSE",eA),uK=((eO={}).PAUSE_VIDEO="pauseVideo",eO.PLAY_VIDEO="playVideo",eO.FORFEIT_REWARD="forfeitReward",eO);const uG="incentivized-dialog",uY=()=>({id:uG,initial:ux.HIDDEN,context:{},states:{[ux.HIDDEN]:{on:{[uF.SHOW]:{target:ux.SHOWING,actions:[uK.PAUSE_VIDEO,iW.PAUSE_INTERVALS,iK.STANDBY_TIMERS]}}},[ux.SHOWING]:{on:{[uF.HIDE]:{target:ux.HIDDEN,actions:[uK.PLAY_VIDEO,iW.START_INTERVALS,iK.WAKE_TIMERS]},[uF.CLOSE]:{target:ux.HIDDEN,actions:[uK.FORFEIT_REWARD,iW.START_INTERVALS,iK.WAKE_TIMERS]}}}}}),uj={actions:eJ({},iG(),{pauseVideo:()=>{let e=lu();null==e||e.send({type:le.PAUSE})},playVideo:()=>{let e=lu();null==e||e.send({type:le.PLAY})},forfeitReward:()=>{tH().emit({type:"incentivized-event",event:rS.FORFEIT_REWARD,fireOnlyOnce:!0}),oZ().emit(tA.FORFEIT_REWARD)}},ix())};var uX=e=>(null!=e?e:iN()).interpreterMap.get(uG),uz=(e,t,n=tB(),i=lu(),r=c4(),a=uX())=>{if(!oj(n))return;let s=!1;r.state.context.isPrivacyDrawerOpen&&(s=!0),(null==a?void 0:a.state.value)===ux.SHOWING&&(s=!0),t.event!==tx.MAXIMIZED||s?t.event===tx.MINIMIZED&&(null==i||i.send({type:le.MINIMIZE})):null==i||i.send({type:le.MAXIMIZE,hasHlsVideo:n.videoType===iB.HLS})},u$=(e=tV())=>!e.isBanner();const uq={marginLeft:"0px",marginTop:"0px"},uZ=n7(uq);var uQ=({sendAdEvent:e,isMuted:t,isVisible:n,videoPlayerHeight:i,theatreModeReportingService:r=a5()})=>{let a=()=>{if(!n)return;let e=document.querySelector("video");if(!e)return;let t=eJ({},uq),{videoWidth:i,videoHeight:r}=e,{clientWidth:a,clientHeight:s}=null==e?void 0:e.parentElement,o=i/r;a/s>o?t.marginLeft=(a-s*o)/2+"px":t.marginTop=(s-a/o)/2+"px",uZ.value=t};nK((()=>(window.addEventListener("resize",a),()=>{window.removeEventListener("resize",a)}))),nK((()=>{a()}),[n,i]);let s=dS(r);return n?lJ("button",{type:"button",className:dT(t?"S2LOeW_muted":"S2LOeW_unmuted",s.value?"fadeIn":"fadeOut"),id:aA,title:t?"Unmute":"Mute","aria-label":"Mute button",style:uZ.value,onClick:()=>{e({type:t?ib.UNMUTE:ib.MUTE})},children:lJ("span",{className:"S2LOeW_icon",id:aO})}):null},uJ=({value:e,duration:t,progressBarConfig:{show:n,color:i},paused:r,theatreModeReportingService:a=a5()})=>{let s=dS(a);return n?lJ("div",{role:"progressbar",title:"Video progress",className:dT("OaF7uW_videoProgress",s.value?"fadeIn":"fadeOut"),"aria-label":"Video progress",children:lJ("span",{className:!r&&e>0?"":"OaF7uW_paused",style:{backgroundColor:i,animationDuration:`${t}s`},id:"video-progress-bar"})}):null},u0=({sendVideoEvent:e,sendAdEvent:t,videoState:n,scene:i,onMetadataLoaded:r,theatreModeReportingService:a})=>{var s;let o=new uV(i),l=new uM(i),c=nY((()=>ct()),[]),{url:d}=i,u=nG(null),E=nG(null),_=nG(null),v=iS(0),h=iS(d),S=o.getMutedSignal(),T=iS(""),p=t=>{e({type:t,eventTarget:u.current,url:h.value})},g=()=>{p(le.CAN_PLAY),t({type:ib.PRIVACY_LOGO_SHOW})},C=e=>{t({type:ib.VIDEO_ERROR,error:Error(e),videoUrl:h.value}),t({type:ib.VIDEO_FAILURE})},A=()=>{setTimeout((()=>{u.current&&(u.current.muted=S.value)}),100)},I=()=>{E.current=iF().getNewTimer(1e4,(()=>{n.value.value!==lt.AUTO_PLAY_FAIL&&(!n.value.context.canPlay||n.value.context.currentTime<=0)&&C(tL)})),E.current.start()};return nK((()=>{var r,s,o;switch(n.value.value){case lt.PLAYING:null==(s=E.current)||null==(r=s.destroy)||r.call(s),(()=>{var t;let i=null==(t=u.current)?void 0:t.play();i?i.then(A).catch((t=>{let n=t.name.toLowerCase();"notallowederror"===n?e({type:le.AUTO_PLAY_FAIL}):"aborterror"===n||C(tb)})):window.setTimeout((()=>{var t;n.value.value===lt.PLAYING&&0===(null==(t=document.getElementsByTagName("video")[0])?void 0:t.currentTime)&&e({type:le.AUTO_PLAY_FAIL})}),2500)})();break;case lt.LOAD_FAIL_RETRY:(()=>{e({type:le.RETRY});let t=i.originalVideoUrl;t&&t!==h.value?h.value=t:C(ty)})();break;case lt.PAUSED:null==(o=u.current)||o.pause();break;case lt.ENDED:if(i.loopVideo){if(e({type:le.PLAY}),dG()){let e=i3();null==a||a.emit({type:"theatre-mode-event",event:oK.REVEAL_CONTROLS}),(null==e?void 0:e.canOpen())&&i.storeKitOverlayAutoShowConfig.enabled&&(null==e||e.open())}}else{let n=i.getLastChanceEndcardConfig().enabled;e({type:le.CLOSE}),t(n?{type:ib.LAST_CHANCE_ENDCARD}:{type:ib.COMPLETE})}}}),[n.value.value]),iO((()=>{u.current&&h.value&&(uW(u.current),u.current.setAttribute("muted","true"),i.videoType===iB.PROGRESSIVE&&(e=>{u.current&&e&&(u.current.setAttribute("src",e),u.current.load(),i.canSkipToNextScene?I():o.monitorVideoHealth(n,C,u.current))})(h.value))})),iO((()=>{let e=l.getStreamPlayer(u.current);if(h.value&&i.videoType===iB.HLS&&e!==ug.NotSupported){let t=async()=>{e===ug.Native?T.value=await l.getHlsManifest(h.value):T.value=h.value};i.canSkipToNextScene?I():o.monitorVideoHealth(n,C,u.current),t()}})),iO((()=>{""!==T.value&&(null==u?void 0:u.current)&&o.startStreamingVideo(u.current,T.value,t)})),iO((()=>{var e,t;u.current&&(null==(e=(t=n.value).matches)?void 0:e.call(t,lt.PLAYING))&&!u.current.paused&&!u.current.ended&&(u.current.muted=S.value)})),nK((()=>(c.addEventHandler("viewability",uz),()=>{c.removeEventHandler("viewability",uz)})),[e,c]),nK((()=>{let e=t=>{u.current&&(u.current.readyState>2?g():iF().getNewTimer(t,(()=>{e(t)})).start())};e(200)}),[]),lJ("div",{className:dT("ok_seq_videoPlayerWrap","videoPlayer"),ref:_,id:i.getId(),children:[lJ(uQ,{sendAdEvent:t,isMuted:S.value,isVisible:n.value.context.canPlay&&u$(),videoPlayerHeight:null==(s=_.current)?void 0:s.clientHeight}),lJ("video",{title:"Video player",id:"video-player",ref:u,muted:!0,playsInline:!0,className:"ok_seq_videoPlayer",poster:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQAAAAA3bvkkAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAnRSTlMAAHaTzTgAAAACYktHRAAB3YoTpAAAAAd0SU1FB+YHDAoSGnw+PegAAAAKSURBVAjXY2AAAAACAAHiIbwzAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIyLTA3LTEyVDEwOjE4OjI2KzA4OjAww+Ou8wAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMi0wNy0xMlQxMDoxODoyNiswODowMLK+Fk8AAAAASUVORK5CYII=",onError:()=>{h.value===d?p(le.LOAD_FAIL):C(tD)},onDurationChange:()=>{p(le.DURATION_CHANGE)},onWaiting:()=>{p(le.WAITING)},onSuspend:()=>{p(le.SUSPEND)},onCanPlay:g,onCanPlayThrough:()=>{a2().emit({type:"video",event:aQ.CAN_PLAY_THROUGH})},onTimeUpdate:t=>{let{target:i}=t,r=n.value.value!==lt.PLAYING;Number.isNaN(i.duration)||0===i.duration||i.seeking||r||(v.value=i.currentTime,e({eventTarget:i,type:le.TIME_UPDATE}))},onEnded:()=>{v.value=0,e({type:le.END})},onSeeking:e=>{let t=e.target,n=t.currentTime-v.value;!(t.readyState<3)&&Math.abs(n)>3&&(t.currentTime=v.value)},"data-loop-count":n.value.context.loopCount,"data-scene-id":i.getId(),disableRemotePlayback:!0,onLoadedMetadata:()=>{null==r||r()}}),lJ(uJ,{value:n.value.context.progress,duration:n.value.context.duration,paused:n.value.value===lt.PAUSED,progressBarConfig:i.getProgressBarConfig()})]})},u1=(e,t=tM())=>{var n;let i=t.getOperatingSystem();if(i===tg.Android)return!!(null!=(n=null==e?void 0:e.filter)?n:null==e?void 0:e.webkitFilter);if(i===tg.iOS){let e=document.createElement("div");if("webkitFilter"in e.style||"filter"in e.style)return!0}return!1},u2=({isInLine:e=!1})=>{var t,n,i,r;let a=nG(null),s=nG(null),o=nG(),l=nG(),c=iS(!1),d=iS(window.document.body.clientWidth),u=iS(window.document.body.clientHeight),E=iS(0),_=iS(0),v=iS(0),h=iS(0),S=null==(t=lu())?void 0:t.state.context.videoElement,T=null==(n=lu())?void 0:n.state.context.canPlay,p=null==(i=lu())?void 0:i.state.context.videoWidth,g=null==(r=lu())?void 0:r.state.context.videoHeight,C=()=>{var e,t;a.current&&(d.value=null==(e=a.current)?void 0:e.clientWidth,u.value=null==(t=a.current)?void 0:t.clientHeight)},A=()=>{if(!S)return;let t=S.videoHeight>S.videoWidth;c.value=(e||t)&&!!S&&(!!e||S.videoWidth/S.videoHeight<d.value/u.value)&&u1(o.current)},I=()=>{C(),(()=>{var e;null==(e=o.current)||e.clearRect(0,0,v.value,h.value)})(),A()};return nK((()=>{S&&(E.value=S.clientHeight,_.value=S.clientWidth),A()}),[null==S?void 0:S.clientHeight,null==S?void 0:S.clientWidth,o.current]),nK((()=>(T&&(window.addEventListener("resize",I),C(),(()=>{if(s.current&&d&&u&&p&&g&&u){var e;let t=p/d.value,n=g/u.value,i=p/g<d.value/u.value?t:n,r=Math.floor(Number(p/i)),a=Math.floor(Number(g/i));o.current=null==(e=s.current)?void 0:e.getContext("2d"),v.value=r,h.value=a}})(),l.current=iH().getNewInterval(60,(()=>{c.value&&o.current&&o.current.drawImage(S,0,0,v.value,h.value)})),l.current.start()),()=>{var e;window.removeEventListener("resize",I),null==(e=l.current)||e.destroy()})),[T]),lJ("div",{id:"video-blur",ref:a,className:"RypQCq_videoBlurWrap",children:lJ("canvas",{id:"video-blur-canvas",ref:s,width:v,height:h})})},u3=({isVisible:e,sendVideoEvent:t})=>e?lJ("div",{role:"none",className:"dDtiqq_tapToPlayMask",onClick:()=>{var e;null==(e=document.getElementsByTagName("video")[0])||e.play(),t({type:le.PLAY})},id:"tap-to-play",title:"tap-to-play",children:lJ("div",{className:"dDtiqq_tapToPlayContainer",children:[lJ("div",{className:"dDtiqq_tapToPlayIcon"}),lJ("div",{className:"dDtiqq_tapToPlayText",children:"Tap to play"})]})}):null,u5=class{getFadeInClass(e){var t;return this.storeKitOverlayAutoShowConfig.enabled&&(null==(t=this.storeKitOverlayService)?void 0:t.isOpen())?e?"fadeIn":"fadeOut":"fadeIn"}constructor(e,t=i3()){this.storeKitOverlayAutoShowConfig=e,this.storeKitOverlayService=t}};const u4=(e,t)=>{e.emit({type:"cta",event:d2.DOWNLOAD_BUTTON_CTA,data:{scene_id:t}})};var u6=({callToActionReportingService:e,sceneId:t,storeKitOverlayAutoShowConfig:n,theatreModeReportingService:i=a5(),storeKitOverlayService:r=i3(),service:a=new u5(n,r)})=>{let s="Download button",o=dS(i);return lJ("button",{className:dT("Zz6y0G_download",a.getFadeInClass(o.value)),title:s,"aria-label":s,id:"download-button",type:"button",onClick:()=>{u4(e,t)},children:lJ("span",{className:"Zz6y0G_downloadIcon"})})},u8=({id:e="star",index:t=0,size:n,offset:i=100})=>{let r=`${e}-gradient-${t}`;return lJ("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,viewBox:"0 0 100 100",children:[lJ("defs",{children:lJ("linearGradient",{id:r,x1:"0",x2:"100%",y1:"0",y2:"0",children:[lJ("stop",{offset:"0%","stop-color":"#ffd055"}),lJ("stop",{offset:`${i}%`,"stop-color":"#ffd055"}),lJ("stop",{offset:`${i}%`,"stop-color":"#ddd"})]})}),lJ("path",{d:"M50,0,64.69463130731182,29.774575140626315,97.55282581475768,34.54915028125263,73.77641290737884,57.72542485937368,79.38926261462366,90.45084971874736,50,75,20.61073738537635,90.45084971874738,26.223587092621162,57.72542485937369,2.447174185242318,34.549150281252636,35.30536869268816,29.774575140626318Z",fill:`url(#${r})`,"stroke-linejoin":"round","stroke-linecap":"round"})]})},u7=class{getOffsetPercent(e,t){let n=Math.floor(t);return e<n?100:e>n?0:Math.ceil(t%1*100/this.unitValue)*this.unitValue}constructor(){this.unitValue=10}};const u9=12,Ee=5,Et=0;var En=({id:e,size:t=12,count:n=5,value:i=0})=>{let r=[],a=new u7;for(let s=0;s<n;s+=1){let n=a.getOffsetPercent(s,i);r.push(lJ(u8,{id:e,index:s,size:t,offset:n},s))}return lJ("span",{id:e,children:r})},Ei=class{getVideoComputedHeight(){let e=this.injectedGetVideoInterpreter(),t=null==e?void 0:e.state.context.videoElement;if(!t)return 0;let n=t.videoWidth/t.videoHeight;return Number.isNaN(n)?0:parseFloat(window.getComputedStyle(t).getPropertyValue("width"))/n}updateScreenshotsHeight(e){if(!e.current)return;let t=this.getVideoComputedHeight();if(0===t)return;let n=window.innerHeight-t-120;n>=100?e.current.style.height=`${n}px`:e.current.style.display="none"}handleClick(e,t){let n=e.target;if(t.some((e=>null!==n.closest(`#${e}`))))return this.ctaReportingService.emit({type:"cta",event:d2.PERSISTENT_CTA,data:{scene_id:this.sceneId}}),void this.sceneEventReportingService.emit(aE.CTA_BUTTON_CLICK);this.fullScreenClickConfig.enabled&&this.fullCtaReportingService.emit({type:"fsc",event:li.FSC,data:{scene_id:this.sceneId}})}constructor(e,t,n,i=lr(),r=la(),a=aU(),s=lu){this.fullScreenClickConfig=e,this.sceneId=t,this.storeKitOverlayAutoShowConfig=n,this.ctaReportingService=i,this.fullCtaReportingService=r,this.sceneEventReportingService=a,this.injectedGetVideoInterpreter=s}};const Er=n7(!1);var Ea=({fullScreenClickConfig:e,callToActionConfig:t,storeKitOverlayAutoShowConfig:n,sceneId:i,sceneEventReportingService:r=aU(),timerService:a=iF(),ctaReportingService:s=lr(),fullCtaReportingService:o=la()})=>{var l,c,d,u;let E=new Ei(e,i,n,s,o,r);return nK((()=>{a.getNewTimer(t.delay,(()=>{Er.value=!0,r.emit(aE.CTA_BUTTON_SHOW)})).start()}),[]),lJ("div",{id:aI,className:dT("UUyEIq_persistentSimpleCta",Er.value?"UUyEIq_slideIn":""),"aria-hidden":"true",onClick:e=>{E.handleClick(e,["persistent-simple-cta-app-name","persistent-simple-cta-app-icon","persistent-simple-cta-app-company","persistent-simple-cta-app-rating","persistent-simple-cta-button"])},children:[(null==(l=t.appMeta)?void 0:l.icon)&&lJ("img",{className:"UUyEIq_appIcon",id:"persistent-simple-cta-app-icon",alt:"app-icon",src:t.appMeta.icon}),((null==(c=t.appMeta)?void 0:c.name)||(null==(d=t.appMeta)?void 0:d.company))&&lJ("div",{className:"UUyEIq_appDetail",id:"persistent-simple-cta-app-detail",children:[t.appMeta.name&&lJ("h1",{id:"persistent-simple-cta-app-name",children:t.appMeta.name}),t.appMeta.company&&lJ("h2",{id:"persistent-simple-cta-app-company",children:t.appMeta.company}),t.appMeta.isRatingGreaterThanMinimum&&lJ(En,{value:t.appMeta.rating,id:"persistent-simple-cta-app-rating"})]}),lJ("button",{className:"UUyEIq_persistentSimpleCtaBtn",style:(null==(u=t.background)?void 0:u.color)?{backgroundColor:t.background.color}:{},type:"button",id:"persistent-simple-cta-button",children:t.text})]})},Es=({fullScreenClickConfig:e,callToActionConfig:t,storeKitOverlayAutoShowConfig:n,sceneId:i,sceneEventReportingService:r=aU(),ctaReportingService:a=lr(),fullCtaReportingService:s=la()})=>{var o,l,c,d,u,E,_,v;let h=new Ei(e,i,n,a,s,r);nK((()=>{let e=document.createElement("style");return e.textContent="\n    .videoPlayer {\n      width: 100%;\n      height: auto;\n      margin-top: 120px;\n    }\n    ",document.head.appendChild(e),()=>{document.head.removeChild(e)}}),[]),nK((()=>{r.emit(aE.CTA_BUTTON_SHOW)}),[]);let S=null==(o=t.appMeta)?void 0:o.isRatingGreaterThanMinimum;return lJ("div",{id:"persistent-rich-cta",className:"DwKKSa_persistentRichCta",onClick:e=>{h.handleClick(e,["persistent-rich-cta-app-name","persistent-rich-cta-app-icon","persistent-rich-cta-company-name","persistent-rich-cta-app-rating","persistent-rich-cta-button"])},"aria-hidden":"true",children:[(null==(l=t.appMeta)?void 0:l.icon)&&lJ("img",{className:"DwKKSa_appIcon",alt:"app-icon",id:"persistent-rich-cta-app-icon",src:null==(c=t.appMeta)?void 0:c.icon}),lJ("div",{className:"DwKKSa_appInfo",children:[(null==(d=t.appMeta)?void 0:d.name)&&lJ("h1",{id:"persistent-rich-cta-app-name",children:null==(u=t.appMeta)?void 0:u.name}),S&&lJ(En,{value:null==(E=t.appMeta)?void 0:E.rating,id:"persistent-rich-cta-app-rating"}),!S&&lJ("p",{id:"persistent-rich-cta-company-name",children:null==(_=t.appMeta)?void 0:_.company}),lJ("button",{className:"DwKKSa_persistentRichCtaBtn",type:"button",style:(null==(v=t.background)?void 0:v.color)?{backgroundColor:t.background.color}:{},id:aL,children:t.text})]})]})};const Eo=(e,t)=>{e.enabled?la().emit({type:"fsc",event:li.FSC,data:{scene_id:t}}):lr().emit({type:"cta",event:d2.PERSISTENT_CTA,data:{scene_id:t}})};var El=({fullScreenClickConfig:e,callToActionConfig:t,storeKitOverlayAutoShowConfig:n,sceneId:i,sceneEventReportingService:r=aU(),ctaReportingService:a=lr(),fullCtaReportingService:s=la()})=>{var o;let l=new Ei(e,i,n,a,s,r),c=nG(null);nK((()=>{l.updateScreenshotsHeight(c)}),[window.innerHeight,window.innerWidth]);let d=null==(o=t.appMeta)?void 0:o.screenshots;return d&&0!==d.length?lJ("div",{id:"persistent-rich-cta-screenshots",ref:c,className:"dalDea_persistentRichCtaScreenshots",onClick:()=>Eo(e,i),"aria-hidden":"true",children:d.map((e=>e&&lJ("div",{className:"dalDea_slide",children:lJ("img",{alt:e,src:e})},e)))}):null},Ec=({videoOrientation:e,viewportOrientation:t,scene:n,disableRichCta:i=!1})=>{var r,a;if("unknown"===e)return null;let s=n.getId();return!i&&"landscape"===e&&"portrait"===t&&(null!=(a=null==(r=n.getCallToActionConfig().appMeta)?void 0:r.screenshots)?a:[]).length>0?lJ(nh,{children:[lJ(Es,{fullScreenClickConfig:n.getFullScreenClickConfig(),callToActionConfig:n.getCallToActionConfig(),storeKitOverlayAutoShowConfig:n.getStoreKitOverlayAutoShowConfig(),sceneId:s}),lJ(El,{fullScreenClickConfig:n.getFullScreenClickConfig(),callToActionConfig:n.getCallToActionConfig(),storeKitOverlayAutoShowConfig:n.getStoreKitOverlayAutoShowConfig(),sceneId:s})]}):lJ(Ea,{fullScreenClickConfig:n.getFullScreenClickConfig(),callToActionConfig:n.getCallToActionConfig(),storeKitOverlayAutoShowConfig:n.getStoreKitOverlayAutoShowConfig(),sceneId:s})},Ed=((em=Ed||{}).PERCENTAGE="percentage",em.ABSOLUTE="absolute",em);const Eu=e=>{let t,n,i;return e.includes("_")?[t,n,i]=e.split("_"):e.includes(":")?[t,n,i]=e.split(":"):(t=e.substring(0,2),n=e.substring(2,2),i=e.substring(4,2)),3600*Number(t)+60*Number(n)+Number(i)},EE=e=>e.endsWith("p")?Number(e.replace("p","")):e.endsWith("%")?Number(e.replace("%","")):Number(e),E_=e=>e.endsWith("p")||e.endsWith("%")?"percentage":"absolute",Ev=e=>{let t=eX.getInstance(),n=t.has(e)?t.get(e):void 0;if(n)return n;let i=e.split(";").filter((e=>e&&""!==e));return i&&0!==i.length?(n=i.map((e=>{let t=e.split(".")[1],n=E_(t);return{type:n,tpat_event:e,value:"percentage"===n?EE(t):Eu(t)}})),t.bind(e,n),n):[]};var Eh=(e,t)=>{let n=tE();t.event===aQ.PROGRESS&&n.has(t_.TPAT_PROGRESS_EVENTS)&&Ev(n.get(t_.TPAT_PROGRESS_EVENTS)).forEach((n=>{var i,r;if((null==(i=t.data)?void 0:i.current_time)&&(null==(r=t.data)?void 0:r.duration)){let{current_time:i,duration:r}=t.data,a=Math.floor(i/r*100),s=Math.floor(i);("percentage"===n.type&&a>=n.value||"absolute"===n.type&&n.value<=r&&s>=n.value)&&e.emit({type:"tpat",event:n.tpat_event,fireOnlyOnce:!0})}}))};const ES=[rK.CHECKPOINT_0,rK.CHECKPOINT_25,rK.CHECKPOINT_50,rK.CHECKPOINT_75,rK.CHECKPOINT_100],ET=(e,t)=>ES[a1(e,t)],Ep=(e,t=tH())=>{let n=[];return ES.slice(0,e).forEach((e=>{t.hasExistingEvent({type:"tpat",event:e})||n.push(e)})),n};var Eg=(e,t,n,i=rX())=>{let r=ET(e,t);Ep(a1(e,t)).forEach((r=>{i.emit(r,!0,{progress:n,current_time:e,duration:t})})),i.emit(r,!0,{progress:n,current_time:e,duration:t})},EC=(e,t,n,i=cN())=>{if((null==n?void 0:n.getSceneType())!==iM.video)return;let r=[ik.START,ik.FIRST_QUARTILE,ik.MIDPOINT,ik.THIRD_QUARTILE,ik.COMPLETE][a1(e,t)];r&&cP(r,n.getId(),n.getTrackingEventMapConfig(),!0,i)};const EI=e=>({id:e.getId(),initial:lt.LOADING,context:{currentTime:0,duration:0,progress:0,videoHeight:0,videoWidth:0,videoElement:null,canPlay:!1,loopCount:0,orientation:"unknown",videoPlayer:e.getVideoPlayer()},states:{[lt.LOADING]:{entry:ln.EMIT_LOAD,on:{[le.LOAD_FAIL]:{target:lt.LOAD_FAIL_RETRY},[le.CAN_PLAY]:{target:lt.PLAYING,actions:[ln.SET_CAN_PLAY,ln.REPORT_VIDEO_START]},[le.PAUSE]:lt.PAUSED,[le.DURATION_CHANGE]:{actions:ln.EMIT_DURATION_CHANGE},[le.WAITING]:{actions:ln.EMIT_WAITING},[le.SUSPEND]:{actions:ln.EMIT_SUSPEND}}},[lt.LOAD_FAIL_RETRY]:{on:{[le.RETRY]:lt.LOADING}},[lt.PLAYING]:{entry:ln.EMIT_PLAY,on:{[le.MINIMIZE]:{target:lt.PAUSED,actions:[ln.UPDATE_CURRENT_TIME]},[le.PAUSE]:lt.PAUSED,[le.END]:lt.ENDED,[le.AUTO_PLAY_FAIL]:lt.AUTO_PLAY_FAIL,[le.TIME_UPDATE]:{actions:[ln.UPDATE_PROGRESS,ln.EMIT_PROGRESS,ln.EMIT_CHECKPOINT_TPAT_EVENT,ln.EMIT_SCENE_EVENT,ln.EMIT_TIME_UPDATE]},[le.SUSPEND]:{actions:ln.EMIT_SUSPEND},[le.WAITING]:{actions:ln.EMIT_WAITING},[le.CLOSE]:{target:lt.FINAL,actions:ln.EMIT_CLOSE}}},[lt.PAUSED]:{entry:ln.EMIT_PAUSE,on:{[le.MINIMIZE]:{actions:[ln.UPDATE_CURRENT_TIME]},[le.CAN_PLAY]:{actions:ln.SET_CAN_PLAY},[le.MAXIMIZE]:{target:lt.PLAYING,actions:[ln.RESET_CURRENT_TIME]},[le.PLAY]:lt.PLAYING,[le.TIME_UPDATE]:{actions:[ln.UPDATE_PROGRESS,ln.EMIT_PROGRESS,ln.EMIT_CHECKPOINT_TPAT_EVENT,ln.EMIT_SCENE_EVENT]},[le.AUTO_PLAY_FAIL]:lt.AUTO_PLAY_FAIL,[le.CLOSE]:{target:lt.FINAL,actions:ln.EMIT_CLOSE}}},[lt.AUTO_PLAY_FAIL]:{entry:[iK.STANDBY_TIMERS,iW.PAUSE_INTERVALS],on:{[le.PLAY]:{target:lt.PLAYING,actions:[iK.WAKE_TIMERS,iW.START_INTERVALS]}}},[lt.ENDED]:{on:{[le.PLAY]:{target:lt.PLAYING,actions:[ln.INCREMENT_LOOP_COUNT,ln.DISABLE_THEATRE_MODE]},[le.PAUSE]:lt.PAUSED,[le.CLOSE]:{target:lt.FINAL,actions:ln.EMIT_CLOSE_FULLY_PLAYED}}},[lt.FINAL]:{}}}),EA={actions:eJ({[ln.UPDATE_PROGRESS]:e9({currentTime:(e,t)=>t.eventTarget.currentTime,duration:(e,t)=>t.eventTarget.duration,progress:(e,t)=>{let{currentTime:n,duration:i}=t.eventTarget;return Math.round(n/i*100)}}),[ln.EMIT_PROGRESS]:e=>{void 0!==e.duration&&a2().emit({type:"video",event:aQ.PROGRESS,data:{progress:e.progress,current_time:e.currentTime,duration:e.duration}})},[ln.EMIT_CHECKPOINT_TPAT_EVENT]:e=>{void 0!==e.duration&&Eg(e.currentTime,e.duration,e.progress)},[ln.EMIT_SCENE_EVENT]:e=>{void 0!==e.duration&&EC(e.currentTime,e.duration,tB())},[ln.EMIT_PAUSE]:()=>{a2().emit({type:"video",event:aQ.PAUSE})},[ln.EMIT_PLAY]:e=>{a2().emit({type:"video",event:aQ.PLAY,data:{duration:e.duration}})},[ln.REPORT_VIDEO_START]:e=>{let t=cE(),n=oZ(),i=tE(),r={[iU.CUSTOM]:tO.CUSTOM_VIDEO_PLAYER,[iU.NATIVE]:tO.NATIVE_VIDEO_PLAYER,[iU.PROGRESSIVE]:tO.PROGRESSIVE_VIDEO_PLAYER};n.emit([{name:tA.VIDEO_START,metric:tO.VIDEO_START,is_muted:t.isMuted(),actual_video_duration:e.duration,expected_video_duration:Number(i.get(t_.VIDEO_DURATION))},{name:tA.VIDEO_START,metric:r[e.videoPlayer]}]),aU().emit(aE.LOAD_COMPLETE)},[ln.INCREMENT_LOOP_COUNT]:e9({loopCount:e=>e.loopCount+1}),[ln.EMIT_CLOSE]:e=>{let t=e.loopCount>0,n=t?null==e?void 0:e.duration:null==e?void 0:e.currentTime;a2().emit({type:"video",event:aQ.CLOSE,data:{is_video_fully_played:t,maximum_viewing_time:n}})},[ln.EMIT_CLOSE_FULLY_PLAYED]:e=>{a2().emit({type:"video",event:aQ.CLOSE,data:{is_video_fully_played:!0,maximum_viewing_time:null==e?void 0:e.duration}})},[ln.SET_CAN_PLAY]:e9({canPlay:()=>!0,duration:(e,t)=>{var n;return null==(n=t.eventTarget)?void 0:n.duration},videoWidth:(e,t)=>{var n;return null==(n=t.eventTarget)?void 0:n.videoWidth},videoHeight:(e,t)=>{var n;return null==(n=t.eventTarget)?void 0:n.videoHeight},videoElement:(e,t)=>t.eventTarget,orientation:(e,t)=>{var n;let{videoWidth:i,videoHeight:r}=null!=(n=t.eventTarget)?n:{};return i/r>1?"landscape":"portrait"}}),[ln.EMIT_DURATION_CHANGE]:(e,t)=>{var n;tH().emit({type:"video",event:aQ.DURATION_CHANGE,data:{duration:null==(n=t.eventTarget)?void 0:n.duration}})},[ln.EMIT_WAITING]:()=>{tH().emit({type:"video",event:aQ.WAITING})},[ln.EMIT_SUSPEND]:(e,t)=>{var n;tH().emit({type:"video",event:aQ.SUSPEND,data:{ready_state:null==(n=t.eventTarget)?void 0:n.readyState}})},[ln.EMIT_TIME_UPDATE]:()=>{tH().emit({type:"video",event:aQ.TIME_UPDATE})},[ln.UPDATE_CURRENT_TIME]:e9({currentTime:e=>e.videoElement?e.videoElement.currentTime:0}),[ln.RESET_CURRENT_TIME]:e=>{e.videoElement&&(e.videoElement.currentTime=e.currentTime)},[ln.EMIT_LOAD]:()=>{aU().emit(aE.LOAD_START)},[ln.DISABLE_THEATRE_MODE]:e=>{let t=a5();1===e.loopCount&&t.emit({type:"theatre-mode-event",event:oK.DISABLE_THEATRE_MODE})}},ix(),iG())};var EO=e=>c6(EI(e),EA),Em=class{getCloseButtonDelaySeconds(e,t){return void 0===e||Number.isNaN(e)||e<=0?6:this.injectedIsUnskippableAd(e,this.placementTypeService,t)?e:t}getCloseButtonCountDown(e,t){return!(void 0===e||Number.isNaN(e))&&!(e<=0)&&t}getCloseButtonStyle(e,t){return e?rh.CLOSE:t}async getCloseButtonConfig(e,t){let n=e.getCloseButtonConfig({videoDuration:t}),i=e.isLastPage(),r={delay:this.getCloseButtonDelaySeconds(t,n.delay),style:this.getCloseButtonStyle(i,n.style),countdown:this.getCloseButtonCountDown(t,n.countdown)},a=this.injectedIsUnskippableAd(null!=t?t:6,this.placementTypeService,n.delay);return this.amplifyEndcardEngagementService&&!a&&(r.delay=await this.amplifyEndcardEngagementService.getVideoCloseButtonDelayWithUserActivity(r.delay)),r}shouldReplaceShowStoreKitOverlay(){var e;return!!(this.isStoreKitOverlaySupported&&this.placementTypeService.isFullscreen()&&(null==(e=this.productViewService)?void 0:e.isDone()))}getFullScreenClickConfig(e,t,n){return this.injectedIsTheatreModeActive()?{enabled:!1}:e?null!=n?n:{enabled:!1}:t}constructor(e=rc(),t=ri(),n=tV(),i=oA(),r=uU,a=dG){this.isStoreKitOverlaySupported=e,this.productViewService=t,this.placementTypeService=n,this.amplifyEndcardEngagementService=i,this.injectedIsUnskippableAd=r,this.injectedIsTheatreModeActive=a}},Ef=(e,t=uX(),n=tH())=>i=>{if([ib.NEXT,ib.LAST_CHANCE_ENDCARD].includes(i.type)){if(!n.hasExistingEvent({type:"incentivized-event",event:rS.GRANT_REWARD}))return void(null==t||t.send({type:uF.SHOW}));null==t||t.send({type:uF.HIDE})}e(i)},EN=()=>{let e=eX.getInstance(),t=uB.getServiceIdentifier();if(e.has(t))return e.get(t)};const ED=(e,t)=>{var n,i;let r=EN();if(r)switch(t.event){case aQ.DURATION_CHANGE:{let e=(null==(n=t.data)?void 0:n.duration)||0;r.onVideoMetadataAvailable(e),r.onVideoDisplayState("fullscreen");break}case aQ.WAITING:case aQ.SUSPEND:r.onVideoBuffering();break;case aQ.TIME_UPDATE:r.onVideoTimeUpdate(),r.onVideoCheckpoint();break;case aQ.MUTE:case aQ.UNMUTE:r.onSoundChange(t.event);break;case aQ.PLAY:case aQ.PAUSE:r.onVideoStateChanged(t.event);break;case aQ.CLOSE:(null==(i=t.data)?void 0:i.isVideoFullyPlayed)||r.onVideoPageClose();break;case d2.DOWNLOAD_BUTTON_CTA:case"FSC":r.onCtaClick();break;case cp.REMOVE_HANDLER:tW().removeEventHandler(t.type,ED)}};var ER=({titleText:e,bodyText:t,isVisible:n,identifier:i,children:r})=>lJ("div",{id:null!=i?i:"dialog",role:"dialog",className:"W6zMza_dialogBox",style:{visibility:n?"visible":"hidden"},children:lJ("div",{className:"W6zMza_dialog",children:lJ("div",{className:"W6zMza_dialogContent",children:[lJ("div",{className:"W6zMza_dialogTitle",children:e}),lJ("div",{className:"W6zMza_dialogBody",children:[lJ("div",{className:"W6zMza_dialogText",children:t}),lJ("div",{className:"W6zMza_dialogActions",children:r})]})]})})}),Ey=class{getTitleText(){var e;return null!=(e=this.tokenService.get(t_.INCENTIVIZED_TITLE_TEXT))?e:this.hasFollowUpAdExperience?"Close this video?":"Close this ad?"}getBodyText(){var e;return null!=(e=this.tokenService.get(t_.INCENTIVIZED_BODY_TEXT))?e:`Are you sure you want to skip this ${this.hasFollowUpAdExperience?"video":"ad"}? Finish watching to claim your reward.`}getCloseText(){var e;return null!=(e=this.tokenService.get(t_.INCENTIVIZED_CLOSE_TEXT))?e:this.hasFollowUpAdExperience?"Close Video":"Close Ad"}getContinueText(){var e;return null!=(e=this.tokenService.get(t_.INCENTIVIZED_CONTINUE_TEXT))?e:"Continue"}constructor(e,t=tE(),n=tB()){var i;this.tokenService=t,this.hasFollowUpAdExperience=(null==n||null==(i=n.next)?void 0:i.getSceneType())!==iM.closed||e}},EL=()=>{let[e,t]=c6(uY(),uj);return[e,t]},EP=({sendAdEvent:e,showLastChanceEndcard:t=!1})=>{let[n,i]=EL(),r=new Ey(t);return lJ(ER,{identifier:"incentivized-dialog",titleText:r.getTitleText(),bodyText:r.getBodyText(),isVisible:n.value.matches(ux.SHOWING),children:lJ(nh,{children:[lJ("div",{className:"eDiOmG_primaryButton",children:lJ("button",{className:"primary",type:"button",id:"incentivized-dialog-continue",onClick:()=>{i({type:uF.HIDE})},children:[r.getContinueText(),lJ("span",{className:"eDiOmG_continueIcon",id:"incentivized-dialog-continue-icon"})]})}),lJ("div",{className:"eDiOmG_secondaryButton",children:lJ("button",{className:"secondary",type:"button",id:"incentivized-dialog-close",onClick:()=>{i({type:uF.CLOSE}),e({type:t?ib.LAST_CHANCE_ENDCARD:ib.NEXT})},children:r.getCloseText()})})]})})},Eb=(e,t,n,i=!1)=>{let r=iS(null);return nK((()=>(!r.value&&i&&t.getCloseButtonConfig(e,n).then((e=>{r.value=e})),()=>{})),[n,i]),r};const Ew=n7(!1),EM=n7(!1);var EV=({scene:e,sendAdEvent:t,isCloseButtonVisible:n=!0,isFreeForm:i,showVideoBlur:r=!1,theatreModeReportingService:a,placementTypeService:s=tV()})=>{let o=tM(),l=e.getStoreKitOverlayAutoShowConfig().enabled,c=new Em,[d,u]=EO(e),E=s.isRewarded()&&!i?Ef(t):t;uu(e.getId(),e.getAppStoreOnDelayConfig(),d.value.context.canPlay),uE(e.getStoreKitOverlayAutoShowConfig(),EM.value),dh("video",Eh),uS(e.getId(),e.isChild()),d6(t),cL(),d9(e),uv({callToActionConfig:Ew.value?e.getLastChanceEndcardConfig().cta:e.getCallToActionConfig(),trackingEventMapConfig:e.getTrackingEventMapConfig(),sceneId:e.getId(),shouldReplaceShowStoreKitOverlay:c.shouldReplaceShowStoreKitOverlay()}),u_({fullScreenClickConfig:c.getFullScreenClickConfig(Ew.value,e.fullScreenClickConfig,e.getLastChanceEndcardConfig().fsc),trackingEventMapConfig:e.getTrackingEventMapConfig(),sceneId:e.getId(),shouldReplaceShowStoreKitOverlay:c.shouldReplaceShowStoreKitOverlay()}),dh("cta",((e,t)=>{Ew.value||ED(e,t),null==a||a.emit({type:"theatre-mode-event",event:oK.REVEAL_CONTROLS})})),dh("fsc",((e,t)=>{Ew.value||ED(e,t)}));let _=d.value.context.canPlay&&n&&!Ew.value,v=Eb(e,c,d.value.context.duration,_),h=e.getId();return lJ(nh,{children:[lJ(EP,{sendAdEvent:t,showLastChanceEndcard:e.getLastChanceEndcardConfig().enabled}),lJ(d4,{config:e.getLastChanceEndcardConfig(),sendAdEvent:t,onVisibilityChange:e=>{Ew.value=e},sceneId:h}),lJ(d0,{config:e.getFullScreenClickConfig(),sceneId:h,children:[_&&v.value&&lJ(dz,{config:v.value,sendAdEvent:E,showLastChanceEndcard:e.getLastChanceEndcardConfig().enabled,theatreModeReportingService:a}),lJ(u3,{isVisible:d.value.matches(lt.AUTO_PLAY_FAIL),sendVideoEvent:u}),lJ(u2,{isInLine:tV().isInLine()||r}),lJ(u0,{scene:e,videoState:d,sendVideoEvent:u,sendAdEvent:t,theatreModeReportingService:a,onMetadataLoaded:()=>{EM.value=!0}}),e.showDownloadButton&&lJ(dH,{delay:e.getCallToActionConfig().delay,isVisible:!1,children:lJ(u6,{sceneId:h,storeKitOverlayAutoShowConfig:e.getStoreKitOverlayAutoShowConfig(),callToActionReportingService:tH(),theatreModeReportingService:a})}),e.getCallToActionConfig().isPersistent&&!l&&d.value.context.canPlay&&lJ(Ec,{scene:e,videoOrientation:d.value.context.orientation,viewportOrientation:o.getOrientation(),disableRichCta:e.isChild()})]})]})},Ek=e=>{e.addEventListener("error",(t=>{var n,i,r;e.parent.postMessage({title:"playable-error",content:{message:null!=(r=null==t?void 0:t.message)?r:null==t||null==(n=t.error)?void 0:n.message,stack:null==t||null==(i=t.error)?void 0:i.stack}},"*")})),e.addEventListener("unhandledrejection",(t=>{e.parent.postMessage({title:"playable-error",content:{message:null==t?void 0:t.reason}},"*")}))},EU=((ef={}).ADD_EVENT_LISTENER="addEventListener",ef.CACHE_FILE="cacheFile",ef.CLOSE="close",ef.CLOSE_STOREKIT_OVERLAY_VIEW="closeStoreKitOverlayView",ef.EXIT_ALTERNATIVE="exitAlternative",ef.FETCH_FILE="fetchFile",ef.GET_CURRENT_POSITION="getCurrentPosition",ef.GET_DEFAULT_POSITION="getDefaultPosition",ef.GET_EXPAND_PROPERTIES="getExpandProperties",ef.GET_MAX_SIZE="getMaxSize",ef.GET_PLACEMENT_TYPE="getPlacementType",ef.GET_SCREEN_SIZE="getScreenSize",ef.GET_STATE="getState",ef.GET_VIEWABLE="getViewable",ef.GRANT_REWARD="grantReward",ef.IS_VIEWABLE="isViewable",ef.NEXT="next",ef.OPEN="open",ef.OPEN_STOREKIT_OVERLAY_VIEW="openStoreKitOverlayView",ef.OPEN_STOREKIT_PRODUCT_VIEW="openStoreKitProductView",ef.REMOVE_EVENT_LISTENER="removeEventListener",ef.SET_ORIENTATION_PROPERTIES="setOrientationProperties",ef.SHOW_ALTERNATIVE="showAlternative",ef.SHOW_CLOSE="showClose",ef.IS_REWARDED="isRewarded",ef.GET_NEW_TIMER="getNewTimer",ef.GET_NEW_INTERVAL="getNewInterval",ef),EB=((eN={}).CREATE_CALENDAR_EVENT="createCalendarEvent",eN.EXPAND="expand",eN.GET_CONSENT_ACCEPT_BUTTON_TEXT="getConsentAcceptButtonText",eN.GET_CONSENT_BODY_TEXT="getConsentBodyText",eN.GET_CONSENT_DENY_BUTTON_TEXT="getConsentDenyButtonText",eN.GET_CONSENT_REQUIRED="getConsentRequired",eN.GET_CONSENT_TITLE_TEXT="getConsentTitleText",eN.GET_ORIENTATION_PROPERTIES="getOrientationProperties",eN.GET_RESIZE_PROPERTIES="getResizeProperties",eN.GET_VERSION="getVersion",eN.PLAY_VIDEO="playVideo",eN.RESIZE="resize",eN.SET_EXPAND_PROPERTIES="setExpandProperties",eN.SET_RESIZE_PROPERTIES="setResizeProperties",eN.STORE_PICTURE="storePicture",eN.USE_CUSTOM_CLOSE="useCustomClose",eN),EH=()=>({[EB.CREATE_CALENDAR_EVENT]:()=>{},[EB.EXPAND]:()=>{},[EB.GET_CONSENT_ACCEPT_BUTTON_TEXT]:()=>{},[EB.GET_CONSENT_BODY_TEXT]:()=>{},[EB.GET_CONSENT_DENY_BUTTON_TEXT]:()=>{},[EB.GET_CONSENT_REQUIRED]:()=>{},[EB.GET_CONSENT_TITLE_TEXT]:()=>{},[EB.GET_ORIENTATION_PROPERTIES]:()=>{},[EB.GET_RESIZE_PROPERTIES]:()=>{},[EB.GET_VERSION]:()=>()=>"1.0",[EB.PLAY_VIDEO]:()=>{},[EB.RESIZE]:()=>{},[EB.SET_EXPAND_PROPERTIES]:()=>{},[EB.SET_RESIZE_PROPERTIES]:()=>{},[EB.STORE_PICTURE]:()=>{},[EB.USE_CUSTOM_CLOSE]:()=>()=>!1}),EW=()=>({width:window.innerWidth,height:window.innerHeight}),Ex=()=>tt(eJ({},EW()),{useCustomClose:!1,isModal:!1}),EF=()=>eJ({x:0,y:0},EW()),EK=(e,t)=>!(t.getEventCount(tA.OPEN_STOREKIT_PRODUCT_VIEW_COMMAND)>=2)&&(t.emit(tA.OPEN_STOREKIT_PRODUCT_VIEW_COMMAND),e.open(),e.isOpen()),EG=e=>!!e&&!![iM.video,iM.image,iM.endcard].includes(e.getSceneType())&&e.getLastChanceEndcardConfig().enabled,EY=()=>({[EU.CACHE_FILE]:(e,t,n=uA)=>(e,t)=>{var i;return!(!e||!t||"string"!=typeof e||!e.toLowerCase().startsWith("http")||!ArrayBuffer.isView(t)||(null==(i=n())||i.addRecord({url:e,data:t}),0))},[EU.EXIT_ALTERNATIVE]:(e,t,n=c4,i=EG)=>()=>{if(cV.getValue().isLastChanceEndcardOverlayShowing)return;let e=tB(),t={type:ib.NEXT};e&&i(e)&&(t={type:ib.LAST_CHANCE_ENDCARD}),n().send(t)},[EU.FETCH_FILE]:(e,t,n=uA)=>async e=>{var t;if(!e||"string"!=typeof e||!e.toLowerCase().startsWith("http"))return;let i=await(null==(t=n())?void 0:t.get(e));return null==i?void 0:i.data},[EU.GRANT_REWARD]:(e,t,n=td,i=oZ(),r=rX())=>{let a=n().getMraidBridgeExt();return i.emit(tA.GRANT_REWARD,tO.GRANT_REWARD),null==a||a.notifySuccessfulViewAd(),r.emit(rK.REWARD_GRANTED,!0),()=>null},[EU.NEXT]:(e,t,n=c4)=>e=>{cV.getValue().isLastChanceEndcardOverlayShowing||n().send(e)},[EU.OPEN_STOREKIT_OVERLAY_VIEW]:(e,t,n=rc,i=i3)=>async()=>{if(!n())return!1;let e=i();if(!e.isIdle())return!1;if(e.isOpen())return!0;e.open({fallback:i0.OFF});try{return await o2((()=>e.isOpen()),3e3),!0}catch(e){return!1}},[EU.OPEN_STOREKIT_PRODUCT_VIEW]:(e,t,n=iJ(),i=ri(),r=oZ())=>()=>!!n&&!!i&&(!!i.isOpen()||EK(i,r)),[EU.SHOW_ALTERNATIVE]:(e,t,n=c4,i=oZ())=>e=>{cV.getValue().isLastChanceEndcardOverlayShowing||(i.emit(tA.ALTERNATIVE_VIEW,tO.ALTERNATIVE_VIEW),n().send(e))},[EU.CLOSE_STOREKIT_OVERLAY_VIEW]:(e,t,n=rc,i=i3)=>async()=>{if(!n())return!1;let e=i();if(!e.isOpen())return!0;e.close();try{return await o2((()=>!e.isOpen()),3e3),!0}catch(e){return!1}},[EU.SHOW_CLOSE]:(e,t,n=aU())=>()=>{n.emit(aE.FORCE_COMPLETE_COUNT_DOWN)},[EU.IS_REWARDED]:(e,t,n=tV())=>()=>n.isRewarded(),[EU.GET_NEW_TIMER]:(e,t,n=iF())=>(e,t)=>n.getNewTimer(e,t),[EU.GET_NEW_INTERVAL]:(e,t,n=iH())=>(e,t)=>n.getNewInterval(e,t)}),Ej=(e,t)=>{if(!e.isFullscreen()||t.getOperatingSystem()===tg.Android||t.getOperatingSystem()===tg.Unknown)return!1;let n=new tT("6.12.0");return!t.getSdkVersion().isLessThanOrEqualTo(n)},EX=(eD=(e,t)=>{lr().emit({type:"cta",event:d2.ENDCARD_CTA,data:{cta_url:e,scene_id:t}})},n=!1,function(...e){!n&&(t||(eD.apply(this,e),n=!0,t=window.setTimeout((()=>{n=!1,t=void 0}),300)))}),Ez=()=>eJ({[EU.CLOSE]:(e,t,n=c4)=>()=>n().send(ib.CLOSE),[EU.ADD_EVENT_LISTENER]:(e,t,n=co())=>(e,i)=>{n.addEventListener(t,e,i)},[EU.IS_VIEWABLE]:(e,t,n=ce,i=ci)=>()=>!i().isHTMLPreloading(t)&&n().isViewable(),[EU.GET_VIEWABLE]:(e,t,n=ce,i=ci)=>()=>!i().isHTMLPreloading(t)&&n().isViewable(),[EU.GET_CURRENT_POSITION]:()=>EF,[EU.GET_DEFAULT_POSITION]:()=>EF,[EU.GET_EXPAND_PROPERTIES]:()=>Ex,[EU.GET_MAX_SIZE]:()=>EW,[EU.GET_PLACEMENT_TYPE]:e=>e.getPlacementType.bind(e),[EU.GET_SCREEN_SIZE]:()=>EW,[EU.GET_STATE]:e=>e.getState.bind(e),[EU.OPEN]:(e,t,n=tV(),i=aU,r=EX)=>n.isFullscreen()?e=>{r(e,t)}:e=>0===i().getEventCount(aE.CLICK)?null:r(e,t),[EU.REMOVE_EVENT_LISTENER]:(e,t,n=co())=>(e,i)=>{n.removeEventListener(t,e,i)},[EU.SET_ORIENTATION_PROPERTIES]:(e,t,n=tV(),i=tM())=>Ej(n,i)?e.setOrientationProperties.bind(e):()=>null},EY()),E$=()=>tt(eJ({},Ez(),EH()),{supports:()=>e=>Object.values(EU).includes(e)}),Eq=class{getProxyMraid(){return new Proxy(this.originalMraid,this.getProxyHandler())}constructor(e,t=td().getMraid(),n=E$(),i=oZ()){this.sceneId=e,this.originalMraid=t,this.commandHandlers=n,this.observabilityEventReportingService=i,this.getProxyHandler=()=>{let{commandHandlers:e,observabilityEventReportingService:t,sceneId:n}=this;return{get:(i,r)=>e[r]?e[r](i,n):i[r]?i[r]:(t.emit({name:tA.UNKNOWN_MRAID_COMMAND,value:r}),()=>!1)}}}},EZ=(e,t=aU())=>{e.addEventListener("load",(()=>{t.emit(aE.LOAD_COMPLETE)}))},EQ=(e,t,n,i=aG,r=cP)=>{e&&e.document.addEventListener(uh(),(e=>{(null==e?void 0:e.isTrusted)&&r(ik.CLICK_THROUGH,n,t),i(e)}),!0)},EJ=((eR=EJ||{})[eR.MUTE=0]="MUTE",eR[eR.UNMUTE=1]="UNMUTE",eR),E0=class{interceptAudioContext(){let e=this;function t(){let t=new e.originAudioContext,n=t.createGain();n.gain.setValueAtTime(+!e.shouldMute,t.currentTime),n.connect(t.destination);try{Object.defineProperty(t,"destination",{get:()=>n,configurable:!0})}catch(e){}return e.instances.set(t,n),t}t.prototype=this.originAudioContext.prototype,Object.defineProperty(this.targetWindow,"AudioContext",{value:t,configurable:!0})}muteAll(){this.shouldMute=!0,this.instances.forEach(((e,t)=>{e.gain.setValueAtTime(0,t.currentTime)}))}unmuteAll(){this.shouldMute=!1,this.instances.forEach(((e,t)=>{e.gain.setValueAtTime(1,t.currentTime)}))}constructor(e,t){this.instances=new Map,this.targetWindow=e,this.originAudioContext=e.AudioContext||e.webkitAudioContext,this.shouldMute=t,this.interceptAudioContext()}},E1=((ey={}).AUDIO="audio",ey.VIDEO="video",ey.IFRAME="iframe",ey.DEFAULT="default",ey),E2=e=>{let t=e.nodeName.toLowerCase();switch(t){case"audio":case"video":case"iframe":return t;default:return"default"}},E3=class{isNodeAllowed(e){return[E1.AUDIO,E1.VIDEO].includes(E2(e))}preventSoundResume(e){Object.defineProperty(e,"muted",{set:()=>{},get:()=>!0,configurable:!0})}mute(e,t=!0){(!t||this.isNodeAllowed(e))&&(e.muted=!0,this.preventSoundResume(e),this.storeElement(e))}unmute(e,t=!0){if(t&&!this.isNodeAllowed(e))return;let n=Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"muted");n&&Object.defineProperty(e,"muted",n),e.muted=!1,this.storeElement(e)}muteAll(){this.instances.forEach((e=>{this.mute(e,!1)})),Array.from(this.targetWindow.document.querySelectorAll("audio, video")).forEach((e=>{this.mute(e,!1)}))}unmuteAll(){this.instances.forEach((e=>{this.unmute(e,!1)}))}storeElement(e){this.instances.has(e)||this.instances.add(e)}constructor(e){this.targetWindow=e,this.instances=new Set}};class E5{interceptStaticIframes(){Array.from(this.targetWindow.document.querySelectorAll("iframe")).forEach((e=>{this.handleIframeNode(e)}))}doMuteAllIfMute(){this.mute&&this.muteAllMedias()}unmuteAllMedias(){this.mute=!1,this.silencers.forEach((e=>e.unmuteAll()))}muteAllMedias(){this.mute=!0,this.silencers.forEach((e=>e.muteAll()))}handleIframeNode(e){var t;E5.isWindowAccessible(e.contentWindow)&&E5.interceptAllMediaElements(e.contentWindow,this.mute);let n=!E5.hasIframeCrossOriginUrl(e);this.iframeEventReportingService.emit({type:"iframe",event:sd.NESTED_IFRAME_TYPE,data:{nested_iframe_type:n?sl.NESTED_IFRAME_WITHOUT_CORS:sl.NESTED_IFRAME_WITH_CORS,scene_id:null==(t=this.injectedGetCurrentScene())?void 0:t.getId()}})}handleNewNode(e){E2(e)===E1.IFRAME&&this.handleIframeNode(e),this.mute?this.silencers.forEach((t=>{var n;return null==(n=t.mute)?void 0:n.call(t,e)})):this.silencers.forEach((t=>{var n;return null==(n=t.unmute)?void 0:n.call(t,e)}))}interceptCreateElement(){let e=this.targetWindow.document.createElement;Object.defineProperty(this.targetWindow.document,"createElement",{value:(t,...n)=>{let i=e.call(this.targetWindow.document,t,...n);return this.handleNewNode(i),i},configurable:!0})}observeDomMutation(){new this.targetWindow.MutationObserver((e=>{e.forEach((e=>{let{addedNodes:t}=e;for(let e=0;e<t.length;e+=1)this.handleNewNode(t[e])}))})).observe(this.targetWindow.document,{subtree:!0,childList:!0})}constructor(e,t,n=!1,i=sc(),r=tB){this.targetWindow=e,this.silencers=t,this.mute=n,this.iframeEventReportingService=i,this.injectedGetCurrentScene=r,this.interceptCreateElement(),"complete"===this.targetWindow.document.readyState?(this.doMuteAllIfMute(),this.observeDomMutation()):this.targetWindow.document.addEventListener("DOMContentLoaded",(()=>{this.doMuteAllIfMute(),this.observeDomMutation()})),this.interceptStaticIframes(),this.doMuteAllIfMute()}}E5.instances=new Map,E5.hasIframeCrossOriginUrl=e=>{var t;return null==(t=e.src)?void 0:t.toLowerCase().startsWith("http")},E5.isWindowAccessible=e=>{try{return!!(null==e?void 0:e.document)}catch(e){return!1}},E5.interceptAllMediaElements=(e,t,n=sc(),i=tB)=>{let r=new E5(e,[new E3(e),new E0(e,t)],t,n,i);E5.instances.set(e,r)},E5.muteAllMedias=()=>{E5.instances.forEach((e=>{E5.isWindowAccessible(e.targetWindow)&&e.muteAllMedias()}))},E5.unmuteAllMedias=()=>{E5.instances.forEach((e=>{E5.isWindowAccessible(e.targetWindow)&&e.unmuteAllMedias()}))};var E4=(e,t)=>{Object.defineProperty(e,t,{configurable:!1,enumerable:!0,value:e[t],writable:!1})},E6=(e,t)=>{e.document.addEventListener("click",(e=>{let n=e.target.closest("a");if(n){if(!e.isTrusted)return void e.preventDefault();n.href&&(e.preventDefault(),t(n.href))}}),{capture:!0})},E8=e=>null!==e.contentDocument;class E7{intercept(){this.interceptors.forEach((e=>e(this.targetWindow))),this.checkExistingIframes(),this.observeNestedIframes()}static init(e,t){E8(e)&&new E7(e.contentWindow,t).intercept()}checkExistingIframes(){Array.from(this.targetWindow.document.querySelectorAll("iframe")).forEach((e=>{this.handleNewIframe(e)}))}observeNestedIframes(){let e=new this.targetWindow.MutationObserver(this.handleMutation);this.startObservation(e)}startObservation(e){let{document:t}=this.targetWindow,n=()=>{this.checkExistingIframes(),this.observeDocument(e)};"loading"===t.readyState?t.addEventListener("DOMContentLoaded",n):n()}observeDocument(e){e.observe(this.targetWindow.document,{subtree:!0,childList:!0})}constructor(e,t){this.targetWindow=e,this.interceptors=t,this.handleNewIframe=e=>{E2(e)===E1.IFRAME&&E7.init(e,this.interceptors)},this.handleMutation=e=>{e.reduce(((e,t)=>e.concat(Array.from(t.addedNodes))),[]).forEach(this.handleNewIframe)}}}var E9=class extends dx{getIframeContentData(){return this.scene.getIframeContentData()}getCloseButtonConfig(){var e;let t=this.scene.getCloseButtonConfig();return(null==(e=this.amplifyEndcardEngagementService)?void 0:e.isEndcardAmplified())&&(t.delay=this.amplifyEndcardEngagementService.getAmplifiedEndcardCloseButtonDelay(t.delay)),t}initMraidInIframeForFullscreen(e){if(!e)return;let t=this.proxyMraidService.getProxyMraid();e.mraid=t,E4(e,"mraid"),e.open=e=>t.open(e)}initMraidInIframeForNonFullscreen(e){let t=e.contentWindow;t.mraid=this.proxyMraidService.getProxyMraid(),E4(t,"mraid"),t.open=()=>null;let n=e=>{if(e.isTrusted){var i,r,a;t.document.removeEventListener("click",n,!0),t.open=this.openUrl;let s=e.target.closest("a");(null==s||null==(i=s.href)?void 0:i.startsWith("http"))?e.preventDefault():null==(r=(a=e.target).click)||r.call(a)}},i=()=>{var e;"loading"!==(null==(e=t.document)?void 0:e.readyState)?t.document.addEventListener("click",n,{capture:!0}):requestAnimationFrame(i)};requestAnimationFrame(i)}injectMethodToIframe(e){this.placementTypeService.isFullscreen()?this.initMraidInIframeForFullscreen(e.contentWindow):this.initMraidInIframeForNonFullscreen(e)}getLastChanceEndcardConfig(e,t){let n=this.scene.getLastChanceEndcardConfig();return n.enabled&&e?tt(eJ({},n),{enabled:t}):n}loadNestedIframe(e,t){if(!(null==t?void 0:t.content))return;let n=()=>{this.loadNestedIframe(e,t)},i=e.querySelector("iframe");if(!i)return void e.addEventListener("DOMContentLoaded",n);e.removeEventListener("DOMContentLoaded",n),i.width="100%",i.height="100%";let{content:r}=t;this.loadIframe(i,r)}async loadIframe(e,t){try{let n=e.contentWindow,i=null==n?void 0:n.document;this.injectMethodToIframe(e),i.open(),this.injectedAddErrorListenerToIframe(n),this.injectedAddLoadListenerToIframe(n),this.addSourceInfoToFunctions(n),i.write(t),i.close(),E7.init(e,[this.addLoadEventForAndroid,this.blockBeforeunloadEvent,this.addSourceInfoToFunctions,this.addEndcardClickListener,this.blockFullScreenNativeVideoPlayer]),E6(n,this.openUrl),this.injectedInterceptAllMediaElements(n,this.muteService.isMuted())}catch(e){this.errorLoggingService.emit({type:"error-logging",event:r2.EXCEPTION,data:{error:{message:"Failed to write endcard to iframe"}}})}}async updateIframeContent(e,t){if(null==e?void 0:e.current){let{content:n,nestedFrameContent:i}=t;await this.loadIframe(e.current,n);let r=e.current.contentWindow;this.loadNestedIframe(r.document,i)}}constructor(e,t=r5(),n=tM(),i=tV(),r=new Eq(e.getId()),a=cE(),s=aU(),o=Ek,l=EZ,c=E5.interceptAllMediaElements,d=oA()){super(i,s,e),this.scene=e,this.errorLoggingService=t,this.environmentService=n,this.placementTypeService=i,this.proxyMraidService=r,this.muteService=a,this.sceneEventReportingService=s,this.injectedAddErrorListenerToIframe=o,this.injectedAddLoadListenerToIframe=l,this.injectedInterceptAllMediaElements=c,this.amplifyEndcardEngagementService=d,this.blockFullScreenNativeVideoPlayer=e=>{let t=Array.from(e.document.querySelectorAll("video"));0!==t.length?t.forEach((e=>e.setAttribute("playsinline",""))):"complete"!==e.document.readyState&&e.document.addEventListener("DOMContentLoaded",(()=>{this.blockFullScreenNativeVideoPlayer(e)}))},this.addEndcardClickListener=e=>{let t=this.scene;EQ(e,t.getTrackingEventMapConfig(),t.getId())},this.openUrl=e=>{EX(e,this.scene.getId())},this.addLoadEventForAndroid=e=>{if(this.environmentService.getOperatingSystem()===tg.Android){let t,n=e.addEventListener;e.addEventListener=(t,i,r)=>{n.call(e,"load"===t?"DOMContentLoaded":t,i,r)},Object.defineProperty(e,"onload",{set:n=>{t=n,e.addEventListener("DOMContentLoaded",t)},get:()=>t})}},this.blockBeforeunloadEvent=e=>{let t=e.addEventListener;e.addEventListener=(n,i,r)=>{"beforeunload"!==n&&t.call(e,n,i,r)}},this.addSourceInfoToFunctions=e=>{e.Object.defineProperty(e.Function.prototype,aM,{value:"iframe",writable:!0,enumerable:!1,configurable:!0})}}},_e=(e=cE())=>{nK((()=>{e.isMuted()?E5.muteAllMedias():E5.unmuteAllMedias()}),[e.getMutedSignal().value])};const _t=window.addEventListener;var _n=e=>{var t;let n=(t=(t,n,i)=>{e&&"iframe"===n[aM]?e.addEventListener(t,n,i):_t.call(window,t,n,i)},nb=8,nY((function(){return t}),[e]));nK((()=>(window.addEventListener=n,()=>{window.addEventListener=_t})),[n])},_i=({sendAdEvent:e,htmlService:t,scene:n})=>{var i;let r=nG(null),[a,s]=(nb=1,nF(nZ,!1));return nK((()=>{a&&requestAnimationFrame((async()=>{t.getIframeContentData(n).then((e=>{t.updateIframeContent(r,e)}))}))}),[a]),_e(),_n(null==(i=r.current)?void 0:i.contentWindow),lJ("iframe",{id:"endcardIframe",title:"endcard",onLoad:()=>{e({type:ib.PRIVACY_LOGO_SHOW}),s(!0)},ref:r,className:"oAV7cW_endcardIframe",allow:"autoplay",scrolling:"no",frameBorder:"0"})},_r=()=>{let e=eX.getInstance(),t=cm.getServiceIdentifier();if(e.has(t))return e.get(t)};const _a=(e,t)=>{let n=_r();if(n)switch(t.event){case d2.ENDCARD_CTA:n.onCtaClick();break;case cp.REMOVE_HANDLER:tW().removeEventHandler(t.type,_a)}};var _s=((eL=_s||{}).PRELOAD="preload",eL);const _o=e=>Object.values(_s).includes(e);class _l extends rG{emit(e,t=!1,n){let i=this.createEventToEmit(e);i&&(t&&(i.fireOnlyOnce=!0),n&&(i.data=n),this.wrappedService.emit(i))}createEventToEmit(e){return"string"==typeof e&&_o(e)?{type:"debug",event:e}:"object"==typeof e?e:void 0}}var _c=e=>new _l(null!=e?e:tH());const _d=(e,t)=>({id:t,context:{id:t,preloadSuccess:!1},initial:e?iy.INITIAL:iy.SHOWING,states:{[iy.INITIAL]:{on:{[iR.SHOW]:{target:iy.SHOWING},[iR.PRELOAD]:{target:iy.PRELOADING,actions:[iL.INITIALIZE_PRELOAD]}}},[iy.PRELOADING]:{on:{[iR.SHOW]:{target:iy.SHOWING,actions:[iL.MARK_PRELOAD_SUCCESS,iL.EMIT_SHOW,iL.TRIGGER_VIEWABLE_CHANGE]},[iR.CANCEL_PRELOAD]:{target:iy.INITIAL,actions:[iL.CANCEL_PRELOAD,iL.FLUSH_MRAID_EVENTS]}}},[iy.SHOWING]:{}}}),_u=(e=co(),t=ce(),n=aU())=>({actions:{[iL.INITIALIZE_PRELOAD]:()=>{n.emit(aE.PRELOAD_START)},[iL.FLUSH_MRAID_EVENTS]:()=>{let t=cb(c4().state);e.flushAllEventCallbacks(t.getId())},[iL.EMIT_SHOW]:e=>{n.emit(aE.PRELOAD_COMPLETE),_c().emit(_s.PRELOAD,!1,{message:`preloading finished succesfully for ${e.id}`})},[iL.CANCEL_PRELOAD]:e=>{n.emit(aE.PRELOAD_CANCELLED),_c().emit(_s.PRELOAD,!1,{message:`preloading got cancelled for ${e.id}`})},[iL.TRIGGER_VIEWABLE_CHANGE]:()=>{let n=cb(c4().state);e.triggerEvent(n.getId(),cr.VIEWABLE_CHANGE,t.isViewable())},[iL.MARK_PRELOAD_SUCCESS]:e9({preloadSuccess:!0})}});var _E=(e,t)=>c6(_d(e,t),_u()),__=((eP=__||{})[eP.Eligible=1]="Eligible",eP[eP.Not_Eligible=2]="Not_Eligible",eP[eP.Started=3]="Started",eP[eP.Canceled=4]="Canceled",eP),_v=(e,t=ci())=>{let n=iS(e?1:2);return[e=>{1===n.value&&(n.value=3,t.startPreloading(e))},e=>{3===n.value&&(n.value=4,t.cancelPreloading(e))}]},_h=(e=aU())=>{let t=iS(e.getEventCount({type:"scene-event",event:aE.CLICK,data:{scene_id:"",scene_type:iM.endcard}})>0);return dh("scene-event",((e,n)=>{n.event===aE.CLICK&&aF(n.data.click_target,ax)&&(t.value=!0)}),e),[t.value]},_S=()=>{let e=e=>{Object.entries({"z-index":"auto",isolation:"isolate"}).forEach((([t,n])=>{e.style.setProperty(t,n,"important")}))},t=t=>{let n=new MutationObserver((()=>{e(t)}));return e(t),n.observe(t,{attributes:!0,attributeFilter:["style"]}),n};nK((()=>{let e=new Map,n=Element.prototype.appendChild;return Element.prototype.appendChild=function(i){if((e=>e.nodeType===Node.ELEMENT_NODE&&"style"in e)(i)){let n=t(i);e.set(i,n)}return n.call(this,i)},()=>{e.forEach(((e,t)=>{e.disconnect(),t.remove()})),Element.prototype.appendChild=n}}),[])};const _T=n7(!1),_p=(e,t)=>{if(t)return _T.value?e.getLastChanceEndcardConfig().cta:e.getCallToActionConfig()};var _g=({scene:e,sendAdEvent:t,shouldRenderIFrame:n=!0,isCloseButtonVisible:i=!0,eligibleToPreload:r=!1,startPreloading:a=!1,customClassName:s,sceneEventReportingService:o})=>{let l=new E9(e),[c]=_E(r,e.getId()),d=c.value.matches(iy.SHOWING);uu(e.getId(),e.getAppStoreOnDelayConfig(),!0,d),uE(e.getStoreKitOverlayAutoShowConfig(),d),uv({callToActionConfig:_p(e,d),trackingEventMapConfig:e.isAlternative()?void 0:e.getTrackingEventMapConfig(),sceneId:e.getId()}),u_({fullScreenClickConfig:d&&_T.value?e.getLastChanceEndcardConfig().fsc:void 0,trackingEventMapConfig:e.getTrackingEventMapConfig(),sceneId:e.getId()}),dh("cta",((e,t)=>{d&&(_T.value||_a(e,t))}));let[u,E]=_v(r);dh("video",((t,n)=>{if(r)switch(n.event){case aQ.SUSPEND:var i,a;(null==(i=n.data)?void 0:i.ready_state)&&(null==(a=n.data)?void 0:a.ready_state)<HTMLMediaElement.HAVE_FUTURE_DATA&&E(e.getId());break;case aQ.WAITING:E(e.getId());break;case aQ.CAN_PLAY_THROUGH:u(e.getId())}})),d6(t,d),cL(d),d9(e,d),uS(e.getId(),e.isChild(),d),nK((()=>{d&&t({type:ib.CREATIVE_VIEW})}),[d]),nK((()=>{a&&u(e.getId())}),[e,a]);let[_]=_h(o),v=l.getLastChanceEndcardConfig(oN.isEndcardOnly(),_);if(_S(),c.value.matches(iy.INITIAL))return null;let h=e.getId();return lJ(nh,{children:[d&&lJ(d4,{config:v,sendAdEvent:t,onVisibilityChange:e=>{_T.value=e},sceneId:h}),lJ("div",{className:null!=s?s:"oAV7cW_endcard",id:h,style:{visibility:c.value.matches(iy.PRELOADING)?"hidden":""},children:[i&&!_T.value&&lJ(dz,{sendAdEvent:t,config:l.getCloseButtonConfig(),showLastChanceEndcard:v.enabled}),n&&lJ(_i,{sendAdEvent:t,htmlService:l,scene:e})]})]})},_C=({isCloseButtonVisible:e,scene:t,sendEvent:n,shouldRenderIFrame:i,preloadService:r=ci(),customClassName:a})=>{let s=r.getHTMLScenesToPreload(t);return(null==s?void 0:s.length)?lJ("div",{children:s.map((e=>lJ(_g,{scene:e.scene,sendAdEvent:n,shouldRenderIFrame:e.shouldRenderIFrame,isCloseButtonVisible:e.isCloseButtonVisible,eligibleToPreload:!0,startPreloading:e.startPreloading,customClassName:a},e.scene.getId())))}):oX(t)&&lJ(_g,{scene:t,sendAdEvent:n,shouldRenderIFrame:i,isCloseButtonVisible:e,eligibleToPreload:!1,startPreloading:!1,customClassName:a},t.getId())},_I=({scene:e,sendEvent:t,isCloseButtonVisible:n,shouldRenderIFrame:i,isFreeForm:r=!1,showVideoBlur:a=!1,useBackgroundImage:s=!1,imageCustomClassName:o,htmlCustomClassName:l,preloadService:c,theatreModeReportingService:d})=>lJ(nh,{children:[e instanceof oN&&e.getSceneType()===iM.image&&lJ(up,{scene:e,sendAdEvent:t,isCloseButtonVisible:n,useBackgroundImage:s,customClassName:o},e.getId()),oj(e)&&lJ(EV,{scene:e,sendAdEvent:t,isCloseButtonVisible:n,isFreeForm:r,showVideoBlur:a,theatreModeReportingService:d},e.getId()),lJ(_C,{isCloseButtonVisible:n,scene:e,sendEvent:t,shouldRenderIFrame:i,customClassName:l,preloadService:c})]});eG="_37VDnG_composite";var _A=({sceneId:e,injectedGetCurrentScene:t,injectedGetAdMachineInterpreter:n})=>{let i=ur(e,t),r=ua(n);return i?lJ("div",{className:"_37VDnG_component",children:lJ(_I,{scene:i,sendEvent:r,isCloseButtonVisible:!1,shouldRenderIFrame:!0,showVideoBlur:!0,imageCustomClassName:"_37VDnG_compositeImage",useBackgroundImage:!0,htmlCustomClassName:"_37VDnG_compositeHtml"})}):null};const _O=n7(!1);var _m=({scene:e,sendAdEvent:t,isCloseButtonVisible:n=!0})=>{d6(t),cL(),d9(e),uv({callToActionConfig:e.getLastChanceEndcardConfig().cta,sceneId:e.getId()}),u_({fullScreenClickConfig:e.getLastChanceEndcardConfig().fsc,sceneId:e.getId()}),uS(e.getId(),e.isChild());let i=nY((()=>e.getDecodedHtml()),[e]);return lJ("div",{className:eG,children:[lJ(d4,{config:e.getLastChanceEndcardConfig(),sendAdEvent:t,onVisibilityChange:e=>{_O.value=e},sceneId:e.getId()}),n&&!_O.value&&lJ(dz,{config:e.getCloseButtonConfig(),sendAdEvent:t,showLastChanceEndcard:e.getLastChanceEndcardConfig().enabled}),e&&e.getSceneType()===iM.composite&&lJ("div",{className:eG,children:lJ(ut,{htmlString:i,VmComponent:_A})})]})},_f=(e=c_())=>{let t=e.getVideoInterpreter(),n=iS(null==t?void 0:t.state);return nK((()=>{if(!t)return()=>{};let{state:e,status:i}=t;i!==e0.Running&&t.start({context:e.context,value:e.value});let r=t.subscribe((e=>{n.value=e}));return()=>{r.unsubscribe()}}),[t]),[n]},_N=()=>tH(),_D=({isPrivacyDrawerOpen:e,service:t=c_(),pictureInPictureReportingService:n=_N()})=>{var i;let r=nG(null),[a]=_f(t),s=nY((()=>ct()),[]),o=iS(!1),l=iS(!1),c=iS(!1),d=e=>{e===dC.LEFT&&(c.value=!0),e===dC.UP&&(l.value=!0)},u=()=>{n.emit({type:"picture-in-picture",event:i7.CLOSE,fireOnlyOnce:!0})};nK((()=>{let e=t.getVideoElement(),n=r.current;e&&n&&(n.appendChild(e),o.value=!0,e.onended=()=>{u()})}),[]);let E=(n,i)=>{t.videoAdViewableChange(n,i,e)};return nK((()=>(s.addEventHandler("viewability",E),()=>{s.removeEventHandler("viewability",E)})),[s]),nK((()=>{var e;let n=t.getVideoElement();if(n)switch(null==(e=a.value)?void 0:e.value){case lt.PLAYING:n.play();break;case lt.PAUSED:n.pause()}}),[null==(i=a.value)?void 0:i.value]),nK((()=>{r.current&&(t.isPortrait()?r.current.style.height="auto":r.current.style.width="auto")}),[t.isPortrait()]),u_(t.getFullScreenCallToActionEventHandlerProps()),lJ(dN,{onSwipeUp:()=>d(dC.UP),onSwipeLeft:()=>d(dC.LEFT),children:lJ("button",{type:"button",id:"picture-in-picture","aria-label":"Picture in Picture",ref:r,onClick:()=>t.clickHandler(),onAnimationEnd:()=>{o.value=!1},onTransitionEnd:u,className:dT("i0Mp0G_pictureInPictureContainer",""+(o.value?"i0Mp0G_animatingVideo":"i0Mp0G_animationEnded"),""+(c.value?"i0Mp0G_slideLeft":""),""+(l.value?"i0Mp0G_slideUp":""))})})},_R=(e,t,n,i=oZ())=>{i.emit({name:tA.FRUSTRATION_CLICKS,metric:tO.FRUSTRATION_CLICKS,scene_id:null==n?void 0:n.getId(),scene_type:null==n?void 0:n.getSceneType(),coordinates:[e,t].join(",")})},_y=(e,t=dM())=>{t.emit({type:"custom-mraid",event:dw.CLOSE,data:{is_video_scene:oj(e)}})},_L=()=>document.querySelector("#dynamic"),_P=(e,t,n,i=_L())=>{nK((()=>{let r=()=>{t(n)};return null==i||i.addEventListener(e,r),()=>{null==i||i.removeEventListener(e,r)}}),[i])},_b=({theatreModeReportingService:e=a5()})=>{let[t,n]=dr(),i=cb(t.value),r=i.getSceneType();dU(_R,i),_P(dw.CLOSE,_y,i);let{isCloseButtonVisible:a,isPrivacyButtonVisible:s,isPrivacyDrawerOpen:o,shouldRenderIFrame:l,shouldRenderPictureInPicture:c,isFreeForm:d,allowDebug:u}=t.value.context,E=s&&r!==iM.closed;return lJ("div",{id:"gRz7DW_ad",children:lJ(ds,{children:[lJ(dv,{}),c&&lJ(_D,{isPrivacyDrawerOpen:o}),E&&lJ(dk,{sendAdEvent:n,allowDebug:u}),r===iM.gdpr&&lJ(dc,{sendAdEvent:n}),lJ(_I,{scene:i,sendEvent:n,isCloseButtonVisible:a,shouldRenderIFrame:l,isFreeForm:d,theatreModeReportingService:e}),r===iM.composite&&lJ(_m,{scene:i,sendAdEvent:n,isCloseButtonVisible:a},i.getId()),r===iM.closed&&lJ(da,{})]})})},_w=(e=c4(),t=de(),n=di,i=cb)=>{let r=i(e.state);tU.setValue({scene:r}),t.start(r),n(r),e.start()},_M=()=>eX.getInstance().get(lc.getServiceIdentifier()),_V=async(e,t,n)=>{var i;let r={adCount:0,sameCreative:0,sameVideo:0},a=n.getPlacementType(),s=t.get(t_.AD_SOURCE),o=t.get(t_.CREATIVE_ID),l=null!=(i=t.get(t_.ORIGINAL_VIDEO_URL))?i:t.get(t_.MAIN_STREAM);return(await e.getAllRecords()).forEach((({placementType:e,creativeId:t,adSource:n,videoUrl:i})=>{e===a&&(r.adCount+=1),t===o&&n===s&&(r.sameCreative+=1),i===l&&(r.sameVideo+=1)})),{ad_count:r.adCount,same_creative:r.sameCreative,same_video:r.sameVideo}};const _k={[iM.video]:tO.AD_START_WITH_VIDEO,[iM.endcard]:tO.AD_START_WITH_ENDCARD,adStart:tO.AD_START,lastChanceEndcard:tO.AD_START_WITH_LAST_CHANCE_ENDCARD},_U=(e,t=new Set,n=[_k.adStart],i=null)=>{if(0===e.length)return i&&!n.includes(_k.lastChanceEndcard)?[...n,_k.lastChanceEndcard]:n;let[r,...a]=e,s=r.getSceneType(),o=i;return EG(r)&&!i&&(o=r),!t.has(s)&&s in _k?(t.add(s),_U(a,t,[...n,_k[s]],o)):_U(a,t,n,o)},_B=async(e=_M(),t=tE(),n=tV(),i=oZ(),r=_V,a=l3)=>{let s={name:tA.AD_START,metric:tO.AD_START,elapsed:Date.now()-eX.getInstance().startTimestamp};await e.addRecord();let o=eJ({},s,await r(e,t,n)),l=_U(a()).map((e=>tt(eJ({},o),{metric:e})));i.emit(l)};var _H=()=>{let e=eX.getInstance(),t=new cF;e.bind(cF.getServiceIdentifier(),t)},_W=()=>{let e=eX.getInstance(),t=new rz;e.bind(rz.getServiceIdentifier(),t)},_x=(e=tM(),t=td())=>{let n=eX.getInstance(),i=cs.getServiceIdentifier(),r=Object.values(cr);e.getMraidVersion().isLessThan(l0.V5_2_1)&&(r=r.filter((e=>e!==cr.SILENT_CHANGE)));let a=new cs(r,t);n.bind(i,a),a.init()};const _F=(e,t,n,i)=>{let r=t.getOperatingSystem()===tg.iOS,a=l6(i),s=t.getSdkVersion(),o=n.isInLine();return!(!r||a||!(s.isEqualTo(new tT("7.4.0"))&&o||s.isGreaterThanOrEqualTo(new tT("7.4.1"))))||e};var _K=(e=l5(),t=l2(),n=cE(),i=tM(),r=tV(),a=tW())=>{let s=!!i.getMraidVersion().isGreaterThanOrEqualTo(l0.V5_2_1)&&_F(t,i,r,a);e||s?n.mute():n.unmute()},_G=(e,t,n,i,r,a)=>{var s,o,l,c,d,u,E,_,v,h,S,T,p;let g=eX.getInstance(),C=eJ({ad_duration:a(g.startTimestamp,i),ad_source:null!=(o=e.get(t_.AD_SOURCE))?o:"",advertiser_domain:null!=(l=e.get(t_.ADVERTISER_DOMAIN))?l:"",creative_id:null!=(c=e.get(t_.CREATIVE_ID))?c:"",creative_type:null!=(d=e.get(t_.CREATIVE_TYPE))?d:"",country_code:t.getDeviceCountryCode(),dsp:n.getAdSource()===tv.ACCELERATE?"accelerate":"others",elapsed:Date.now()-g.startTimestamp,event_id:null!=(u=e.get(t_.SESSION_ID))?u:"",is_header_bidding:th(e.get(t_.HEADER_BIDDING)),is_incentivized:n.isRewarded(),mediation_name:null!=(E=e.get(t_.MEDIATION_NAME))?E:"",nautilus_version:null!=(_=e.get(t_.NAUTILUS_VERSION))?_:"0.0.0",observed_experiments:null!=(v=e.get(t_.OBSERVED_EXPERIMENTS))?v:"",os_version:t.getOsVersion().toString(),placement_reference_id:null!=(h=e.get(t_.PLACEMENT_ID))?h:"",placement_type:n.getPlacementType(),platform:t.getOperatingSystem(),pub_app_store_id:null!=(S=e.get(t_.PUB_ID))?S:"",sdk_version:t.getSdkVersion().toString(),template_version:null!=(T=window.appVersion)?T:"0.0.0"},null==(s=r())?void 0:s.getObservabilityData()),A=null!=(p=e.get(t_.ACC_TESTS))?p:"";return n.getAdSource()===tv.ACCELERATE&&A&&(C.acc_tests=tp(A)),C},_Y=class{getUrl(){return`${this.endpoint}/vm/logs`}pushEvent(e,t,n){this.sendLog(eJ(tt(eJ({},_G(this.tokenService,this.environmentService,this.placementTypeService,this.reportingService,this.getCurrentScene,this.getAdDuration)),{kind:tI.EVENT,timestamp:null!=n?n:new Date,name:e}),t))}pushManyEvents(e){this.sendLog(e.map((e=>eJ(tt(eJ({},_G(this.tokenService,this.environmentService,this.placementTypeService,this.reportingService,this.getCurrentScene,this.getAdDuration)),{kind:tI.EVENT,timestamp:new Date}),e))))}pushError(e,t,n){let i="",r="";var a,s;"string"==typeof e?i=e:(r=null!=(a=null==e?void 0:e.stack)?a:"",i=null!=(s=null==e?void 0:e.message)?s:"");this.sendLog(eJ(tt(eJ({},_G(this.tokenService,this.environmentService,this.placementTypeService,this.reportingService,this.getCurrentScene,this.getAdDuration)),{kind:tI.ERROR,timestamp:null!=n?n:new Date,message:i,stack:r}),t))}isObserved(){return th(this.tokenService.get(t_.OBSERVABILITY))}sendLog(e){this.isObserved()&&this.networkRequestService.post(this.getUrl(),{requestData:e})}constructor(e,t,n,i,r,a,s,o){this.endpoint=e,this.tokenService=t,this.environmentService=n,this.networkRequestService=i,this.placementTypeService=r,this.reportingService=a,this.getCurrentScene=s,this.getAdDuration=o}},_j=(e,t,n,i,r,a,s)=>new _Y("https://logs.ads.vungle.com",e,t,n,i,r,a,s),_X=(e=cw())=>{e.init(_j)},_z="product-view",_$=((eb=_$||{}).ADD_VIEWABILITY_HANDLER="addViewabilityHandler",eb.CLOSE_STORE_VIEW="closeStoreView",eb.OPEN_STORE_VIEW="openStoreView",eb.REMOVE_VIEWABILITY_HANDLER="removeViewabilityHandler",eb.SHOW_FALLBACK="showFallback",eb.UPDATE_OPEN_COUNT="updateOpenCount",eb),_q=(e,t)=>e.interpreterMap.get(t),_Z=(e=iN(),t=_z)=>_q(e,t);const _Q=e=>"store-kit-orchestration"===e.type&&null!=e.event;var _J=class extends rG{emit(e){_Q(e)?this.wrappedService.emit(e):this.wrappedService.emit({type:"store-kit-orchestration",event:e})}},_0=e=>new _J(null!=e?e:tH()),_1=((ew=_1||{}).SKPV_FALLBACK_TO_SKO="SKPV_FALLBACK_TO_SKO",ew.SKO_FALLBACK_TO_SKPV="SKO_FALLBACK_TO_SKPV",ew.STORE_KIT_FALLBACK_TO_MRAID="STORE_KIT_FALLBACK_TO_MRAID",ew),_2=()=>tH();const _3=()=>({id:_z,initial:rt.HIDDEN,context:{delay:0,openCount:0},states:{[rt.SHOWING]:{on:{[re.CLOSE]:{target:rt.HIDDEN,actions:[_$.CLOSE_STORE_VIEW,_$.REMOVE_VIEWABILITY_HANDLER]},[re.SET_FALLBACK]:{target:rt.FALLBACK,actions:[_$.REMOVE_VIEWABILITY_HANDLER]}}},[rt.HIDDEN]:{on:{[re.OPEN]:{target:rt.SHOWING,actions:[_$.ADD_VIEWABILITY_HANDLER,_$.UPDATE_OPEN_COUNT,_$.OPEN_STORE_VIEW]}}},[rt.FALLBACK]:{on:{[re.OPEN]:{actions:[_$.SHOW_FALLBACK]}}},[rt.INITIAL]:{},[rt.PREPARING]:{},[rt.DONE]:{}}}),_5=(e,t)=>{var n;t.event===tx.MAXIMIZED&&(null==(n=_Z())||n.send({type:re.CLOSE}))},_4=(e=td(),t=ct(),n=_2(),i=_0())=>({actions:{[_$.OPEN_STORE_VIEW]:()=>{var t,i;n.emit({type:"store-kit-product-view",event:nt.APP_STORE_OPEN}),null==(i=e.getMraidExt())||null==(t=i.openAppStore)||t.call(i,0)},[_$.CLOSE_STORE_VIEW]:()=>{n.emit({type:"store-kit-product-view",event:nt.APP_STORE_CLOSE})},[_$.ADD_VIEWABILITY_HANDLER]:()=>{t.addEventHandler("viewability",_5)},[_$.REMOVE_VIEWABILITY_HANDLER]:()=>{t.removeEventHandler("viewability",_5)},[_$.UPDATE_OPEN_COUNT]:e9({openCount:e=>e.openCount?e.openCount+1:1}),[_$.SHOW_FALLBACK]:()=>{i.emit(_1.SKPV_FALLBACK_TO_SKO)}}});var _6=((eM=_6||{}).PREPARE_STORE_VIEW="prepareStoreView",eM.SET_APP_STORE_ID="setAppStoreId",eM);const _8=eJ({},_$,_6),_7=()=>({id:_z,initial:rt.INITIAL,context:{delay:0,openCount:0,appStoreId:void 0},states:{[rt.INITIAL]:{on:{[re.READY]:{target:rt.PREPARING,actions:[_8.SET_APP_STORE_ID,_8.PREPARE_STORE_VIEW]}}},[rt.PREPARING]:{on:{[re.PREPARE_SUCCESS]:{target:rt.HIDDEN}}},[rt.SHOWING]:{on:{[re.CLOSE]:{target:rt.INITIAL,actions:[_$.CLOSE_STORE_VIEW,_$.REMOVE_VIEWABILITY_HANDLER]}}},[rt.HIDDEN]:{on:{[re.OPEN]:{target:rt.SHOWING,actions:[_$.ADD_VIEWABILITY_HANDLER,_$.UPDATE_OPEN_COUNT,_$.OPEN_STORE_VIEW]}}},[rt.FALLBACK]:{},[rt.DONE]:{}}}),_9=(e=td(),t=ct(),n=_2(),i=_0())=>({actions:tt(eJ({},_4(e,t,n,i).actions),{[_8.SET_APP_STORE_ID]:e9({appStoreId:(e,t)=>t.appStoreId||e.appStoreId}),[_8.PREPARE_STORE_VIEW]:t=>{var n,i;null==(i=e.getMraidExt())||null==(n=i.prepareStoreView)||n.call(i,t.appStoreId)},[_8.OPEN_STORE_VIEW]:t=>{var i,r;t.appStoreId&&(n.emit({type:"store-kit-product-view",event:nt.APP_STORE_OPEN}),null==(r=e.getMraidExt())||null==(i=r.presentStoreView)||i.call(r,t.appStoreId))}})});var ve=()=>tH(),vt=((eV={}).OVERLAY_PREPARED="vungle.events.storeoverlay.success",eV.OVERLAY_VISIBLE="vungle.events.storeoverlay.visible",eV.OVERLAY_FINISHED="vungle.events.storeoverlay.finished",eV.OVERLAY_FAILED="vungle.events.storeoverlay.failed",eV),vn=((ek={}).STORE_VIEW_PREPARED="vungle.events.preparestore.success",ek.STORE_VIEW_CLOSED="vungle.events.preparestore.finished",ek),vi=((eU={}).VISIBLE="vungle.events.storekit.visible",eU.FAILED="vungle.events.storekit.failed",eU.FINISHED="vungle.events.storekit.finished",eU),vr=class extends rn{init(e){var t;null==(t=this.interpreter)||t.send(eJ({type:re.READY},e))}close(){var e,t;null==(e=this.interpreter)||e.send({type:re.CLOSE}),null==(t=this.interpreter)||t.send({type:re.READY})}registerMraidEvents(){Object.values(vn).forEach((e=>{this.rootElement.addEventListener(e,(()=>{this.reportingService.emit({type:"storekit-mraid",event:e})}))}))}constructor(e=_7,t=_9,n=iN(),i=ve(),r=_L()){super(e(),t(),n),this.reportingService=i,this.rootElement=r,this.registerMraidEvents()}};const va=new tT("5.0.0");var vs=(e=tM())=>e.getMraidVersion().isGreaterThanOrEqualTo(va);const vo=()=>{let e=_3(),t=e.states[rt.SHOWING];return t.on=tt(eJ({},t.on),{[re.CLOSE]:{target:rt.DONE,actions:[_$.CLOSE_STORE_VIEW,_$.REMOVE_VIEWABILITY_HANDLER]}}),e},vl=()=>vo();var vc=class extends rn{fallback(){var e;!1!==this.hasFallback&&(null==(e=this.interpreter)||e.send({type:re.SET_FALLBACK}),this.open())}constructor(e=_3,t=_4,n=iN()){super(e(),t(),n)}},vd=class extends vc{constructor(e=vl,t=_4,n=iN()){super(e,t,n)}};const vu=()=>{let e=_7(),t=e.states[rt.SHOWING];return t.on=tt(eJ({},t.on),{[re.CLOSE]:{target:rt.DONE,actions:[_$.CLOSE_STORE_VIEW,_$.REMOVE_VIEWABILITY_HANDLER]}}),e},vE=()=>vu();var v_=class extends vr{constructor(e=vE,t=_9,n=iN()){super(e,t,n)}},vv=class extends vc{constructor(e=vo,t=_4,n=iN()){super(e,t,n)}},vh=class extends vr{constructor(e=vu,t=_9,n=iN()){super(e,t,n)}},vS=class{withAppStoreId(e){let t=rx(this.tokenService);return t&&e.init({appStoreId:t}),e}resolve(){let e=new tT("17.2"),t=new tT("7.0"),n=new tT("7.1"),i=new tT("7.2.1");if(this.environmentService.getOsVersion().isGreaterThanOrEqualTo(e)){let e=this.environmentService.getSdkVersion();if(vs()&&e.isLessThan(i))return new vd;if(e.isGreaterThanOrEqualTo(t)&&e.isLessThan(n))return this.withAppStoreId(new v_)}return tC.isAffectedByStoreKitProductViewMaskIssue(this.environmentService)?vs()?new vv:this.withAppStoreId(new vh):vs()?new vc:this.withAppStoreId(new vr)}constructor(e=tM(),t=tE()){this.environmentService=e,this.tokenService=t}},vT=class{resolve(){if(this.environmentService.getOperatingSystem()===tg.iOS)return new vS(this.environmentService).resolve()}constructor(e=tM()){this.environmentService=e}},vp=((eB={}).RESET_VIEWABLE="resetViewable",eB.SET_VIEWABLE_TO_FALSE="setViewableToFalse",eB),vg=e=>({resetViewable:()=>{(e||ce()).resetViewable()},setViewableToFalse:()=>{(e||ce()).setViewable(!1)}});const vC=()=>({id:_z,initial:rt.HIDDEN,context:{delay:0},states:{[rt.SHOWING]:{on:{[re.CLOSE]:{target:rt.HIDDEN,actions:[vp.RESET_VIEWABLE,iW.START_INTERVALS]}}},[rt.HIDDEN]:{on:{[re.OPEN]:{target:rt.SHOWING,actions:[vp.SET_VIEWABLE_TO_FALSE,iW.PAUSE_INTERVALS]}}},[rt.INITIAL]:{},[rt.PREPARING]:{},[rt.FALLBACK]:{},[rt.DONE]:{}}}),vI=(e=ce(),t=iH())=>({actions:eJ({},vg(e),ix(t))});var vA=class extends rn{constructor(e=vC,t=vI,n=iN(),i=ce(),r=iH()){super(e(),t(i,r),n)}},vO=(e=tM())=>{let t=eX.getInstance(),n=new vT(e).resolve();return n&&t.bind(vA.getServiceIdentifier(),n),n};class vm extends iw{static getInstances(e=cZ()){return e?[new vm(rW)]:[]}getId(){return this.id}getSceneType(){return this.sceneType}constructor(e){super(),this.id=e,this.sceneType=iM.gdpr}}var vf=class extends rB{getFullScreenClickConfig(){var e;return{enabled:void 0!==this.ecImageTokenValue||super.getFullScreenClickConfig().enabled,ctaUrl:null!=(e=this.ecCtaUrlTokenValue)?e:"",id:this.id,target:super.getFullScreenClickConfig().target}}constructor({id:e,ecImageTokenValue:t,ecCtaUrlTokenValue:n,fullCtaTokenValue:i,skFullCtaTokenValue:r,placementType:a}){super({fullCtaTokenValue:i,skFullCtaTokenValue:r,id:e,placementType:a}),this.ecImageTokenValue=t,this.ecCtaUrlTokenValue=n}},vN=(e,t=!1,n=tW(),i=iF())=>{let r=al(n,r2.RESOURCE,r3.IMAGE).pipe(ac()).pipe(ad(au(n,aE.SCENE_END))),a=tt(eJ({},aq(n,t)),{error_count:r});return e.enabled&&(a.grant_reward=ss(iM.image,e,n,i)),a};class vD extends oN{getSceneType(){return this.sceneType}getFullScreenClickConfig(){return this.fullScreenClickConfig}getCloseButtonConfig(){let e=this.closeButtonConfigProvider.getCloseButtonConfig();return tt(eJ({},e),{style:this.isLastPage()?rh.CLOSE:e.style})}getCallToActionConfig(){return this.callToActionConfig}getEventStreams(){return this.eventStreams?this.eventStreams:vN(this.incentivizedConfig,this.lastChanceEndcardConfig.enabled)}static getInstances(e=tE(),t=tV(),n=tM(),i=r5(),r=oC()){let a=[],s=[t_.EC_IMAGE,t_.EC_IMAGE_2],o=e.has(t_.EC_HTML);return s.filter((t=>e.has(t))).forEach(((r,s)=>{var l;let c=`image_${s}`,d=o?s+1:s,u=new r7(r8(c,e,t),i);a.push(new vD({id:c,url:null!=(l=e.get(r))?l:"",index:d,fullScreenClickConfig:new vf({id:c,ecImageTokenValue:e.get(t_.EC_IMAGE),ecCtaUrlTokenValue:e.get(t_.EC_CTA_URL),fullCtaTokenValue:e.get(t_.FULL_CTA),skFullCtaTokenValue:e.get(t_.SK_FSC),placementType:t.getPlacementType()}).getFullScreenClickConfig(),storeKitOverlayAutoShowConfig:new rJ(d,this.isEndcardOnly(e),rx(e),e.get(t_.FULL_CTA_OPTION),e.get(t_.SKOVERLAY_AUTO),e.get(t_.SKOVERLAY_DELAY_SECONDS),e.get(t_.EC_SKOVERLAY_DELAY_SECONDS),e.get(t_.SKOVERLAY_AUTO_CLOSE),e.get(t_.EC_SKOVERLAY_DISABLE_AUTO_MMP),n,t).getStoreKitOverlayAutoShowConfig(),appStoreOnDelayConfig:new r0(d,rx(e),e.get(t_.APP_STORE_ON_ENDCARD_AUTO_DELAY),n).getAppStoreOnDelayConfig(),lastChanceEndcardConfig:u.getLastChanceEndcardConfig(),trackingEventMapConfig:new ae(!1).getTrackingEventMapConfig(),closeButtonConfigProvider:new r9({ecCloseButtonDelaySecondsTokenValue:e.get(t_.EC_CLOSE_BUTTON_DELAY_SECONDS),staticEcCloseButtonDelaySecondsTokenValue:e.get(t_.STATIC_EC_CLOSE_BUTTON_DELAY_SECONDS),showECCloseButtonCountDownTokenValue:e.get(t_.SHOW_EC_CLOSE_BUTTON_COUNTDOWN),endcardCloseButtonAsSkipTokenValue:e.get(t_.ENDCARD_CLOSE_BUTTON_AS_SKIP),isSecondEndcard:1===d}),callToActionConfig:new at({skEcCtaOnlyTokenValue:e.get(t_.SK_EC_CTA_ONLY),appMetaProviderParams:sv(e,i)}).getCallToActionConfig(),placementTypeService:t,shouldSplitVideoEndcardClick:th(e.get(t_.VIDEO_ENDCARD_CLICK_SPLIT)),incentivizedConfig:new sh({enabled:th(e.get(t_.INCENTIVIZED)),incentivizedCloseButtonDelaySeconds:e.get(t_.INCENTIVIZED_CLOSE_BUTTON_DELAY_SECONDS),isIncentiveTiedToCloseButtonDelay:th(e.get(t_.IS_INCENTIVE_TIED_TO_CLOSE_BUTTON_DELAY))}).getIncentivizedConfig()}))})),a}constructor({id:e,url:t,index:n,fullScreenClickConfig:i,storeKitOverlayAutoShowConfig:r,appStoreOnDelayConfig:a,lastChanceEndcardConfig:s,closeButtonConfigProvider:o,trackingEventMapConfig:l,callToActionConfig:c,placementTypeService:d=tV(),shouldSplitVideoEndcardClick:u=!1,eventStreams:E,incentivizedConfig:_}){super({id:e,endcardContent:t,index:n,isAlternative:!1,compressionType:om.NONE,storeKitOverlayAutoShowConfig:r,appStoreOnDelayConfig:a,lastChanceEndcardConfig:s,omsdkEnabled:!1,trackingEventMapConfig:l,callToActionConfig:c,closeButtonConfigProvider:o,placementTypeService:d,eligibleToPreload:!1,shouldSplitVideoEndcardClick:u,eventStreams:E,incentivizedConfig:_}),this.sceneType=iM.image,this.id=e,this.url=t,this.index=n,this.fullScreenClickConfig=i,this.storeKitOverlayAutoShowConfig=r,this.appStoreOnDelayConfig=a,this.lastChanceEndcardConfig=s,this.trackingEventMapConfig=l,this.callToActionConfig=c,this.closeButtonConfigProvider=o,this.placementTypeService=d,this.eventStreams=E}}var vR=class{static getInstances(e=tE(),t=tV(),n=r5()){let i="ALT_MAIN_STREAM_",r="ALT_MAIN_VIDEO_",a=[];return[...e.getSeriesTokens(i),...e.getSeriesTokens(r)].forEach(((s,o)=>{var l;let c=s.startsWith(i),d=s.split(c?i:r),u=d[d.length-1],E=new r7(r8(u,e,t),n);a.push(new oY({id:u,url:null!=(l=e.get(s))?l:"",index:o,isAlternative:!0,theatreModeEnabled:!1,videoType:c?iB.HLS:iB.PROGRESSIVE,fullScreenClickConfig:new rB({fullCtaTokenValue:e.get(t_.FULL_CTA),skFullCtaTokenValue:e.get(t_.SK_FSC),placementType:t.getPlacementType()}).getFullScreenClickConfig(),storeKitOverlayAutoShowConfig:{enabled:!1,isAutoClose:!1,autoShowDelay:0,openCallback:()=>{}},appStoreOnDelayConfig:{enabled:!1,autoShowDelay:0},callToActionConfig:new oL(oy(e,t,n)).getCallToActionConfig(),lastChanceEndcardConfig:E.getLastChanceEndcardConfig(),progressBarConfig:new oR({videoProgressBarTokenValue:e.get(t_.VIDEO_PROGRESS_BAR),videoProgressBarColorTokenValue:e.get(t_.VIDEO_PROGRESS_BAR_COLOR),ctaButtonBackgroundTokenValue:e.get(t_.CTA_BUTTON_BACKGROUND),isBanner:t.isBanner()}).getProgressBarConfig(),closeButtonConfigProvider:new oD({closeButtonDelaySecondsTokenValue:e.get(t_.CLOSE_BUTTON_DELAY_SECONDS),incentivizedCloseButtonDelaySecondsTokenValue:e.get(t_.INCENTIVIZED_CLOSE_BUTTON_DELAY_SECONDS),incentivizedTokenValue:e.get(t_.INCENTIVIZED),videoCloseButtonAsSkipTokenValue:e.get(t_.VIDEO_CLOSE_BUTTON_AS_SKIP),showVideoCloseButtonCountDownTokenValue:e.get(t_.SHOW_VIDEO_CLOSE_BUTTON_COUNTDOWN)}),trackingEventMapConfig:new ae(!1).getTrackingEventMapConfig(),loopVideo:!1,isFullscreen:t.isFullscreen(),showDownloadButton:!!rx(e)&&th(e.get(t_.VIDEO_SHOW_CTA)),incentivizedConfig:new sh({enabled:th(e.get(t_.INCENTIVIZED)),incentivizedCloseButtonDelaySeconds:e.get(t_.INCENTIVIZED_CLOSE_BUTTON_DELAY_SECONDS),isIncentiveTiedToCloseButtonDelay:th(e.get(t_.IS_INCENTIVE_TIED_TO_CLOSE_BUTTON_DELAY))}).getIncentivizedConfig()}))})),a}},vy=class{static getInstances(e=tE(),t=tV(),n=r5(),i=oC()){let r="ALT_EC_",a=[],s=e.getSeriesTokens(r),o=e=>{let t=e.split(r);return t[t.length-1]};return s.forEach(((r,s)=>{var l;let c=o(r),d=new r7(r8(c,e,t),n);a.push(new oN({id:c,endcardContent:i.decode(null!=(l=e.get(r))?l:"",!1),index:s,isAlternative:!0,compressionType:om.BASE64_ENCODED,storeKitOverlayAutoShowConfig:{enabled:!1,isAutoClose:!1,autoShowDelay:0,openCallback:()=>{}},appStoreOnDelayConfig:{enabled:!1,autoShowDelay:0},lastChanceEndcardConfig:d.getLastChanceEndcardConfig(),omsdkEnabled:!1,closeButtonConfigProvider:new r9({ecCloseButtonDelaySecondsTokenValue:e.get(t_.EC_CLOSE_BUTTON_DELAY_SECONDS),staticEcCloseButtonDelaySecondsTokenValue:e.get(t_.STATIC_EC_CLOSE_BUTTON_DELAY_SECONDS),showECCloseButtonCountDownTokenValue:e.get(t_.SHOW_EC_CLOSE_BUTTON_COUNTDOWN),endcardCloseButtonAsSkipTokenValue:e.get(t_.ENDCARD_CLOSE_BUTTON_AS_SKIP),isSecondEndcard:!1}),trackingEventMapConfig:{enabled:!1},callToActionConfig:new at({skEcCtaOnlyTokenValue:e.get(t_.SK_EC_CTA_ONLY),appMetaProviderParams:sv(e,n)}).getCallToActionConfig(),placementTypeService:t,eligibleToPreload:!1,incentivizedConfig:new sh({enabled:th(e.get(t_.INCENTIVIZED)),incentivizedCloseButtonDelaySeconds:e.get(t_.INCENTIVIZED_CLOSE_BUTTON_DELAY_SECONDS),isIncentiveTiedToCloseButtonDelay:th(e.get(t_.IS_INCENTIVE_TIED_TO_CLOSE_BUTTON_DELAY))}).getIncentivizedConfig()}))})),a}},vL=class{addTransformer(e){return this.transformers.push(e),this}build(){return this.mainScenes=this.buildMainScenes(),this.alternativeScenes=this.buildAlternativeScenes(),this.transformers.forEach((e=>{e.transform(this.mainScenes)})),this.mainScenes}buildMainScenes(){return[...vm.getInstances(),...oY.getInstances(),...oN.getInstances(),...vD.getInstances(),...ai.getInstances()]}buildAlternativeScenes(){let e,t=[...vR.getInstances(),...vy.getInstances()],n=this.mainScenes.findIndex((e=>e.getSceneType()===iM.endcard)),i=this.mainScenes[n+1];return i&&(e=i),t.forEach((t=>{let n=t.getTransitions().find((e=>e.name===ib.NEXT));n?n.scene=e:t.addTransition({name:ib.NEXT,scene:e,actions:[]}),t.next=e})),t}constructor(){this.transformers=[],this.mainScenes=[],this.alternativeScenes=[],this.tokenService=tE()}},vP=class{transform(e){return e.forEach(((t,n)=>{var i,r;if(n===e.length-1)return;let a=t.getTransitions().find((e=>e.name===ib.NEXT));a?a.scene=null!=(i=e[n+1])?i:void 0:t.addTransition({name:ib.NEXT,scene:null!=(r=e[n+1])?r:void 0,actions:[]})})),e}},vb=()=>!!iJ()&&th(tE().get(t_.APP_STORE_ON_FIRST_TRANSITION)),vw=class{transform(e){return e.length&&this.insertionHelper(e[0],this.index),e}insertionHelper(e,t){var n;if(0===t)return;let i=null==(n=e.getTransitions())?void 0:n.find((e=>e.name===ib.NEXT&&e.scene)),r=null==i?void 0:i.scene;if(i&&r){if(this.ineligibleSceneTypes.includes(e.getSceneType()))return void this.insertionHelper(r,t);if(1===t)return void(i.actions.some((e=>e.name===rd.SHOW_PRODUCT_VIEW))||i.actions.push({name:rd.SHOW_PRODUCT_VIEW}));this.insertionHelper(r,t-1)}}constructor(e){this.index=e,this.ineligibleSceneTypes=[iM.gdpr]}},vM=()=>!!iJ()&&th(tE().get(t_.APP_STORE_ON_SECOND_TRANSITION)),vV=class{transform(e){return this.addCloseAdAction(e,0),e}addCloseAdAction(e,t){var n,i;if(void 0===e[t+1])return;let r=null==(n=e[t].getTransitions())?void 0:n.find((e=>e.name===ib.NEXT&&e.scene));if(r&&r.actions.find((e=>e.name===rd.SHOW_PRODUCT_VIEW))&&(null==r||null==(i=r.scene)?void 0:i.getSceneType())===iM.closed){r.actions.push({name:rd.END_AD_ON_PRODUCT_VIEW_CLOSE});let e=r.scene.getEntryActions().findIndex((e=>e.name===rT.CLOSE_AD));-1!==e&&r.scene.getEntryActions().splice(e,1)}this.addCloseAdAction(e,t+1)}},vk=class{transform(e){if(0===e.length)return[];if(1===e.length)return e[0].prev=void 0,e[0].next=void 0,e;for(let t=0;t<e.length;t+=1)e[t].prev=0===t?void 0:e[t-1],e[t].next=t===e.length-1?void 0:e[t+1];return e}},vU=class{transform(e){return e.forEach((e=>{this.sceneTypesToAddPostrollView.includes(e.getSceneType())&&e.addEntryAction({name:iP.POSTROLL_VIEW})})),e}constructor(){this.sceneTypesToAddPostrollView=[iM.video,iM.image,iM.endcard]}},vB=class{transform(e){let t=e.filter((e=>e.getSceneType()===iM.endcard&&!e.isAlternative())),n=e.filter((e=>e.isAlternative()));return t.forEach((e=>{n.forEach((t=>{e.addTransition({name:t.getId(),target:t.getId(),scene:t,actions:[]})}))})),n.forEach((e=>{n.forEach((t=>{e.getId()!==t.getId()&&e.addTransition({name:t.getId(),target:t.getId(),scene:t,actions:[]})}))})),e}},vH=class{transform(e){return e.forEach((e=>{this.sceneTypesToInitCheckPoint.includes(e.getSceneType())&&e.addEntryAction({name:an.INIT_CHECKPOINTS})})),e}constructor(){this.sceneTypesToInitCheckPoint=[iM.image,iM.endcard]}},vW=class{transform(e){return e.forEach((e=>{this.SCENE_TYPES_TO_CLOSE_STOREKIT_OVERLAY.includes(e.getSceneType())&&e.addExitAction({name:rT.CLOSE_STOREKIT_OVERLAY})})),e}constructor(){this.SCENE_TYPES_TO_CLOSE_STOREKIT_OVERLAY=[iM.video,iM.endcard]}},vx=class{transform(e){return e.forEach((e=>{var t;if(!oj(e))return;let n=e.getTransitions().find((e=>e.name===ib.NEXT)),i=null==n?void 0:n.actions.filter((e=>e.name!==rd.SHOW_PRODUCT_VIEW)),r={name:ib.VIDEO_FAILURE,scene:null==n?void 0:n.scene,actions:null!=i?i:[]},a=(null==(t=e.next)?void 0:t.getSceneType())!==iM.closed;a?r.actions.push({name:iP.SEND_EVENT_VIDEO_SKIP_TO_NEXT_SCENE}):r.actions.push({name:iP.SEND_FATAL_VIDEO_ERROR}),e.setCanSkipToNextScene(a),e.addTransition(r)})),e}},vF=class{transform(e){return e.filter((e=>{var t;return(null==(t=e.next)?void 0:t.getSceneType())===iM.closed})).forEach((e=>{if(rb(e)){var t;e.setLastChanceEndcardConfig(tt(eJ({},e.getLastChanceEndcardConfig()),{enabled:!0}));let n=[{name:i5.CLOSE_OVERLAY_VIEW},{name:cW.RESET_AUTO_SHOW_OVERLAY_SERVICE},{name:cG.RESET_APP_STORE_ON_DELAY_SERVICE},{name:ck.SHOW_LAST_CHANCE_ENDCARD},{name:rv.SET_CLOSE_BUTTON_HIDDEN},{name:iP.CLOSE_VIDEO_CURRENT_SCENE},{name:rT.SET_THEATRE_MODE_INACTIVE},{name:iP.DISABLE_THEATRE_MODE}];e.addTransition({name:ib.LAST_CHANCE_ENDCARD,actions:n}),e.addExitAction({name:ck.CLOSE_LAST_CHANCE_ENDCARD});let i=e.getTransitions().find((e=>e.name===ib.NEXT));if(!i)return;e.addOrUpdateTransition({name:ib.NEXT,actions:[{name:rv.SET_CLOSE_BUTTON_VISIBLE},...null!=(t=null==i?void 0:i.actions)?t:[]],scene:null==i?void 0:i.scene});let r=null==i?void 0:i.actions.find((e=>e.name===rd.SHOW_PRODUCT_VIEW));if(r&&(e.addOrUpdateTransition({name:ib.LAST_CHANCE_ENDCARD,actions:[r]}),i.actions=i.actions.filter((e=>e.name!==rd.SHOW_PRODUCT_VIEW))),i.actions.some((e=>e.name===iP.SHOW_PICTURE_IN_PICTURE))){let t=e.getTransitions().find((e=>e.name===ib.LAST_CHANCE_ENDCARD));if(t){e.addOrUpdateTransition({name:ib.LAST_CHANCE_ENDCARD,actions:[{name:iP.SHOW_PICTURE_IN_PICTURE},{name:iP.SET_PICTURE_IN_PICTURE_VIDEO_CONTEXT}]}),t.actions=null==t?void 0:t.actions.filter((e=>e.name!==iP.CLOSE_VIDEO_CURRENT_SCENE));let n=[iP.SHOW_PICTURE_IN_PICTURE,iP.SET_PICTURE_IN_PICTURE_VIDEO_CONTEXT];i.actions=i.actions.filter((e=>!n.includes(e.name)))}}}})),e}},vK=(e=tE())=>th(e.get(t_.VX_ENDCARD)),vG=class{transform(e){return e.forEach((e=>{if(!oj(e)||e.getTransitions().some((e=>e.name===ib.COMPLETE&&void 0!==e.scene)))return;let t=e.getTransitions().find((e=>e.name===ib.NEXT));if(t){var n;let i=[iP.SHOW_PICTURE_IN_PICTURE,iP.SET_PICTURE_IN_PICTURE_VIDEO_CONTEXT];e.addOrUpdateTransition({name:ib.COMPLETE,scene:null==t?void 0:t.scene,actions:[...null!=(n=t.actions.filter((e=>!i.includes(e.name))))?n:[]]})}})),e}},vY=class{transform(e){let t=e[0];if(!t||t.getSceneType()!==iM.video)return e;let n=t.getTransitions().find((e=>e.name===ib.NEXT));return n&&(n.actions=n.actions.filter((e=>e.name!==iP.CLOSE_VIDEO)),n.actions.push({name:iP.SHOW_PICTURE_IN_PICTURE},{name:iP.SET_PICTURE_IN_PICTURE_VIDEO_CONTEXT})),e}},vj=(e=tE())=>th(e.get(t_.PICTURE_IN_PICTURE)),vX=()=>{let e=new vL;e.addTransformer(new vP),e.addTransformer(new vk),vb()&&e.addTransformer(new vw(1)),vM()&&e.addTransformer(new vw(2)),vj()&&e.addTransformer(new vY),e.addTransformer(new vU),e.addTransformer(new vV),e.addTransformer(new vH),e.addTransformer(new vW),e.addTransformer(new vx),e.addTransformer(new vG);let t=[...e.build(),...e.alternativeScenes];return t=(new vB).transform(t),vK()&&(t=(new vF).transform(t)),eX.getInstance().bind(rH,t),t},vz=e=>{let t={enabled:!1,isAutoClose:!1};if(!e)return t;let{overlay:n}=e,i=(null==n?void 0:n.autoShowDelay)?1e3*n.autoShowDelay:0,r=!!((null==n?void 0:n.autoCloseDelay)&&n.autoCloseDelay>0),a=(null==n?void 0:n.autoCloseDelay)?1e3*n.autoCloseDelay:0;return eJ(tt(eJ({},t),{autoShowDelay:i,isAutoClose:r}),r&&{autoCloseDelay:a})},v$=(e,t=tE())=>void 0===e?"":"string"==typeof e?e:t.get(e.token);const vq=e=>(Object.keys(e).forEach((t=>{let n=e[t];(void 0===n||""===n||Array.isArray(n)&&0===n.length)&&delete e[t]})),e);var vZ=(e,t=tE())=>{var n;let i=v$(null==e?void 0:e.icon,t),r=null==e||null==(n=e.screenshots)?void 0:n.map((e=>v$(e,t))).filter((e=>void 0!==e));return vq({enabled:!(!(null==e?void 0:e.name)||!i),downloads:null==e?void 0:e.downloads,icon:i,name:null==e?void 0:e.name,price:null==e?void 0:e.price,ratingCount:null==e?void 0:e.rating,screenshots:r})},vQ=e=>{var t,n,i;let r=0;return(null==e?void 0:e.delay)&&(r="number"==typeof e.delay?e.delay:null!=(t=e.delay.value)?t:0),{delay:r,countdown:null==(n=null==e?void 0:e.countdown)||n,style:null!=(i=null==e?void 0:e.style)?i:rh.CLOSE}},vJ=(e,t,n,i=tE())=>{var r,a,s,o,l,c,d,u,E,_,v,h,S;let T=!1,p={id:e,enabled:!1};if(!t||0===Object.keys(t).length)return p;let g=null!=(u=null==t?void 0:t.fsc)&&u,C=null!=(E=null==t||null==(r=t.cta)?void 0:r.text)?E:"Open";Object.keys(null!=(_=null==n?void 0:n.on)?_:{}).includes(ib.LAST_CHANCE_ENDCARD)&&(T=!0);let A=vZ(t.appMeta,i),I=tt(eJ({},A),{enabled:!(!A.name||!A.icon)}),O=4e3;return(null==t||null==(a=t.cta)?void 0:a.delay)&&(O=1e3*t.cta.delay),tt(eJ({},p),{enabled:T,fsc:{enabled:g,ctaUrl:null!=(v=null==t||null==(s=t.cta)?void 0:s.url)?v:"",target:null==t||null==(o=t.storeKit)?void 0:o.fscTarget},appMeta:I,close:vQ(null==t?void 0:t.close),cta:{text:C,url:null!=(h=null==t||null==(l=t.cta)?void 0:l.url)?h:"",isPersistent:null!=(S=null==t||null==(c=t.cta)?void 0:c.isPersistent)&&S,delay:O,appMeta:I,target:null==t||null==(d=t.storeKit)?void 0:d.ctaTarget}})},v0=(e,t,n=tE())=>{var i;return{url:null==e?void 0:e.url,text:null==e?void 0:e.text,isPersistent:null==e?void 0:e.isPersistent,delay:(null==e?void 0:e.delay)?1e3*e.delay:0,background:null==e?void 0:e.background,appMeta:(null==e?void 0:e.appMeta)?vZ(e.appMeta,n):void 0,target:null!=(i=null==t?void 0:t.ctaTarget)?i:iV.SKPV}},v1=e=>{let t=null==e?void 0:e.events;return t?{enabled:!0,events:t}:{enabled:!1}},v2=e=>{if("string"==typeof e)return;let{originalUrl:t}=e;return t&&""!==t.trim()?t:void 0},v3=(e=tE())=>({enabled:th(e.get(t_.INCENTIVIZED)),incentivizedCloseButtonDelaySeconds:e.get(t_.INCENTIVIZED_CLOSE_BUTTON_DELAY_SECONDS),isIncentiveTiedToCloseButtonDelay:th(e.get(t_.IS_INCENTIVE_TIED_TO_CLOSE_BUTTON_DELAY))}),v5=()=>{let e=eX.getInstance(),t=lX.getServiceIdentifier();return e.get(t)},v4=class{get cachedConfig(){return this.closeButtonService.cachedConfig}getDefaultConfig(){return{delay:0,style:rh.CLOSE,countdown:!0}}updateTotalDelay(e){void 0!==this.closeButtonService.totalDelaySeconds&&(this.closeButtonService.totalDelaySeconds=Math.max(0,this.closeButtonService.totalDelaySeconds-e))}calculateActualDelay(e){return e?"number"==typeof e?e:"%"===e.unit?Math.floor(this.closeButtonService.totalDelaySeconds*e.value/100):Math.min(e.value,this.closeButtonService.totalDelaySeconds):0}constructor(e,t,n,i=v5()){this.id=e,this.config=t,this.closeButtonService=i,void 0===this.closeButtonService.totalDelaySeconds&&void 0!==n&&(this.closeButtonService.totalDelaySeconds=n)}},v6=class extends v4{getCloseButtonConfig(e){if(this.cachedConfig.has(this.id))return this.cachedConfig.get(this.id);let t=this.config;if(!t)return this.getDefaultConfig();let n=this.calculateActualDelay(t.delay);e.videoDuration&&e.videoDuration<n&&(n=Math.floor(e.videoDuration));let i={delay:n,style:t.style,countdown:t.countdown};return this.cachedConfig.set(this.id,i),this.updateTotalDelay(n),i}},v8=(e,t)=>{var n;return{manifest:null==e?void 0:e.manifest,track_0:null==e?void 0:e.track_0,chunks:null==e||null==(n=e.chunks)?void 0:n.map((e=>v$(e,t))).filter((e=>""!==e)),chunk_init:v$(null==e?void 0:e.chunk_init,t)}},v7=class extends v4{getCloseButtonConfig(){if(this.cachedConfig.has(this.id))return this.cachedConfig.get(this.id);let e=this.config;if(!e)return this.getDefaultConfig();let t=this.calculateActualDelay(e.delay),n={delay:t,style:e.style,countdown:e.countdown};return this.cachedConfig.set(this.id,n),this.updateTotalDelay(t),n}};const v9={composite:(e,t,n,i,r=tV(),a=tE(),s=oC(),o=v5())=>new ui({id:e.id,html:e.html,children:e.children,closeButtonConfigProvider:new v7(e.id,e.close,null==n?void 0:n.globalTimer,o),lastChanceEndcardConfig:vJ(e.id,e.lastChanceEndcard,i,a),placementTypeService:r,htmlDecoderService:s}),endcard:(e,t,n,i,r=tV(),a=tE(),s=oC(),o=v5())=>{var l;let c=e.compressed?om.GZIP:om.BASE64_ENCODED;return new oN({id:e.id,endcardContent:s.decode(e.html,e.compressed),index:t,isAlternative:!1,compressionType:c,storeKitOverlayAutoShowConfig:vz(e.storeKit),appStoreOnDelayConfig:{enabled:!1,autoShowDelay:0},lastChanceEndcardConfig:vJ(e.id,e.lastChanceEndcard,i,a),omsdkEnabled:!1,trackingEventMapConfig:v1(e),callToActionConfig:v0(e.cta,e.storeKit,a),placementTypeService:r,closeButtonConfigProvider:new v7(e.id,e.close,null==n?void 0:n.globalTimer,o),eligibleToPreload:null!=(l=e.preload)&&l,incentivizedConfig:v3(a)})},image:(e,t,n,i,r=tV(),a=tE(),s=v5())=>{var o,l;return new vD({id:e.id,url:v$(e.url,a),index:t,fullScreenClickConfig:{enabled:e.fsc,ctaUrl:null==(o=e.cta)?void 0:o.url,target:null==(l=e.storeKit)?void 0:l.fscTarget},storeKitOverlayAutoShowConfig:vz(e.storeKit),appStoreOnDelayConfig:{enabled:!1,autoShowDelay:0},lastChanceEndcardConfig:vJ(e.id,e.lastChanceEndcard,i,a),trackingEventMapConfig:v1(e),placementTypeService:r,closeButtonConfigProvider:new v7(e.id,e.close,null==n?void 0:n.globalTimer,s),callToActionConfig:v0(e.cta,e.storeKit,a),incentivizedConfig:v3(a)})},video:(e,t,n,i,r=tV(),a=tE(),s=v5())=>{var o,l,c;let d=v$(e.url,a).endsWith(".m3u8")?iB.HLS:iB.PROGRESSIVE,u={enabled:e.fsc,target:null==(o=e.storeKit)?void 0:o.fscTarget,ctaUrl:null==(l=e.cta)?void 0:l.url},E=v8(e.streamManifest,a),_=v8(tt(eJ({},e.audioManifest),{manifest:null==(c=e.streamManifest)?void 0:c.manifest}),a);return new oY({id:e.id,url:v$(e.url,a),isAlternative:!1,showDownloadButton:!1,theatreModeEnabled:!1,index:t,videoType:d,streamManifest:E,audioManifest:_,progressBarConfig:(()=>{var t,n,i;let r=null!=(i=null==e||null==(t=e.progressBar)?void 0:t.show)&&i;return{show:r,color:r&&(null==(n=e.progressBar)?void 0:n.color)?e.progressBar.color:am}})(),fullScreenClickConfig:u,storeKitOverlayAutoShowConfig:vz(e.storeKit),appStoreOnDelayConfig:{enabled:!1,autoShowDelay:0},callToActionConfig:v0(e.cta,e.storeKit,a),lastChanceEndcardConfig:vJ(e.id,e.lastChanceEndcard,i,a),closeButtonConfigProvider:new v6(e.id,e.close,null==n?void 0:n.globalTimer,s),originalVideoUrl:v2(e.url),loopVideo:e.looping,muted:e.muted,trackingEventMapConfig:v1(e),isFullscreen:r.isFullscreen(),incentivizedConfig:v3(a)})}};var he=class{addTransformer(e){return this.transformers.push(e),this}build(){let e=vm.getInstances();return this.scenes.unshift(...e),this.transformers.forEach((e=>{this.scenes=e.transform(this.scenes)})),this.scenes}constructor(e=new cQ,t=v9,n=tV()){this.converters=t,this.placementTypeService=n,this.transformers=[],this.scenes=[],this.scenesMap=new Map;let i=e.getSceneData(),r=e.getAdMachineConfig(),a=new Map;i.forEach((e=>{a.has(e.type)||a.set(e.type,[]),a.get(e.type).push(e)})),a.forEach(((e,t)=>{let n=this.converters[t];n&&e.forEach(((e,t)=>{let i=n(e,t,null==r?void 0:r.context,r.states[e.id],this.placementTypeService);this.scenes.push(i),this.scenesMap.set(e.id,i)}))}));let s=new ai;this.scenesMap.set(s.getId(),s),this.scenes.push(s),this.scenes.forEach((e=>{let t=r.states[e.getId()];(null==t?void 0:t.on)&&Object.keys(t.on).forEach((n=>{let i=t.on[n],r={name:n,actions:i.actions?i.actions.map((e=>({name:e}))):[],scene:i.target?this.scenesMap.get(i.target):void 0};e.addOrUpdateTransition(r)}))}))}},ht=class{transform(e){return e.filter((e=>!!rb(e)&&e.getLastChanceEndcardConfig().enabled)).forEach((e=>{var t;e.addOrUpdateTransition({name:ib.NEXT,actions:[{name:ck.CLOSE_LAST_CHANCE_ENDCARD},{name:rv.SET_CLOSE_BUTTON_VISIBLE}]});let n=[{name:i5.CLOSE_OVERLAY_VIEW},{name:cW.RESET_AUTO_SHOW_OVERLAY_SERVICE},{name:cG.RESET_APP_STORE_ON_DELAY_SERVICE},{name:rv.SET_CLOSE_BUTTON_HIDDEN},{name:an.FLUSH_MRAID_EVENTS_PROXY_CALLBACKS},{name:rT.SET_THEATRE_MODE_INACTIVE},{name:iP.DISABLE_THEATRE_MODE}],i=null==(t=e.getTransitions().find((e=>e.name===ib.LAST_CHANCE_ENDCARD)))?void 0:t.actions.some((e=>e.name===iP.SHOW_PICTURE_IN_PICTURE));e.getSceneType()===iM.video&&(i?n.push({name:iP.SET_PICTURE_IN_PICTURE_VIDEO_CONTEXT}):n.push({name:iP.CLOSE_VIDEO_CURRENT_SCENE})),e.addOrUpdateTransition({name:ib.LAST_CHANCE_ENDCARD,actions:n})})),e}},hn=class{transform(e,t=new cQ){let n=t.getAdMachineConfig(),i=t=>e.find((e=>e.getId()===t));return e.forEach((e=>{var t,r,a;let s=e.getId(),o=i(null==(a=n.states[s])||null==(r=a.on)||null==(t=r.NEXT)?void 0:t.target);o&&(e.next=o,o.prev=e)})),e}},hi=class{transform(e,t=new cQ){let n=t.getSceneData(),i=[];return e.forEach((t=>{if(t.getSceneType()===iM.composite){let r=n.find((e=>e.id===t.getId()));if(!r)return;let a=r.children,s=[];a.forEach((t=>{let n=e.find((e=>e.getId()===t));n&&(n.child=!0,s.push(n))})),t.addScenes(s),i.push(t)}})),e.forEach((e=>{e.getSceneType()!==iM.composite&&(i.some((t=>t.getSceneType()===iM.composite&&t.getScenes().includes(e)))||i.push(e))})),i}},hr=class{transform(e){var t;let n=(null==(t=e[0])?void 0:t.getSceneType())===iM.video?e[0]:null,i=null==n?void 0:n.getTransitions().find((e=>e.name===ib.NEXT));return(null==i?void 0:i.actions.some((e=>e.name===iP.SHOW_PICTURE_IN_PICTURE)))&&(i.actions=i.actions.filter((e=>e.name!==iP.CLOSE_VIDEO)).concat({name:iP.SET_PICTURE_IN_PICTURE_VIDEO_CONTEXT})),e}};const ha=[new hn,new vU,new vH,new vW,new ht,new hr,new vx,new vG,new hi];var hs=(e=new cQ,t=ha)=>{let n=new he(e);t.forEach((e=>{n.addTransformer(e)}));let i=n.build();return eX.getInstance().bind(rH,i),i},ho=(e=tE(),t=hs,n=vX)=>{e.has(t_.AD_EXPERIENCE)?t():n()},hl=()=>{if(!rc())return;let e=eX.getInstance(),t=i3();if(!t)return;let n=new cB(t);return e.bind(cB.getServiceIdentifier(),n),n};const hc=(e=tE())=>{let t=e.get(t_.SKOVERLAY_POSITION);switch(t){case"bottom":case"bottom-raised":return t;default:return}},hd=(e=tE())=>{var t,n;switch(null==(n=e.get(t_.SKOVERLAY_DISMISSIBLE))||null==(t=n.trim())?void 0:t.toLowerCase()){case"true":return!0;case"false":return!1;default:return}},hu=()=>({position:"bottom",dismissible:!0});var hE=(e=tE())=>{let t=hu(),n=hc(e);void 0!==n&&(t.position=n);let i=hd(e);return void 0!==i&&(t.dismissible=i),t},h_=((eH=h_||{}).EMIT_PREPARE_ERROR="EMIT_PREPARE_ERROR",eH.PREPARE_OVERLAY="PREPARE_OVERLAY",eH.SET_APP_STORE_ID="SET_APP_STORE_ID",eH);const hv=eJ({},_$,h_);var hh="store-kit-overlay";const hS=(e=hu(),t=i0.APP_STORE)=>({id:hh,initial:iX.IDLE,context:{displayOptions:e,fallback:t},states:{[iX.IDLE]:{on:{[ij.START_DELAY_SHOW]:{target:iX.DELAY_SHOW,actions:[iz.ASSIGN_FALLBACK]},[ij.START_IMMEDIATE_SHOW]:{target:iX.IMMEDIATE_SHOW,actions:[iz.ASSIGN_FALLBACK,iz.SHOW_SKO]},[ij.SET_DISPLAY_OPTIONS]:{actions:iz.ASSIGN_DISPLAY_OPTIONS}}},[iX.DELAY_SHOW]:{on:{[ij.CLOSE]:{target:iX.IDLE},[ij.INTERRUPT]:{target:iX.DELAY_SHOW_INTERRUPTED},[ij.SHOW]:{target:iX.DELAY_SHOW_IMMEDIATE,actions:iz.SHOW_SKO},[ij.START_IMMEDIATE_SHOW]:{target:iX.IMMEDIATE_SHOW,actions:[iz.ASSIGN_FALLBACK,iz.CANCEL_DELAY_SHOW,iz.SHOW_SKO]}}},[iX.DELAY_SHOW_IMMEDIATE]:{on:{[ij.SET_VISIBLE]:{target:iX.DELAY_SHOW_VISIBLE,actions:iz.EMIT_OBSERVABILITY_EVENT},[ij.CLOSE]:{target:iX.IDLE}}},[iX.DELAY_SHOW_VISIBLE]:{on:{[ij.CLOSE]:{target:iX.CLOSING,actions:iz.CLOSE_SKO},[ij.FINISH]:{target:iX.IDLE},[ij.INTERRUPT]:{target:iX.DELAY_SHOW_INTERRUPTED,actions:iz.CLOSE_SKO}}},[iX.DELAY_SHOW_INTERRUPTED]:{on:{[ij.RESUME]:{target:iX.DELAY_SHOW_IMMEDIATE,actions:iz.SHOW_SKO},[ij.CLOSE]:{target:iX.IDLE}}},[iX.IMMEDIATE_SHOW]:{on:{[ij.SET_VISIBLE]:{target:iX.IMMEDIATE_SHOW_VISIBLE,actions:iz.EMIT_OBSERVABILITY_EVENT},[ij.INTERRUPT]:{target:iX.CLOSING,actions:iz.CLOSE_SKO},[ij.SET_FALLBACK]:{target:iX.FALLBACK}}},[iX.IMMEDIATE_SHOW_VISIBLE]:{on:{[ij.CLOSE]:{target:iX.CLOSING,actions:iz.CLOSE_SKO},[ij.FINISH]:{target:iX.IDLE},[ij.INTERRUPT]:{target:iX.CLOSING,actions:iz.CLOSE_SKO}}},[iX.FALLBACK]:{on:{[ij.START_IMMEDIATE_SHOW]:{actions:iz.SHOW_FALLBACK}}},[iX.CLOSING]:{on:{[ij.FINISH]:{target:iX.IDLE}}},[iX.ERROR]:{},[iX.INITIAL]:{},[iX.PREPARING]:{}}}),hT=(e,t,n,i)=>({actions:{[iz.EMIT_OBSERVABILITY_EVENT]:()=>{t.emit(tA.STORE_KIT_OVERLAY)},[iz.SHOW_SKO]:t=>{var n,i;null==(i=e.getMraidExt())||null==(n=i.openAppStore)||n.call(i,1,t.displayOptions)},[iz.CLOSE_SKO]:()=>{var t,n;null==(n=e.getMraidExt())||null==(t=n.dismissStoreOverlayView)||t.call(n)},[iz.ASSIGN_FALLBACK]:e9(((e,t)=>{var n;return tt(eJ({},e),{fallback:null!=(n=t.fallback)?n:e.fallback})})),[iz.ASSIGN_DISPLAY_OPTIONS]:e9(((e,t)=>{var n;return tt(eJ({},e),{displayOptions:null!=(n=t.displayOptions)?n:e.displayOptions})})),[iz.SHOW_FALLBACK]:e=>{switch(e.fallback){case i0.SKPV:n.emit(_1.SKO_FALLBACK_TO_SKPV);break;case i0.APP_STORE:n.emit(_1.STORE_KIT_FALLBACK_TO_MRAID)}},[iz.CANCEL_DELAY_SHOW]:()=>{null==i||i.reset()}}}),hp=(e=hu(),t=i0.APP_STORE)=>{let n=hS(e,t);return tt(eJ({},n),{initial:iX.INITIAL,context:{appStoreId:void 0,displayOptions:e,fallback:t},states:tt(eJ({},n.states),{[iX.INITIAL]:{on:{[ij.READY]:{target:iX.PREPARING,actions:[hv.SET_APP_STORE_ID,hv.PREPARE_OVERLAY]}}},[iX.PREPARING]:{on:{[ij.SET_PREPARED]:{target:iX.IDLE},[ij.SET_ERROR]:{target:iX.ERROR,actions:hv.EMIT_PREPARE_ERROR}}},[iX.DELAY_SHOW_VISIBLE]:{on:{[ij.CLOSE]:{target:iX.CLOSING,actions:iz.CLOSE_SKO},[ij.FINISH]:{target:iX.INITIAL},[ij.INTERRUPT]:{target:iX.DELAY_SHOW_INTERRUPTED,actions:iz.CLOSE_SKO}}},[iX.IMMEDIATE_SHOW_VISIBLE]:{on:{[ij.CLOSE]:{target:iX.CLOSING,actions:iz.CLOSE_SKO},[ij.FINISH]:{target:iX.INITIAL},[ij.INTERRUPT]:{target:iX.CLOSING,actions:iz.CLOSE_SKO}}},[iX.CLOSING]:{on:{[ij.FINISH]:{target:iX.INITIAL}}}})})},hg=(e=td(),t=oZ(),n=cH(),i=_0())=>({actions:tt(eJ({},hT(e,t,i,n).actions),{[hv.PREPARE_OVERLAY]:t=>{var n,i;null==(i=e.getMraidExt())||null==(n=i.prepareStoreOverlayView)||n.call(i,t.appStoreId,t.displayOptions)},[hv.SET_APP_STORE_ID]:e9({appStoreId:(e,t)=>t.appStoreId||e.appStoreId}),[hv.EMIT_PREPARE_ERROR]:()=>{t.emit(tA.STORE_KIT_OVERLAY_PREPARE_ERROR)},[iz.SHOW_SKO]:t=>{var n,i;null==(i=e.getMraidExt())||null==(n=i.presentStoreOverlayView)||n.call(i,t.appStoreId,t.displayOptions)},[iz.CLOSE_SKO]:t=>{var n,i;null==(i=e.getMraidExt())||null==(n=i.dismissStoreOverlayView)||n.call(i,t.appStoreId)}})});var hC=class extends i2{init(e){this.interpreter.send(eJ({type:ij.READY},e))}close(){super.close(),this.interpreter.send({type:ij.READY})}finish(){super.finish(),this.interpreter.send({type:ij.READY})}registerMraidEvents(){Object.values(vt).forEach((e=>{this.rootElement.addEventListener(e,(()=>{this.reportingService.emit({type:"storekit-mraid",event:e})}))}))}constructor(e=hp,t=hg,n=iN(),i=tE(),r=tM(),a=td(),s=ve(),o=_L()){super(e(hE(i),i1(r)),t(a),n),this.stateMachineService=n,this.tokenService=i,this.environmentService=r,this.mraidService=a,this.reportingService=s,this.rootElement=o,this.registerMraidEvents()}},hI=class extends i2{constructor(e=hS,t=hT,n=iN(),i=tE(),r=tM(),a=td(),s=oZ(),o=_0(),l=cH()){super(e(hE(i),i1(r)),t(a,s,o,l),n)}},hA=class{withAppStoreId(e){let t=rx(this.tokenService);return t&&e.init({appStoreId:t}),e}resolve(){if(this.environmentService.getOperatingSystem()===tg.iOS)return vs(this.environmentService)?new hI:this.withAppStoreId(new hC)}constructor(e=tM(),t=tE()){this.environmentService=e,this.tokenService=t}},hO=(e=tM(),t=tE())=>{let n=eX.getInstance(),i=new hA(e,t).resolve();return i&&n.bind(i2.getServiceIdentifier(),i),i},hm=(e=cv())=>{e.init()};const hf={},hN=()=>{window.omidBridge&&Object.entries(hf).forEach((([e,t])=>{var n;"function"==typeof(null==(n=window.omidBridge)?void 0:n[e])&&window.omidBridge[e](...t)}))};var hD=e=>new Promise(((t,n)=>{let i=document.createElement("script");i.src=e,document.head.appendChild(i),i.onload=t,i.onerror=()=>n(Error(`Failed to load script url ${e}`))}));const hR=new tT("6.9.1"),hy=async(e=tE(),t=tM(),n=hD,i=tH(),r=hN)=>{if(th(e.get(t_.OM_ENABLED))&&!t.getSdkVersion().isLessThan(hR))try{await n("omsdk.js"),await n("omsdk-session.js"),r()}catch(e){i.emit({type:"error-logging",event:r2.EXCEPTION,data:{error:{message:"Load OMSDK files failed"}}})}},hL=e=>{var t,n;null!=(null==e||null==(t=e.data)?void 0:t.current_time)&&null!=(null==e||null==(n=e.data)?void 0:n.duration)&&a8(e.data.current_time,e.data.duration,Math.round(e.data.current_time))},hP=e=>{let t=tB();oj(t)&&cP(e,t.getId(),t.getTrackingEventMapConfig())},hb=e=>{var t,n;let i=cw();(null==e||null==(t=e.data)?void 0:t.error)&&i.pushError(e.data.error,{url:null==(n=e.data)?void 0:n.video_url,error_source:tm.RESOURCE})},hw=e=>{let t=cw(),n={[aQ.HLS_VIDEO_STALLED]:[tA.HLS_VIDEO_STALLED,tO.HLS_VIDEO_STALLED],[aQ.HLS_LEVEL_SWITCHED]:[tA.HLS_LEVEL_SWITCHED,tO.HLS_LEVEL_SWITCHED]};t.pushEvent(eJ({name:n[e.event][0],metric:n[e.event][1]},e.data))};var hM=(e,t)=>{let n=rX(e);switch(t.event){case aQ.PROGRESS:hL(t);break;case aQ.MUTE:case aQ.UNMUTE:n.emit(t.event===aQ.MUTE?rK.VIDEO_MUTE:rK.VIDEO_UNMUTE),hP(t.event===aQ.MUTE?ik.MUTE:ik.UNMUTE);break;case aQ.CLOSE:n.emit(rK.VIDEO_CLOSE),hP(ik.SKIP);break;case aQ.PAUSE:case aQ.PLAY:hP(t.event===aQ.PAUSE?ik.PAUSE:ik.RESUME);break;case aQ.ERROR:hb(t);break;case aQ.HLS_VIDEO_STALLED:case aQ.HLS_LEVEL_SWITCHED:hw(t)}};const hV=(e,t)=>{if(t===tg.iOS)return e===rK.VIDEO_LENGTH?"7.4.1":"0.0.0";switch(e){case rK.REWARD_GRANTED:return"6.12.0";case rK.VIDEO_LENGTH:return"7.4.4";default:return"0.0.0"}};var hk=(e,t,n=td().getMraidBridgeExt(),i=tM())=>{let r=i.getSdkVersion(),a=hV(t.event,i.getOperatingSystem());r.isGreaterThanOrEqualTo(new tT(a))&&(null==n||n.notifyTPAT(t.event))},hU=(e,t,n=iF(),i=iH(),r=lu)=>{if(t.event===tx.MINIMIZED)n.standby(),i.pauseAll();else if(t.event===tx.MAXIMIZED){let e=r();if(null==e?void 0:e.state.matches(lt.AUTO_PLAY_FAIL))return;n.wake(),i.startAll()}};let hB=null;var hH=(e,t,n=td())=>{if(t.event===i6.START){if(hB)return;let e=n.getMraidBridgeExt();e&&(hB=window.setInterval((()=>{e.creativeHeartbeat()}),4e3))}else t.event===i6.STOP&&hB&&(window.clearInterval(hB),hB=null)},hW=(e=iN(),t=hh)=>_q(e,t);const hx=e=>{var t;if(0===e){let e=i3();(null==e?void 0:e.isOpen())&&(null==e||e.close())}else 1===e&&(null==(t=hW())||t.send({type:ij.SET_VISIBLE}))},hF=e=>{var t,n;0===e?null==(t=ri())||t.close():1===e&&(null==(n=i3())||n.finish())},hK=e=>{var t,n;0===e?null==(t=ri())||t.fallback():1===e&&(null==(n=i3())||n.fallback())};var hG=(e,t)=>{var n;if(!Object.values(vi).includes(t.event))return;let i=null==(n=t.data)?void 0:n.mode;switch(t.event){case vi.VISIBLE:hx(i);break;case vi.FINISHED:hF(i);break;case vi.FAILED:hK(i)}},hY=(e,t,n=tM(),i=cv())=>{t.data.is_fatal&&(n.getSdkVersion().isGreaterThanOrEqualTo(tC.sdkSeven)?i.notifyFatalError(t):i9())},hj=(e,t)=>{iJ()&&Object.values(vn).includes(t.event)&&{[vn.STORE_VIEW_PREPARED]:()=>{var e;null==(e=_Z())||e.send({type:re.PREPARE_SUCCESS})},[vn.STORE_VIEW_CLOSED]:()=>{var e;null==(e=_Z())||e.send({type:re.CLOSE})}}[t.event]()},hX=(e,t)=>{var n;if(!rc())return;let i=i3();null==(n={[vt.OVERLAY_PREPARED]:()=>{var e;null==(e=hW())||e.send({type:ij.SET_PREPARED})},[vt.OVERLAY_FINISHED]:()=>{var e;null==(e=hW())||e.send({type:ij.FINISH})},[vt.OVERLAY_FAILED]:()=>{let e=hW();(null==e?void 0:e.state.matches(iX.PREPARING))?e.send({type:ij.SET_ERROR}):null==i||i.fallback()},[vt.OVERLAY_VISIBLE]:()=>{var e;null==(e=hW())||e.send({type:ij.SET_VISIBLE})}}[t.event])||n.call(void 0)},hz=(e,t,n=c4(),i=uX(),r=Ef)=>{if(t.event===dw.CLOSE){let{is_video_scene:a}=t.data;if(n.state.context.isCloseButtonVisible){if(e.getLogger("custom-mraid").info(dw.CLOSE),(null==i?void 0:i.state.value)===ux.SHOWING)return void i.send({type:uF.HIDE});if(!n.state.context.isPrivacyButtonVisible){if(n.state.context.isIncentivized&&a)return void r(n.send,i,e)({type:ib.NEXT});n.send({type:ib.NEXT})}}}};const h$={[d2.DOWNLOAD_BUTTON_CTA]:tO.DOWNLOAD_BUTTON_CTA,[d2.ENDCARD_CTA]:tO.ENDCARD_CTA,[d2.LAST_CHANCE_ENDCARD_CTA]:tO.LAST_CHANCE_ENDCARD_CTA,[d2.PERSISTENT_CTA]:tO.PERSISTENT_CTA,[li.FSC]:tO.FSC},hq=(e,t)=>e.getActivityEvents().filter((e=>"error-logging"===e.activity.eventType&&e.activity.data.error.message===t.message&&e.activity.data.error.error_source===t.error_source)).length>1;var hZ=(e,t)=>{var n;let i=cw();if("error-logging"===t.type&&(null==(n=t.data)?void 0:n.error)&&!hq(e,t.data.error))i.pushError(t.data.error);else if("cta"===t.type||"fsc"===t.type){let e=tU.getValue().scene,n={name:tA.CTA,metric:h$[t.event],scene_type:null==e?void 0:e.getSceneType()};i.pushEvent(n)}},hQ=(e,t)=>{let n=cw();t.event===tI.EVENT?n.pushEvent(t.data):t.event===tI.ERROR&&t.data.error&&n.pushError(t.data.error)},hJ=(e,t,n=cE())=>{t.event===l1.SILENT?n.mute():t.event===l1.UN_SILENT&&n.unmute()},h0=(e,t,n=td())=>{var i;t.event===cq.DECODING_ERROR&&(null==(i=n.getMraid())||i.close())},h1=(e,t,n=td(),i=oZ(),r=_M(),a=de())=>o2((()=>a.haveAllCompleted()),o3.MAX_WAIT_TIME+100,Error("error waiting for all event streams to finish")).catch((()=>{})).finally((()=>{i.emit(tA.AD_CLOSE,tO.AD_CLOSE),null==r||r.addRecord(),n.getMraid().close()}));const h2=(e,t=l3())=>{let n=t.find((t=>t.getId()===e));return n||t.filter((e=>e.getSceneType()===iM.composite)).map((t=>h2(e,t.getScenes()))).find(Boolean)};var h3=h2;const h5={[iM.composite]:tO.COMPOSITE_SCENE_END,[iM.endcard]:tO.ENDCARD_SCENE_END,[iM.image]:tO.IMAGE_SCENE_END,[iM.video]:tO.VIDEO_SCENE_END};var h4=(e,t,n=h3,i=l3,r=de(),a=oZ())=>{let s=n(t.data.scene_id);if(s&&t.event===aE.SCENE_END){let e=i().indexOf(s);r.subscribeAll(s).then((n=>{var i;Object.keys(n).length>0&&a.emit({type:"observability",event:tI.EVENT,data:eJ({name:tA.SCENE_END,metric:null!=(i=h5[t.data.scene_type])?i:tO.SCENE_END,scene_id:t.data.scene_id,scene_type:t.data.scene_type,scene_index:e},s.getObservabilityData(),n)})}))}},h6=(e,t,n=td(),i=rX(),r=oZ())=>{t.event===rS.GRANT_REWARD&&(n.getMraidBridgeExt().notifySuccessfulViewAd(),i.emit(rK.REWARD_GRANTED),r.emit(tA.GRANT_REWARD,tO.GRANT_REWARD))},h8=(e,t,n=r$(),i=i3(),r=ri(),a=tM(),s=tV())=>{if(t.event===_1.SKPV_FALLBACK_TO_SKO){var o;let t=null!=(o=null==i?void 0:i.getState().matches(iX.FALLBACK))&&o;if(rc(a,s)&&!t)return void(null==i||i.open({fallback:i0.APP_STORE}));e.emit({type:"store-kit-orchestration",event:_1.STORE_KIT_FALLBACK_TO_MRAID})}t.event===_1.SKO_FALLBACK_TO_SKPV&&(null==r||r.open()),t.event===_1.STORE_KIT_FALLBACK_TO_MRAID&&n.invoke({url:void 0,target:iV.OFF,shouldFireMMP:!1})},h7=(e,t,n=oZ())=>{if(t.event===nt.APP_STORE_CLOSE){let t=e.getActivityEventPairs("store-kit-product-view",nt.APP_STORE_OPEN,nt.APP_STORE_CLOSE);if(n.getEventCount(tA.APP_STORE_DURATION)<t.length){let e={name:tA.APP_STORE_DURATION,metric:tO.APP_STORE_DURATION,elapsed:Date.now()-t[t.length-1][0].timestamp};n.emit(e)}}},h9=(e,t,n=c_(),i=c4)=>{i().state.context.shouldRenderPictureInPicture&&(n.closeVideo(),i().send({type:ib.CLOSE_PICTURE_IN_PICTURE}))},Se=(e,t,n=oZ())=>{t.event===rK.CHECKPOINT_0&&n.emit(tA.IMPRESSION,tO.IMPRESSION)},St=((eW=St||{}).INACTIVITY="INACTIVITY",eW),Sn=(e,t,n=oZ(),i=lg,r=tB,a=l3)=>{if(t.event===St.INACTIVITY){let e=r(),t=a().findIndex((t=>t.getId()===(null==e?void 0:e.getId())));n.emit({name:tA.INACTIVITY_OBSERVED,metric:tO.INACTIVITY_OBSERVED,scene_id:null==e?void 0:e.getId(),scene_type:null==e?void 0:e.getSceneType(),scene_index:t,last_chance_endcard_visible:i()})}},Si=()=>{let e=tW();e.addEventHandler("*",hZ),e.addEventHandler("close",h1),e.addEventHandler("observability",hQ),e.addEventHandler("heartbeat",hH),e.addEventHandler("storekit-mraid",hG),e.addEventHandler("storekit-mraid",hj),e.addEventHandler("storekit-mraid",hX),e.addEventHandler("tpat",hk),e.addEventHandler("tpat",Se),e.addEventHandler("video",hM),e.addEventHandler("video",ED),e.addEventHandler("viewability",hU),e.addEventHandler("error-logging",hY),e.addEventHandler("custom-mraid",hz),e.addEventHandler("videoViewed",a7),e.addEventHandler("silent",hJ),e.addEventHandler("free-form",h0),e.addEventHandler("scene-event",h4),e.addEventHandler("incentivized-event",h6),e.addEventHandler("store-kit-product-view",h7),e.addEventHandler("store-kit-orchestration",h8),e.addEventHandler("picture-in-picture",h9),e.addEventHandler("inactivity",Sn)},Sr=(e=td(),t=tE())=>{let n=e.getMraidBridgeExt();n&&(t.replacementTokens=n.getReplacementTokens())},Sa=(e=tM(),t=ve(),n=_L())=>{e.getOperatingSystem()===tg.iOS&&Object.values(vi).forEach((e=>{null==n||n.addEventListener(e,(n=>{t.emit({type:"storekit-mraid",event:e,data:n.detail})}))}))},Ss=()=>tH();const So=new tT("7");var Sl=(e=td(),t=Ss(),n=tM())=>{var i;let r=void 0!==(null==(i=e.getMraidBridgeExt())?void 0:i.creativeHeartbeat);n.getSdkVersion().isGreaterThanOrEqualTo(So)&&r&&t.emit({type:"heartbeat",event:i6.START})};let Sc=-1;const Sd=e=>{addEventListener("pageshow",(t=>{t.persisted&&(Sc=t.timeStamp,e(t))}),!0)},Su=(e,t,n,i)=>{let r,a;return s=>{let o;t.value>=0&&(s||i)&&((a=t.value-(null!=r?r:0))||void 0===r)&&(r=t.value,t.delta=a,o=t.value,t.rating=o>n[1]?"poor":o>n[0]?"needs-improvement":"good",e(t))}},SE=e=>{requestAnimationFrame((()=>requestAnimationFrame((()=>e()))))},S_=()=>{let e=performance.getEntriesByType("navigation")[0];if(e&&e.responseStart>0&&e.responseStart<performance.now())return e},Sv=()=>{var e;let t=S_();return null!=(e=null==t?void 0:t.activationStart)?e:0},Sh=(e,t=-1)=>{let n=S_(),i="navigate";return Sc>=0?i="back-forward-cache":n&&(document.prerendering||Sv()>0?i="prerender":document.wasDiscarded?i="restore":n.type&&(i=n.type.replace(/_/g,"-"))),{name:e,value:t,rating:"good",delta:0,entries:[],id:`v5-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:i}},SS=new WeakMap;function ST(e,t){return SS.get(e)||SS.set(e,new t),SS.get(e)}const Sp=(e,t,n={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){let i=new PerformanceObserver((e=>{Promise.resolve().then((()=>{t(e.getEntries())}))}));return i.observe(eJ({type:e,buffered:!0},n)),i}}catch(e){}},Sg=e=>{let t=!1;return()=>{t||(e(),t=!0)}};let SC=-1;const SI=()=>"hidden"!==document.visibilityState||document.prerendering?1/0:0,SA=e=>{"hidden"===document.visibilityState&&SC>-1&&(SC="visibilitychange"===e.type?e.timeStamp:0,Sm())},SO=()=>{addEventListener("visibilitychange",SA,!0),addEventListener("prerenderingchange",SA,!0)},Sm=()=>{removeEventListener("visibilitychange",SA,!0),removeEventListener("prerenderingchange",SA,!0)},Sf=()=>{if(SC<0){var e;let t=Sv(),n=document.prerendering||null==(e=globalThis.performance.getEntriesByType("visibility-state").filter((e=>"hidden"===e.name&&e.startTime>t))[0])?void 0:e.startTime;SC=null!=n?n:SI(),SO(),Sd((()=>{setTimeout((()=>{SC=SI(),SO()}))}))}return{get firstHiddenTime(){return SC}}},SN=e=>{document.prerendering?addEventListener("prerenderingchange",(()=>e()),!0):e()},SD=[1800,3e3],SR=(e,t={})=>{SN((()=>{let n,i=Sf(),r=Sh("FCP"),a=Sp("paint",(e=>{for(let t of e)"first-contentful-paint"===t.name&&(a.disconnect(),t.startTime<i.firstHiddenTime&&(r.value=Math.max(t.startTime-Sv(),0),r.entries.push(t),n(!0)))}));a&&(n=Su(e,r,SD,t.reportAllChanges),Sd((i=>{n=Su(e,r=Sh("FCP"),SD,t.reportAllChanges),SE((()=>{r.value=performance.now()-i.timeStamp,n(!0)}))})))}))};let Sy=0,SL=1/0,SP=0;const Sb=e=>{for(let t of e)t.interactionId&&(SL=Math.min(SL,t.interactionId),Sy=(SP=Math.max(SP,t.interactionId))?(SP-SL)/7+1:0)},Sw=()=>{var t;return e?Sy:null!=(t=performance.interactionCount)?t:0},SM=()=>{"interactionCount"in performance||e||(e=Sp("event",Sb,{type:"event",buffered:!0,durationThreshold:0}))};let SV=0;class Sk{v(){SV=Sw(),this.u.length=0,this.l.clear()}P(){let e=Math.min(this.u.length-1,Math.floor((Sw()-SV)/50));return this.u[e]}h(e){var t,n;if(null==(t=this.m)||t.call(this,e),!e.interactionId&&"first-input"!==e.entryType)return;let i=this.u.at(-1),r=this.l.get(e.interactionId);if(r||this.u.length<10||e.duration>i.T){if(r?e.duration>r.T?(r.entries=[e],r.T=e.duration):e.duration===r.T&&e.startTime===r.entries[0].startTime&&r.entries.push(e):(r={id:e.interactionId,entries:[e],T:e.duration},this.l.set(r.id,r),this.u.push(r)),this.u.sort(((e,t)=>t.T-e.T)),this.u.length>10)for(let e of this.u.splice(10))this.l.delete(e.id);null==(n=this.p)||n.call(this,r)}}constructor(){eQ(this,"u",[]),eQ(this,"l",new Map),eQ(this,"m",void 0),eQ(this,"p",void 0)}}const SU=e=>{let t=globalThis.requestIdleCallback||setTimeout;"hidden"===document.visibilityState?e():(t(e=Sg(e)),document.addEventListener("visibilitychange",e,{once:!0}))},SB=[200,500],SH=(e,t={})=>{globalThis.PerformanceEventTiming&&"interactionId"in PerformanceEventTiming.prototype&&SN((()=>{var n;SM();let i,r=Sh("INP"),a=ST(t,Sk),s=e=>{SU((()=>{for(let t of e)a.h(t);let t=a.P();t&&t.T!==r.value&&(r.value=t.T,r.entries=t.entries,i())}))},o=Sp("event",s,{durationThreshold:null!=(n=t.durationThreshold)?n:40});i=Su(e,r,SB,t.reportAllChanges),o&&(o.observe({type:"first-input",buffered:!0}),document.addEventListener("visibilitychange",(()=>{"hidden"===document.visibilityState&&(s(o.takeRecords()),i(!0))})),Sd((()=>{a.v(),i=Su(e,r=Sh("INP"),SB,t.reportAllChanges)})))}))};class SW{h(e){var t;null==(t=this.m)||t.call(this,e)}constructor(){eQ(this,"m",void 0)}}const Sx=[2500,4e3],SF=(e,t={})=>{SN((()=>{let n,i=Sf(),r=Sh("LCP"),a=ST(t,SW),s=e=>{for(let s of(t.reportAllChanges||(e=e.slice(-1)),e))a.h(s),s.startTime<i.firstHiddenTime&&(r.value=Math.max(s.startTime-Sv(),0),r.entries=[s],n())},o=Sp("largest-contentful-paint",s);if(o){n=Su(e,r,Sx,t.reportAllChanges);let i=Sg((()=>{s(o.takeRecords()),o.disconnect(),n(!0)}));for(let e of["keydown","click","visibilitychange"])addEventListener(e,(()=>SU(i)),{capture:!0,once:!0});Sd((i=>{n=Su(e,r=Sh("LCP"),Sx,t.reportAllChanges),SE((()=>{r.value=performance.now()-i.timeStamp,n(!0)}))}))}}))},SK=[800,1800],SG=e=>{document.prerendering?SN((()=>SG(e))):"complete"!==document.readyState?addEventListener("load",(()=>SG(e)),!0):setTimeout(e)},SY=(e,t={})=>{let n=Sh("TTFB"),i=Su(e,n,SK,t.reportAllChanges);SG((()=>{let r=S_();r&&(n.value=Math.max(r.responseStart-Sv(),0),n.entries=[r],i(!0),Sd((()=>{(i=Su(e,n=Sh("TTFB",0),SK,t.reportAllChanges))(!0)})))}))},Sj=e=>t=>{let n={FCP:tA.WEB_VITALS_FIRST_CONTENTFUL_PAINT,INP:tA.WEB_VITALS_INTERACTION_TO_NEXT_PAINT,LCP:tA.WEB_VITALS_LARGEST_CONTENTFUL_PAINT,TTFB:tA.WEB_VITALS_TIME_TO_FIRST_BYTE};e.emit({name:n[t.name],value:Math.round(t.value)})};var SX=(e=oZ(),t=SR,n=SH,i=SF,r=SY)=>{let a=Sj(e);t(a),n(a),i(a),r(a)},Sz=e=>{try{return new URL(e).origin}catch(e){return""}},S$=(e,t)=>{let n=e.getAttribute(t);if(null!==n){if(n.endsWith("%")&&0===parseFloat(n))return!1;let e=parseFloat(n);return!(Number.isNaN(e)||e<=1)}return!0},Sq=(e,t)=>{let n=(new DOMParser).parseFromString(e,"text/html"),i=t?`href="${t}"`:"";return n.head.insertAdjacentHTML("afterbegin","<style>body {margin: 0;padding: 0;overflow: hidden;}</style>"),n.head.insertAdjacentHTML("afterbegin",`<base target="_parent" ${i}>`),e.toLocaleLowerCase().startsWith("<!doctype html>")?`<!DOCTYPE html>${n.documentElement.outerHTML}`:n.documentElement.outerHTML},SZ=e=>{let t=(new DOMParser).parseFromString(e,"text/html");return t.getElementsByTagName("iframe")[0].removeAttribute("src"),e.toLocaleLowerCase().startsWith("<!doctype html>")?`<!DOCTYPE html>${t.documentElement.outerHTML}`:t.documentElement.outerHTML},SQ=class{getNestedIframeContentData(e){try{let t=(new DOMParser).parseFromString(e,"text/html").getElementsByTagName("iframe");if(1!==t.length)return;let n=t[0],i=n.getAttribute("src");if(!(null==i?void 0:i.startsWith("http")))return;let r=n.getAttribute("style");if((null==r?void 0:r.toLowerCase().replace(/\s+/g," ").includes("display: none"))||!S$(n,"width")||!S$(n,"height"))return;return{src:i,baseUrl:Sz(i)}}catch(e){return}}async initializeIframeContentData(e,t){let n={content:Sq(e)};if(t){let{src:i}=t;n.nestedFrameContent=eJ({},t);try{let e=await window.fetch(i);if(e.ok){let i=await e.text();n.nestedFrameContent.content=Sq(i,t.baseUrl),n.content=SZ(n.content)}}catch(e){}}return n}},SJ=(e=l3())=>{let t=e.filter((e=>e.getSceneType()===iM.endcard));if(!t.length)return;let n=new SQ;t.forEach((e=>{e.initIframeContentData(n)}))},S0=(e,t)=>ao(e,"observability").pipe(as((e=>{let{data:n}=e;return null!=n&&(Array.isArray(n)?n.some((e=>e.name===t)):n.name===t)}))),S1=(e=iF(),t=tW(),n=oZ(),i=1e4,r=S0)=>{r(n,tA.AD_START).pipe(aT((()=>ao(t,"*").pipe(function(e,t=iF()){return n=>new aa((i=>{let r,a=()=>{r&&(r.destroy(),r=void 0)},s=n.subscribe({next:n=>{a(),(r=t.getNewTimer(e,(()=>(e=>{i.next(e),r=void 0})(n)))).start()},error:e=>{var t;a(),null==(t=i.error)||t.call(i,e)},complete:()=>{var e;a(),null==(e=i.complete)||e.call(i)}});return{unsubscribe:()=>{a(),s.unsubscribe()}}}))}(i,e),ad(aX(ao(t,"inactivity"),r(n,tA.AD_CLOSE))))))).subscribe({next:()=>{t.emit({type:"inactivity",event:St.INACTIVITY,fireOnlyOnce:!0})},error:e=>{t.emit({type:"error-logging",event:r2.EXCEPTION,data:{error:e}})},complete:()=>{}})},S2=(e=td(),t=tM())=>{var n;let i=e.getMraid();t.getOperatingSystem()===tg.Windows&&(null==i||null==(n=i.useCustomClose)||n.call(i,!0))},S3=(e=tV(),t=l3(),n=tE(),i=_M())=>{if(th(n.get(t_.DYNAMIC_AD_OPTIMIZATION))&&e.getPlacementType()===tu.FULLSCREEN&&!e.isRewarded()&&!n.has(t_.AD_EXPERIENCE)&&oj(t[0])&&oX(t[1])){var r;let e=eX.getInstance(),t=new oI(null!=(r=n.get(t_.SESSION_ID))?r:"",i);e.bind(oI.getServiceIdentifier(),t)}};const S5=async()=>{Sr(),Si(),_X();let e=oZ();e.emit(tA.AD_LOAD,tO.AD_LOAD),hm(),_x(),vO(),hO(),hl(),_H(),Sa(),ho(),SJ(),_K(),await hy(),Sl(),SX(),S2(),S3(),_W(),S1(),e.emit(tA.AD_LOAD_COMPLETE,tO.AD_LOAD_COMPLETE)};(()=>{let e=eX.getInstance(),t=new e$,n=new ta;e.bind(ni.getServiceIdentifier(),new lZ(n).resolve()),e.bind(e$.getServiceIdentifier(),t),e.bind(eZ.getServiceIdentifier(),new eZ),e.bind(te.getServiceIdentifier(),new te),e.bind(ta.getServiceIdentifier(),n),e.bind(tc.getServiceIdentifier(),new tc),e.bind(to.getServiceIdentifier(),new to),e.bind(tS.getServiceIdentifier(),new tS(t,n)),e.bind(tC.getServiceIdentifier(),new tC(t,n)),e.bind(na.getServiceIdentifier(),new na),e.bind(ns.getServiceIdentifier(),new ns),e.bind(im.getServiceIdentifier(),new im),e.bind(oz.getServiceIdentifier(),new oz),e.bind(oQ.getServiceIdentifier(),new oQ(n)),e.bind(o3.getServiceIdentifier(),new o3),e.bind(o9.getServiceIdentifier(),new o9),e.bind(lc.getServiceIdentifier(),new lc),e.bind(og.getServiceIdentifier(),new og),e.bind(ls.getServiceIdentifier(),new ls),e.bind(lj.getServiceIdentifier(),new lj),e.bind(lX.getServiceIdentifier(),new lX)})(),td().init(),window.omidBridge=new Proxy({},{get:(e,t)=>(...e)=>{hf[t]=e}}),((e=td())=>new Promise((t=>{let n=e.getMraid();(null==n?void 0:n.getState())===ti.LOADING?null==n||n.addEventListener("ready",(()=>{t(!0)})):t(!0)})))().then(S5).then((()=>new Promise((e=>{var t;let n=td();if(null==(t=n.getMraid())?void 0:t.isViewable())e(!0);else{let t=window.setInterval((()=>{var i;(null==(i=n.getMraid())?void 0:i.isViewable())&&(window.clearInterval(t),e(!0))}),100)}})))).then((()=>{var e,t,n,i,r;_B(),_w(),e=lJ(_b,{}),(t=document.getElementById("dynamic"))==document&&(t=document.documentElement),t1.__&&t1.__(e,t),n=t.__k,i=[],r=[],nm(t,e=t.__k=n_(nh,null,[e]),n||no,no,t.namespaceURI,n?null:t.firstChild?t0.call(t.childNodes):null,i,n?n.__e:t.firstChild,!1,r),nf(i,e,r)}));</script> </body></html>